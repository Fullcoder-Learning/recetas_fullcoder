<!DOCTYPE html>
<html  lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

      <title>Frontend Angular Task Learn</title>
    
          <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
          <link rel="stylesheet" href="../_static/theme.css " type="text/css" />
      
      <!-- sphinx script_files -->
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>

      
      <!-- bundled in js (rollup iife) -->
      <!-- <script src="../_static/theme-vendors.js"></script> -->
      <script src="../_static/theme.js" defer></script>
    
      <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <link rel="index" title="Índice" href="../genindex.html" />
  <link rel="search" title="Búsqueda" href="../search.html" />
  <link rel="next" title="Backend NodeJS + ExpressJS - API Task Learn" href="../fullstack/task-learn-symfony.html" />
  <link rel="prev" title="Frontend React Task Learn" href="react.html" /> 
  </head>

  <body>
    <div id="app">
    <div class="theme-container" :class="pageClasses"><navbar @toggle-sidebar="toggleSidebar">
  <router-link to="../index.html" class="home-link">
    
      <img class="logo" src="../_static/fullcoderlogo.png" alt="logo"/>
    
  </router-link>

  <div class="links">
    <navlinks class="can-hide">

  
    <div class="nav-item">
      <a href="../index.html#recetas-fullcoder-agile-learning-practico"
         class="nav-link ">
         Proyectos Backend
      </a>
    </div>
  
    <div class="nav-item">
      <a href="../index.html#recetas-fullcoder-agile-learning-practico"
         class="nav-link  router-link-active">
         Proyectos Frontend
      </a>
    </div>
  
    <div class="nav-item">
      <a href="../index.html#recetas-fullcoder-agile-learning-practico"
         class="nav-link ">
         Proyectos Fullstack
      </a>
    </div>
  



    </navlinks>
  </div>
</navbar>

      
      <div class="sidebar-mask" @click="toggleSidebar(false)">
      </div>
        <sidebar @toggle-sidebar="toggleSidebar">
          
          <navlinks>
            

  
    <div class="nav-item">
      <a href="../index.html#recetas-fullcoder-agile-learning-practico"
         class="nav-link ">
         Proyectos Backend
      </a>
    </div>
  
    <div class="nav-item">
      <a href="../index.html#recetas-fullcoder-agile-learning-practico"
         class="nav-link  router-link-active">
         Proyectos Frontend
      </a>
    </div>
  
    <div class="nav-item">
      <a href="../index.html#recetas-fullcoder-agile-learning-practico"
         class="nav-link ">
         Proyectos Fullstack
      </a>
    </div>
  



            
          </navlinks><div id="searchbox" class="searchbox" role="search">
  <div class="caption"><span class="caption-text">Búsqueda rápida</span>
    <div class="searchformwrapper">
      <form class="search" action="../search.html" method="get">
        <input type="text" name="q" />
        <input type="submit" value="Búsqueda" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div><div class="sidebar-links" role="navigation" aria-label="main navigation">
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="../index.html#recetas-fullcoder-agile-learning-practico">Proyectos Backend</a></span>
      </p>
      <ul class="">
        
          <li class="toctree-l1 ">
            
              <a href="../backend/api-node.html" class="reference internal ">Backend NodeJS + ExpressJS - API Task Learn</a>
            

            
          </li>

        
      </ul>
    </div>
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="../index.html#recetas-fullcoder-agile-learning-practico">Proyectos Frontend</a></span>
      </p>
      <ul class="current">
        
          <li class="toctree-l1 ">
            
              <a href="react.html" class="reference internal ">Frontend React Task Learn</a>
            

            
          </li>

        
          <li class="toctree-l1 current">
            
              <a href="#" class="reference internal current">Frontend Angular Task Learn</a>
            

            
              <ul>
                
                  <li class="toctree-l2"><a href="#fase-1-diseno-de-la-aplicacion" class="reference internal">Fase 1: Diseño de la aplicación</a></li>
                
                  <li class="toctree-l2"><a href="#fase-2-conectar-con-api-rest" class="reference internal">Fase 2: Conectar con API Rest</a></li>
                
                  <li class="toctree-l2"><a href="#fase-3-diseno-responsivo" class="reference internal">Fase 3: Diseño responsivo</a></li>
                
              </ul>
            
          </li>

        
      </ul>
    </div>
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="../index.html#recetas-fullcoder-agile-learning-practico">Proyectos Fullstack</a></span>
      </p>
      <ul class="">
        
          <li class="toctree-l1 ">
            
              <a href="../fullstack/task-learn-symfony.html" class="reference internal ">Backend NodeJS + ExpressJS - API Task Learn</a>
            

            
          </li>

        
      </ul>
    </div>
  
</div>
        </sidebar>

      <page>
          <div class="body-header" role="navigation" aria-label="navigation">
  
  <ul class="breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
    
    <li>Frontend Angular Task Learn</li>
  </ul>
  

  <ul class="page-nav">
  <li class="prev">
    <a href="react.html"
       title="capítulo anterior">← Frontend React Task Learn</a>
  </li>
  <li class="next">
    <a href="../fullstack/task-learn-symfony.html"
       title="próximo capítulo">Backend NodeJS + ExpressJS - API Task Learn →</a>
  </li>
</ul>
  
</div>
<hr>
          <div class="content" role="main" v-pre>
            
  <section id="frontend-angular-task-learn">
<h1><a class="toc-backref" href="#id2">Frontend Angular Task Learn</a><a class="headerlink" href="#frontend-angular-task-learn" title="Enlazar permanentemente con este título">¶</a></h1>
<a class="reference internal image-reference" href="../_images/logo-angular.png"><img alt="Logo Angular" class="align-center" src="../_images/logo-angular.png" style="width: 409.6px; height: 409.6px;" /></a>
<p>Frontend aplicación listado de tareas desarrollada con Angular.</p>
<p>Versión : 14.2.2</p>
<ul class="simple">
<li><p>Repositorio proyecto completo: <a class="reference external" href="https://github.com/Fullcoder-Learning/angular-task-learn-frontend">https://github.com/Fullcoder-Learning/angular-task-learn-frontend</a></p></li>
</ul>
<div class="contents topic" id="indice">
<p class="topic-title">Índice</p>
<ul class="simple">
<li><p><a class="reference internal" href="#frontend-angular-task-learn" id="id2">Frontend Angular Task Learn</a></p>
<ul>
<li><p><a class="reference internal" href="#fase-1-diseno-de-la-aplicacion" id="id3">Fase 1: Diseño de la aplicación</a></p>
<ul>
<li><p><a class="reference internal" href="#paso-1-opcional-instalar-dependencias" id="id4">Paso 1 (opcional): Instalar Dependencias</a></p></li>
<li><p><a class="reference internal" href="#paso-2-preparar-proyecto" id="id5">Paso 2: Preparar proyecto</a></p></li>
<li><p><a class="reference internal" href="#paso-3-crear-pagina-de-tareas" id="id6">Paso 3: Crear página de tareas</a></p></li>
<li><p><a class="reference internal" href="#paso-4-crear-componente-navbar" id="id7">Paso 4: Crear componente navbar</a></p></li>
<li><p><a class="reference internal" href="#paso-5-crear-tabla-para-listar-tareas" id="id8">Paso 5: Crear tabla para listar tareas</a></p></li>
<li><p><a class="reference internal" href="#paso-6-crear-modals" id="id9">Paso 6: Crear modals</a></p></li>
<li><p><a class="reference internal" href="#paso-7-formulario-para-crear-tareas" id="id10">Paso 7: Formulario para crear tareas</a></p></li>
<li><p><a class="reference internal" href="#paso-8-crear-pagina-de-usuarios" id="id11">Paso 8: Crear página de usuarios</a></p></li>
<li><p><a class="reference internal" href="#paso-9-actualizar-enlaces-de-navbar" id="id12">Paso 9: Actualizar enlaces de navbar</a></p></li>
<li><p><a class="reference internal" href="#paso-10-crear-componente-para-editar-usuario" id="id13">Paso 10: Crear componente para editar usuario</a></p></li>
<li><p><a class="reference internal" href="#paso-11-crear-pantalla-de-login" id="id14">Paso 11: Crear pantalla de Login</a></p></li>
<li><p><a class="reference internal" href="#paso-12-crear-modal-para-registrar-usuarios" id="id15">Paso 12: Crear modal para registrar usuarios</a></p></li>
<li><p><a class="reference internal" href="#paso-13-crear-modal-para-recuperar-contrasena" id="id16">Paso 13: Crear modal para recuperar contraseña</a></p></li>
<li><p><a class="reference internal" href="#paso-14-crear-pagina-para-restablecer-contrasena" id="id17">Paso 14: Crear página para restablecer contraseña</a></p></li>
<li><p><a class="reference internal" href="#paso-15-crear-pagina-error-404" id="id18">Paso 15: Crear pagina error 404</a></p></li>
<li><p><a class="reference internal" href="#paso-16-subir-cambios-a-github" id="id19">Paso 16: Subir cambios a GitHub</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#fase-2-conectar-con-api-rest" id="id20">Fase 2: Conectar con API Rest</a></p>
<ul>
<li><p><a class="reference internal" href="#paso-1-descargar-api-task-learn" id="id21">Paso 1: Descargar API Task Learn</a></p></li>
<li><p><a class="reference internal" href="#id1" id="id22">Paso 2: Preparar proyecto</a></p></li>
<li><p><a class="reference internal" href="#paso-3-crear-servicio-para-registrarse" id="id23">Paso 3: Crear servicio para registrarse</a></p></li>
<li><p><a class="reference internal" href="#paso-4-crear-servicio-para-iniciar-sesion" id="id24">Paso 4: Crear servicio para iniciar sesión</a></p></li>
<li><p><a class="reference internal" href="#paso-5-securizar-rutas" id="id25">Paso 5: Securizar rutas</a></p></li>
<li><p><a class="reference internal" href="#paso-6-enviar-email-para-restablecer-contrasena" id="id26">paso 6: Enviar email para restablecer contraseña</a></p></li>
<li><p><a class="reference internal" href="#paso-7-reestablecer-contrasena" id="id27">Paso 7: Reestablecer contraseña</a></p></li>
<li><p><a class="reference internal" href="#paso-8-crear-tareas" id="id28">Paso 8: Crear tareas</a></p></li>
<li><p><a class="reference internal" href="#paso-9-recuperar-tareas" id="id29">Paso 9: Recuperar Tareas</a></p></li>
<li><p><a class="reference internal" href="#paso-10-finalizar-tarea" id="id30">Paso 10: Finalizar tarea</a></p></li>
<li><p><a class="reference internal" href="#paso-11-eliminar-tarea" id="id31">Paso 11: Eliminar tarea</a></p></li>
<li><p><a class="reference internal" href="#paso-12-editar-tareas" id="id32">Paso 12: Editar tareas</a></p></li>
<li><p><a class="reference internal" href="#paso-13-cargar-datos-de-usuario" id="id33">Paso 13: Cargar datos de usuario</a></p></li>
<li><p><a class="reference internal" href="#paso-14-editar-datos-de-usuario" id="id34">Paso 14: Editar datos de usuario</a></p></li>
<li><p><a class="reference internal" href="#paso-15-actualizar-usuario-navbar" id="id35">Paso 15: Actualizar usuario navbar</a></p></li>
<li><p><a class="reference internal" href="#paso-16-crear-boton-para-eliminar-usuario" id="id36">Paso 16: Crear botón para eliminar usuario</a></p></li>
<li><p><a class="reference internal" href="#paso-17-subir-cambios-a-github" id="id37">Paso 17: Subir cambios a GitHub</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#fase-3-diseno-responsivo" id="id38">Fase 3: Diseño responsivo</a></p>
<ul>
<li><p><a class="reference internal" href="#paso-1-preparar-proyecto" id="id39">Paso 1: Preparar proyecto</a></p></li>
<li><p><a class="reference internal" href="#paso-2-ajustar-tabla-de-tareas" id="id40">Paso 2: Ajustar Tabla de tareas</a></p></li>
<li><p><a class="reference internal" href="#paso-3-subir-cambios-a-github" id="id41">Paso 3: Subir cambios a GitHub</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<section id="fase-1-diseno-de-la-aplicacion">
<h2><a class="toc-backref" href="#id3">Fase 1: Diseño de la aplicación</a><a class="headerlink" href="#fase-1-diseno-de-la-aplicacion" title="Enlazar permanentemente con este título">¶</a></h2>
<section id="paso-1-opcional-instalar-dependencias">
<h3><a class="toc-backref" href="#id4">Paso 1 (opcional): Instalar Dependencias</a><a class="headerlink" href="#paso-1-opcional-instalar-dependencias" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Instalar NodeJS desde su sitio oficial: <a class="reference external" href="https://nodejs.org/es/">https://nodejs.org/es/</a></p></li>
<li><p>Instalar MongoDB desde su sitio oficial:  <a class="reference external" href="https://www.mongodb.com/try/download/community">https://www.mongodb.com/try/download/community</a></p></li>
<li><p>Instalar desde node Angular-cli: <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">install</span> <span class="pre">-g</span> <span class="pre">&#64;angular/cli</span></code></p></li>
</ul>
</section>
<section id="paso-2-preparar-proyecto">
<h3><a class="toc-backref" href="#id5">Paso 2: Preparar proyecto</a><a class="headerlink" href="#paso-2-preparar-proyecto" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Crear proyecto Angular: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">new</span> <span class="pre">angular-task-learn-frontend</span></code></p></li>
<li><p>Durante el proceso de creación nos pregunta si queremos rutas. Decimos que si.</p></li>
<li><p>Regresar a la raiz del proyecto <strong>react-task-learn-frontend</strong>.</p></li>
<li><p>Instalar bootstrap 5: <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">install</span> <span class="pre">bootstrap</span> <span class="pre">--save</span></code></p></li>
<li><p>Instalar popperjs: <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">install</span> <span class="pre">&#64;popperjs/core</span> <span class="pre">--save</span></code></p></li>
<li><p>Cargar bootstrap en la app en los primeros indices del archivo (los últimos no) de <strong>angular.json</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;styles&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;node_modules/bootstrap/dist/css/bootstrap.min.css&quot;</span><span class="p">,</span>
    <span class="s2">&quot;src/styles.css&quot;</span>
<span class="p">],</span>
    <span class="s2">&quot;scripts&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;node_modules/@popperjs/core/dist/umd/popper.min.js&quot;</span><span class="p">,</span>
        <span class="s2">&quot;node_modules/bootstrap/dist/js/bootstrap.min.js&quot;</span>

<span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Crear las siguientes carpetas dentro de <strong>app</strong>: <strong>components</strong>, <strong>pages</strong> y <strong>services</strong>.</p></li>
<li><p>Inicializar repositorio: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">init</span></code></p></li>
<li><p>Añadir repositorio remoto: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">remote</span> <span class="pre">add</span> <span class="pre">origin</span> <span class="pre">https://github.com/Fullcoder-Learning/angular-task-learn-frontend.git</span></code></p></li>
<li><p>Añadir cambios: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">.</span></code></p></li>
<li><p>Hacer primer commit: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-am</span> <span class="pre">&quot;first</span> <span class="pre">commit&quot;</span></code></p></li>
<li><p>Subir cambios a repositorio remoto: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span> <span class="pre">origin</span> <span class="pre">master</span></code></p></li>
<li><p>Crear rama desarrollo: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">-b</span> <span class="pre">developer</span></code></p></li>
<li><p>Subir rama desarrollo: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span> <span class="pre">origin</span> <span class="pre">developer</span></code></p></li>
<li><p>Crear rama feature a partir de developer: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">-b</span> <span class="pre">feature/phase-1-task-structure</span></code></p></li>
<li><p>Arrancar proyecto desde la raiz: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">serve</span> <span class="pre">--port</span> <span class="pre">3000</span></code></p></li>
</ul>
</section>
<section id="paso-3-crear-pagina-de-tareas">
<h3><a class="toc-backref" href="#id6">Paso 3: Crear página de tareas</a><a class="headerlink" href="#paso-3-crear-pagina-de-tareas" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Para crear una nueva página ejecutamos en terminal: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">component</span> <span class="pre">pages/tasks</span></code> y editamos <strong>tasks.component.html</strong>.</p></li>
<li><p>Añadir la ruta a <strong>app-routing.module.ts</strong> como ruta raiz:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">NgModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">RouterModule</span><span class="p">,</span> <span class="n">Routes</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">el</span> <span class="n">componente</span> <span class="n">taskpage</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">TasksComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/tasks/tasks.component&#39;</span><span class="p">;</span>

<span class="o">//</span> <span class="n">añadir</span> <span class="n">la</span> <span class="n">ruta</span> <span class="n">como</span> <span class="n">raiz</span><span class="p">:</span>
<span class="n">const</span> <span class="n">routes</span><span class="p">:</span> <span class="n">Routes</span> <span class="o">=</span> <span class="p">[</span>
<span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">component</span><span class="p">:</span> <span class="n">TasksComponent</span><span class="p">}</span>
<span class="p">];</span>

<span class="nd">@NgModule</span><span class="p">({</span>
<span class="n">imports</span><span class="p">:</span> <span class="p">[</span><span class="n">RouterModule</span><span class="o">.</span><span class="n">forRoot</span><span class="p">(</span><span class="n">routes</span><span class="p">)],</span>
<span class="n">exports</span><span class="p">:</span> <span class="p">[</span><span class="n">RouterModule</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">AppRoutingModule</span> <span class="p">{</span> <span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Borrar todo de <strong>app.component.html</strong> excepto la línea del componente ruta:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">router</span><span class="o">-</span><span class="n">outlet</span><span class="o">&gt;&lt;/</span><span class="n">router</span><span class="o">-</span><span class="n">outlet</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Debería de mostrarse a continuación un mensaje <strong>Tasks works!</strong>.</p></li>
</ul>
</section>
<section id="paso-4-crear-componente-navbar">
<h3><a class="toc-backref" href="#id7">Paso 4: Crear componente navbar</a><a class="headerlink" href="#paso-4-crear-componente-navbar" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Descargar el avatar genérico y guardar dentro de la carpeta <strong>assets</strong>: <a class="reference external" href="https://raw.githubusercontent.com/Fullcoder-Learning/-task-learning-frontend/master/src/assets/avatar.png">https://raw.githubusercontent.com/Fullcoder-Learning/-task-learning-frontend/master/src/assets/avatar.png</a></p></li>
<li><p>Crear un nuevo componente para el navbar: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">component</span> <span class="pre">components/navbar</span></code></p></li>
<li><p>Editar <strong>navbar.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">nav</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;navbar navbar-expand-lg navbar-dark bg-dark&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;col-md-11 align-items-start ms-2&quot;</span> <span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;/&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;navbar-brand&quot;</span><span class="o">&gt;</span><span class="n">Task</span> <span class="n">Learn</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">ul</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;navbar-nav mb-2 mb-lg-0 col-md-1 align-items-end me-3&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">li</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;nav-item align-items-end&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;/users&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;nav-link text-center&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">img</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;avatar rounded img-thumbnail img-fluid&quot;</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;./assets/avatar.png&quot;</span> <span class="n">alt</span><span class="o">=</span><span class="s2">&quot;foto&quot;</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;col&quot;</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">small</span><span class="o">&gt;</span><span class="n">Usuario</span><span class="o">&lt;/</span><span class="n">small</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">nav</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Cargar el navbar en <strong>tasks.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;app-navbar&gt;&lt;/app-navbar&gt;

&lt;p&gt;tasks works!&lt;/p&gt;
</pre></div>
</div>
<ul class="simple">
<li><p>La imagen es muy grande, para ello hemos aignado una clase que crearemos en <strong>navbar.component.css</strong>:</p></li>
</ul>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">avatar</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="paso-5-crear-tabla-para-listar-tareas">
<h3><a class="toc-backref" href="#id8">Paso 5: Crear tabla para listar tareas</a><a class="headerlink" href="#paso-5-crear-tabla-para-listar-tareas" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>crear un nuevo componente: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">component</span> <span class="pre">components/taskTable</span></code>.</p></li>
<li><p>Editar el controlador del componente <strong>task-table.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-task-table&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./task-table.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./task-table.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">TaskTableComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
<span class="o">//</span> <span class="n">crear</span> <span class="n">un</span> <span class="n">objeto</span> <span class="n">dummy</span> <span class="n">para</span> <span class="n">llenar</span> <span class="n">la</span> <span class="n">tabla</span><span class="p">:</span>
<span class="n">dummyData</span><span class="p">:</span> <span class="nb">any</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="n">_id</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;Cocinar&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;Cocinar galletas el sábado&quot;</span><span class="p">,</span> <span class="n">date_created</span><span class="p">:</span> <span class="s2">&quot;08/08/2022&quot;</span><span class="p">,</span> <span class="n">is_complete</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">date_finish</span><span class="p">:</span> <span class="s2">&quot;10/08/2022&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="n">_id</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;Preparar proyecto&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;Preparar proyecto para presentar en Septiembre&quot;</span><span class="p">,</span> <span class="n">date_created</span><span class="p">:</span> <span class="s2">&quot;15/08/2022&quot;</span><span class="p">,</span> <span class="n">is_complete</span><span class="p">:</span> <span class="n">false</span><span class="p">},</span>
    <span class="p">{</span><span class="n">_id</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;Estudiar Java&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;Aprender Java para cubrir las especificaciones del proyecto&quot;</span><span class="p">,</span> <span class="n">date_created</span><span class="p">:</span> <span class="s2">&quot;19/08/2022&quot;</span><span class="p">,</span> <span class="n">is_complete</span><span class="p">:</span> <span class="n">false</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Crear tabla y recorrer elementos dummy en <strong>task-table.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;text-center container&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">table</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;table mt-4&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">thead</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">th</span> <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;col&quot;</span><span class="o">&gt;</span><span class="n">Título</span><span class="o">&lt;/</span><span class="n">th</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">th</span> <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;col&quot;</span><span class="o">&gt;</span><span class="n">Descripción</span><span class="o">&lt;/</span><span class="n">th</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">th</span> <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;col&quot;</span><span class="o">&gt;</span><span class="n">Fecha</span> <span class="n">creación</span><span class="o">&lt;/</span><span class="n">th</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">th</span> <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;col&quot;</span><span class="o">&gt;</span><span class="n">Finalizada</span><span class="o">&lt;/</span><span class="n">th</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">th</span> <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;col&quot;</span><span class="o">&gt;</span><span class="n">Fecha</span> <span class="n">Finalización</span><span class="o">&lt;/</span><span class="n">th</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">th</span> <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;col&quot;</span><span class="o">&gt;</span><span class="n">Operaciones</span><span class="o">&lt;/</span><span class="n">th</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">thead</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">tbody</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;text-start&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span> <span class="o">*</span><span class="n">ngFor</span><span class="o">=</span><span class="s2">&quot;let data of dummyData&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">data</span><span class="o">.</span><span class="n">name</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">data</span><span class="o">.</span><span class="n">description</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">data</span><span class="o">.</span><span class="n">date_created</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">span</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">&quot;data.is_complete == true&quot;</span><span class="o">&gt;</span><span class="n">Si</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">span</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">&quot;data.is_complete == false&quot;</span><span class="o">&gt;</span><span class="n">No</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">span</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">&quot;data.date_finish != null&quot;</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">data</span><span class="o">.</span><span class="n">date_finish</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">span</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;text-center&quot;</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">button</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn btn-sm btn-primary me-2&quot;</span><span class="o">&gt;</span><span class="n">finalizar</span> <span class="n">tarea</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">button</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn btn-sm btn-danger me-2&quot;</span><span class="o">&gt;</span><span class="n">Eliminar</span> <span class="n">tarea</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">tbody</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Añadir componente a pagina <strong>tasks.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">app</span><span class="o">-</span><span class="n">navbar</span><span class="o">&gt;&lt;/</span><span class="n">app</span><span class="o">-</span><span class="n">navbar</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">app</span><span class="o">-</span><span class="n">task</span><span class="o">-</span><span class="n">table</span><span class="o">&gt;&lt;/</span><span class="n">app</span><span class="o">-</span><span class="n">task</span><span class="o">-</span><span class="n">table</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="paso-6-crear-modals">
<h3><a class="toc-backref" href="#id9">Paso 6: Crear modals</a><a class="headerlink" href="#paso-6-crear-modals" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Crear un nuevo modal para finalizar tarea: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">component</span> <span class="pre">components/finishTaskModal</span></code>.</p></li>
<li><p>Editar ahora su controlador <strong>finish-task-modal.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">importamos</span> <span class="n">Input</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-finish-task-modal&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./finish-task-modal.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./finish-task-modal.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">FinishTaskModalComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
<span class="o">//</span> <span class="n">cargar</span> <span class="n">datos</span> <span class="k">del</span> <span class="n">padre</span><span class="p">:</span>
<span class="nd">@Input</span><span class="p">()</span> <span class="n">taskId</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="nd">@Input</span><span class="p">()</span> <span class="n">taskName</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

<span class="n">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Preparamos el modal <strong>finish-task-modal.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal fade&quot;</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;finishModal&quot;</span> <span class="n">tabIndex</span><span class="o">=</span><span class="s2">&quot;-1&quot;</span> <span class="n">aria</span><span class="o">-</span><span class="n">labelledby</span><span class="o">=</span><span class="s2">&quot;exampleModalLabel&quot;</span> <span class="n">aria</span><span class="o">-</span><span class="n">hidden</span><span class="o">=</span><span class="s2">&quot;true&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-dialog&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-content&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-header&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">h5</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-title&quot;</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;exampleModalLabel&quot;</span><span class="o">&gt;</span><span class="n">Se</span> <span class="n">va</span> <span class="n">a</span> <span class="n">finalizar</span> <span class="n">la</span> <span class="n">siguiente</span> <span class="n">tarea</span><span class="o">&lt;/</span><span class="n">h5</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">button</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn-close&quot;</span> <span class="n">data</span><span class="o">-</span><span class="n">bs</span><span class="o">-</span><span class="n">dismiss</span><span class="o">=</span><span class="s2">&quot;modal&quot;</span> <span class="n">aria</span><span class="o">-</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Close&quot;</span><span class="o">&gt;&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-body&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">taskId</span><span class="p">}}</span> <span class="o">-</span> <span class="p">{{</span><span class="n">taskName</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-footer&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">button</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn btn-secondary&quot;</span> <span class="n">data</span><span class="o">-</span><span class="n">bs</span><span class="o">-</span><span class="n">dismiss</span><span class="o">=</span><span class="s2">&quot;modal&quot;</span><span class="o">&gt;</span><span class="n">Cancelar</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">button</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn btn-primary&quot;</span> <span class="n">data</span><span class="o">-</span><span class="n">bs</span><span class="o">-</span><span class="n">dismiss</span><span class="o">=</span><span class="s2">&quot;modal&quot;</span><span class="o">&gt;</span><span class="n">Aceptar</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Creamos otro componente para el modal de eliminar tarea: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">component/components</span> <span class="pre">deleteTaskModal</span></code></p></li>
<li><p>Editamos el controlador <strong>delete-task-modal.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">importamos</span> <span class="n">Input</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-delete-task-modal&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./delete-task-modal.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./delete-task-modal.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">DeleteTaskModalComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
<span class="o">//</span> <span class="n">cargar</span> <span class="n">datos</span> <span class="k">del</span> <span class="n">padre</span><span class="p">:</span>
<span class="nd">@Input</span><span class="p">()</span> <span class="n">taskId</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="nd">@Input</span><span class="p">()</span> <span class="n">taskName</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

<span class="n">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Creamos el modal html en <strong>delete-task-modal.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal fade&quot;</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;deleteModal&quot;</span> <span class="n">tabIndex</span><span class="o">=</span><span class="s2">&quot;-1&quot;</span> <span class="n">aria</span><span class="o">-</span><span class="n">labelledby</span><span class="o">=</span><span class="s2">&quot;exampleModalLabel&quot;</span> <span class="n">aria</span><span class="o">-</span><span class="n">hidden</span><span class="o">=</span><span class="s2">&quot;true&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-dialog&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-content&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-header&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">h5</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-title&quot;</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;exampleModalLabel&quot;</span><span class="o">&gt;</span><span class="n">Se</span> <span class="n">va</span> <span class="n">a</span> <span class="n">eliminar</span> <span class="n">la</span> <span class="n">siguiente</span> <span class="n">tarea</span><span class="o">&lt;/</span><span class="n">h5</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">button</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn-close&quot;</span> <span class="n">data</span><span class="o">-</span><span class="n">bs</span><span class="o">-</span><span class="n">dismiss</span><span class="o">=</span><span class="s2">&quot;modal&quot;</span> <span class="n">aria</span><span class="o">-</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Close&quot;</span><span class="o">&gt;&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-body&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">taskId</span><span class="p">}}</span> <span class="o">-</span> <span class="p">{{</span><span class="n">taskName</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-footer&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">button</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn btn-secondary&quot;</span> <span class="n">data</span><span class="o">-</span><span class="n">bs</span><span class="o">-</span><span class="n">dismiss</span><span class="o">=</span><span class="s2">&quot;modal&quot;</span><span class="o">&gt;</span><span class="n">Cancelar</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">button</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn btn-danger&quot;</span> <span class="n">data</span><span class="o">-</span><span class="n">bs</span><span class="o">-</span><span class="n">dismiss</span><span class="o">=</span><span class="s2">&quot;modal&quot;</span><span class="o">&gt;</span><span class="n">Aceptar</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Creamos una función y dos nuevos atributos para mover estos datos en <strong>task-table.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-task-table&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./task-table.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./task-table.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">TaskTableComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
<span class="n">dummyData</span><span class="p">:</span> <span class="nb">any</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="n">_id</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;Cocinar&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;Cocinar galletas el sábado&quot;</span><span class="p">,</span> <span class="n">date_created</span><span class="p">:</span> <span class="s2">&quot;08/08/2022&quot;</span><span class="p">,</span> <span class="n">is_complete</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">date_finish</span><span class="p">:</span> <span class="s2">&quot;10/08/2022&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="n">_id</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;Preparar proyecto&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;Preparar proyecto para presentar en Septiembre&quot;</span><span class="p">,</span> <span class="n">date_created</span><span class="p">:</span> <span class="s2">&quot;15/08/2022&quot;</span><span class="p">,</span> <span class="n">is_complete</span><span class="p">:</span> <span class="n">false</span><span class="p">},</span>
    <span class="p">{</span><span class="n">_id</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;Estudiar Java&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;Aprender Java para cubrir las especificaciones del proyecto&quot;</span><span class="p">,</span> <span class="n">date_created</span><span class="p">:</span> <span class="s2">&quot;19/08/2022&quot;</span><span class="p">,</span> <span class="n">is_complete</span><span class="p">:</span> <span class="n">false</span><span class="p">}</span>
<span class="p">]</span>

<span class="o">//</span> <span class="n">creamos</span> <span class="n">dos</span> <span class="n">nuevos</span> <span class="n">atributos</span><span class="p">:</span>
<span class="n">taskId</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="n">taskName</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

<span class="n">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">creamos</span> <span class="n">una</span> <span class="n">función</span> <span class="n">para</span> <span class="n">asignar</span> <span class="n">los</span> <span class="n">valores</span> <span class="n">recibidos</span><span class="p">:</span>
<span class="n">getTask</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span><span class="n">string</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span><span class="n">string</span><span class="p">):</span> <span class="n">void</span> <span class="p">{</span>
    <span class="n">this</span><span class="o">.</span><span class="n">taskId</span> <span class="o">=</span> <span class="nb">id</span><span class="p">;</span>
    <span class="n">this</span><span class="o">.</span><span class="n">taskName</span> <span class="o">=</span> <span class="n">name</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Cargamos los modals en la tabla y preparamos la acción del botón en <strong>task-table.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;text-center container&quot;&gt;
    &lt;table class=&quot;table mt-4&quot;&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th scope=&quot;col&quot;&gt;Título&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Descripción&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Fecha creación&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Finalizada&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Fecha Finalización&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Operaciones&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody class=&quot;text-start&quot;&gt;
            &lt;tr *ngFor=&quot;let data of dummyData&quot;&gt;
                &lt;td&gt;{{data.name}}&lt;/td&gt;
                &lt;td&gt;{{data.description}}&lt;/td&gt;
                &lt;td&gt;{{data.date_created}}&lt;/td&gt;
                &lt;td&gt;
                    &lt;span *ngIf=&quot;data.is_complete == true&quot;&gt;Si&lt;/span&gt;
                    &lt;span *ngIf=&quot;data.is_complete == false&quot;&gt;No&lt;/span&gt;
                &lt;/td&gt;
                &lt;td&gt;&lt;span *ngIf=&quot;data.date_finish != null&quot;&gt;{{data.date_finish}}&lt;/span&gt;&lt;/td&gt;
                &lt;td class=&quot;text-center&quot;&gt;
                    &lt;!-- Actualizar botón para finalizar y para eliminar tareas: --&gt;
                    &lt;button (click)=&quot;getTask(data._id, data.name)&quot; class=&quot;btn btn-sm btn-primary me-2&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#finishModal&quot;&gt;finalizar tarea&lt;/button&gt;
                    &lt;button (click)=&quot;getTask(data._id, data.name)&quot; class=&quot;btn btn-sm btn-danger me-2&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#deleteModal&quot;&gt;Eliminar tarea&lt;/button&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;app-finish-task-modal [taskId]=&quot;taskId&quot; [taskName]=&quot;taskName&quot; &gt;&lt;/app-finish-task-modal&gt;
    &lt;app-delete-task-modal [taskId]=&quot;taskId&quot; [taskName]=&quot;taskName&quot; &gt;&lt;/app-delete-task-modal&gt;
&lt;/div&gt;
</pre></div>
</div>
</section>
<section id="paso-7-formulario-para-crear-tareas">
<h3><a class="toc-backref" href="#id10">Paso 7: Formulario para crear tareas</a><a class="headerlink" href="#paso-7-formulario-para-crear-tareas" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Lo primero que vamos a hacer es cargar el modulo de formularios en <strong>app.module.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">NgModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">BrowserModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/platform-browser&#39;</span><span class="p">;</span>

<span class="kn">import</span> <span class="p">{</span> <span class="n">AppRoutingModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./app-routing.module&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">AppComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./app.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">TasksComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/tasks/tasks.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">NavbarComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./components/navbar/navbar.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">TaskTableComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./components/task-table/task-table.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">FinishTaskModalComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./components/finish-task-modal/finish-task-modal.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">DeleteTaskModalComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./components/delete-task-modal/delete-task-modal.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">FormsModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/forms&#39;</span><span class="p">;</span> <span class="o">//</span> <span class="n">se</span> <span class="n">importan</span> <span class="n">los</span> <span class="n">forms</span><span class="o">.</span>

<span class="nd">@NgModule</span><span class="p">({</span>
<span class="n">declarations</span><span class="p">:</span> <span class="p">[</span>
    <span class="n">AppComponent</span><span class="p">,</span>
    <span class="n">TasksComponent</span><span class="p">,</span>
    <span class="n">NavbarComponent</span><span class="p">,</span>
    <span class="n">TaskTableComponent</span><span class="p">,</span>
    <span class="n">FinishTaskModalComponent</span><span class="p">,</span>
    <span class="n">DeleteTaskModalComponent</span>
<span class="p">],</span>
<span class="n">imports</span><span class="p">:</span> <span class="p">[</span>
    <span class="n">BrowserModule</span><span class="p">,</span>
    <span class="n">AppRoutingModule</span><span class="p">,</span>
    <span class="n">FormsModule</span> <span class="o">//</span> <span class="n">importar</span> <span class="n">modulo</span> <span class="n">de</span> <span class="n">formularios</span>
<span class="p">],</span>
<span class="n">providers</span><span class="p">:</span> <span class="p">[],</span>
<span class="n">bootstrap</span><span class="p">:</span> <span class="p">[</span><span class="n">AppComponent</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">AppModule</span> <span class="p">{</span> <span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Preparar campos del formulario en <strong>task-table.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-task-table&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./task-table.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./task-table.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">TaskTableComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
<span class="n">dummyData</span><span class="p">:</span> <span class="nb">any</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="n">_id</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;Cocinar&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;Cocinar galletas el sábado&quot;</span><span class="p">,</span> <span class="n">date_created</span><span class="p">:</span> <span class="s2">&quot;08/08/2022&quot;</span><span class="p">,</span> <span class="n">is_complete</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">date_finish</span><span class="p">:</span> <span class="s2">&quot;10/08/2022&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="n">_id</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;Preparar proyecto&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;Preparar proyecto para presentar en Septiembre&quot;</span><span class="p">,</span> <span class="n">date_created</span><span class="p">:</span> <span class="s2">&quot;15/08/2022&quot;</span><span class="p">,</span> <span class="n">is_complete</span><span class="p">:</span> <span class="n">false</span><span class="p">},</span>
    <span class="p">{</span><span class="n">_id</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;Estudiar Java&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;Aprender Java para cubrir las especificaciones del proyecto&quot;</span><span class="p">,</span> <span class="n">date_created</span><span class="p">:</span> <span class="s2">&quot;19/08/2022&quot;</span><span class="p">,</span> <span class="n">is_complete</span><span class="p">:</span> <span class="n">false</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">taskId</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="n">taskName</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

<span class="o">//</span> <span class="n">crear</span> <span class="n">estructura</span> <span class="k">del</span> <span class="n">formulario</span><span class="p">:</span>
<span class="n">task</span><span class="p">:</span> <span class="nb">any</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="n">null</span>
<span class="p">}</span>

<span class="n">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
<span class="p">}</span>

<span class="n">getTask</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span><span class="n">string</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span><span class="n">string</span><span class="p">):</span> <span class="n">void</span> <span class="p">{</span>
    <span class="n">this</span><span class="o">.</span><span class="n">taskId</span> <span class="o">=</span> <span class="nb">id</span><span class="p">;</span>
    <span class="n">this</span><span class="o">.</span><span class="n">taskName</span> <span class="o">=</span> <span class="n">name</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">metodo</span> <span class="n">para</span> <span class="n">crear</span> <span class="n">tarea</span><span class="p">:</span>
<span class="n">createTask</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">agergar</span> <span class="n">elemento</span> <span class="n">al</span> <span class="n">listado</span> <span class="n">dummy</span><span class="p">:</span>
    <span class="n">this</span><span class="o">.</span><span class="n">dummyData</span><span class="o">.</span><span class="n">push</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="n">_id</span><span class="p">:</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="n">this</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="n">this</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
        <span class="n">date_created</span><span class="p">:</span> <span class="n">Date</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span> <span class="n">is_complete</span><span class="p">:</span> <span class="n">false</span>
    <span class="p">}</span>
    <span class="p">)</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Crear formulario en <strong>task-table.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;text-center container&quot;&gt;
    &lt;table class=&quot;table mt-4&quot;&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th scope=&quot;col&quot;&gt;Título&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Descripción&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Fecha creación&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Finalizada&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Fecha Finalización&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Operaciones&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody class=&quot;text-start&quot;&gt;
            &lt;tr *ngFor=&quot;let data of dummyData&quot;&gt;
                &lt;td&gt;{{data.name}}&lt;/td&gt;
                &lt;td&gt;{{data.description}}&lt;/td&gt;
                &lt;td&gt;{{data.date_created}}&lt;/td&gt;
                &lt;td&gt;
                    &lt;span *ngIf=&quot;data.is_complete == true&quot;&gt;Si&lt;/span&gt;
                    &lt;span *ngIf=&quot;data.is_complete == false&quot;&gt;No&lt;/span&gt;
                &lt;/td&gt;
                &lt;td&gt;&lt;span *ngIf=&quot;data.date_finish != null&quot;&gt;{{data.date_finish}}&lt;/span&gt;&lt;/td&gt;
                &lt;td class=&quot;text-center&quot;&gt;
                    &lt;button (click)=&quot;getTask(data._id, data.name)&quot; class=&quot;btn btn-sm btn-primary me-2&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#finishModal&quot;&gt;finalizar tarea&lt;/button&gt;
                    &lt;button (click)=&quot;getTask(data._id, data.name)&quot; class=&quot;btn btn-sm btn-danger me-2&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#deleteModal&quot;&gt;Eliminar tarea&lt;/button&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;!-- Crear nueva fila con el formulario de crear tareas: --&gt;
    &lt;div class=&quot;row text-center align-items-end&quot;&gt;
            &lt;div class=&quot;col-md-5&quot;&gt;&lt;/div&gt;
            &lt;!-- Con ngModel no se usa form sino da fallo --&gt;
            &lt;!-- Cargar los datos del input con ngModel y crear función para procesarlos al hacer click en la lista de arriba --&gt;
            &lt;input [(ngModel)]=&quot;task.name&quot;  class=&quot;col me-2 form-control form-sm&quot; type=&quot;text&quot; placeholder=&quot;Título&quot;/&gt;
            &lt;input [(ngModel)]=&quot;task.description&quot; class=&quot;col me-2 form-control&quot; type=&quot;text&quot; placeholder=&quot;Descripción&quot; /&gt;
            &lt;input (click)=&quot;createTask()&quot; class=&quot;col me-2 form-control btn btn-success&quot; type=&quot;button&quot; value=&quot;Crear tarea&quot; /&gt;
    &lt;/div&gt;
    &lt;app-finish-task-modal [taskId]=&quot;taskId&quot; [taskName]=&quot;taskName&quot; &gt;&lt;/app-finish-task-modal&gt;
    &lt;app-delete-task-modal [taskId]=&quot;taskId&quot; [taskName]=&quot;taskName&quot; &gt;&lt;/app-delete-task-modal&gt;
&lt;/div&gt;
</pre></div>
</div>
</section>
<section id="paso-8-crear-pagina-de-usuarios">
<h3><a class="toc-backref" href="#id11">Paso 8: Crear página de usuarios</a><a class="headerlink" href="#paso-8-crear-pagina-de-usuarios" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Crear nuevo componente para página de usuarios: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">component</span> <span class="pre">pages/users</span></code></p></li>
<li><p>Crear ruta al componente de página en <strong>app-routing.module.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">NgModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">RouterModule</span><span class="p">,</span> <span class="n">Routes</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">TasksComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/tasks/tasks.component&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">el</span> <span class="n">componente</span> <span class="n">taskpage</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span><span class="n">UsersComponent</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/users/users.component&#39;</span><span class="p">;</span>

<span class="o">//</span> <span class="n">añadir</span> <span class="n">la</span> <span class="n">ruta</span> <span class="n">como</span> <span class="n">raiz</span><span class="p">:</span>
<span class="n">const</span> <span class="n">routes</span><span class="p">:</span> <span class="n">Routes</span> <span class="o">=</span> <span class="p">[</span>
<span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">component</span><span class="p">:</span> <span class="n">TasksComponent</span><span class="p">},</span>
<span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="n">component</span><span class="p">:</span> <span class="n">UsersComponent</span><span class="p">}</span>
<span class="p">];</span>

<span class="nd">@NgModule</span><span class="p">({</span>
<span class="n">imports</span><span class="p">:</span> <span class="p">[</span><span class="n">RouterModule</span><span class="o">.</span><span class="n">forRoot</span><span class="p">(</span><span class="n">routes</span><span class="p">)],</span>
<span class="n">exports</span><span class="p">:</span> <span class="p">[</span><span class="n">RouterModule</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">AppRoutingModule</span> <span class="p">{</span> <span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Añadir navbar a <strong>users.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;app-navbar&gt;&lt;/app-navbar&gt;

&lt;p&gt;users works!&lt;/p&gt;
</pre></div>
</div>
</section>
<section id="paso-9-actualizar-enlaces-de-navbar">
<h3><a class="toc-backref" href="#id12">Paso 9: Actualizar enlaces de navbar</a><a class="headerlink" href="#paso-9-actualizar-enlaces-de-navbar" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Cambiar enlaces del navbar por los routerLink de Angular, editamos <strong>navbar.component.html</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;nav class=&quot;navbar navbar-expand-lg navbar-dark bg-dark&quot;&gt;
    &lt;div class=&quot;col-md-11 align-items-start ms-2&quot; &gt;
        &lt;!-- cambiar href por routerLink --&gt;
        &lt;a routerLink=&quot;/&quot; class=&quot;navbar-brand&quot;&gt;Task Learn&lt;/a&gt;
    &lt;/div&gt;

    &lt;ul class=&quot;navbar-nav mb-2 mb-lg-0 col-md-1 align-items-end me-3&quot;&gt;
        &lt;li class=&quot;nav-item align-items-end&quot;&gt;
            &lt;!-- cambiar href por routerLink --&gt;
            &lt;a routerLink=&quot;/users&quot; class=&quot;nav-link text-center&quot;&gt;
                &lt;img class=&quot;avatar rounded img-thumbnail img-fluid&quot; src=&quot;./assets/avatar.png&quot; alt=&quot;foto&quot; /&gt;
                &lt;div class=&quot;col&quot;&gt;
                    &lt;small&gt;Usuario&lt;/small&gt;
                &lt;/div&gt;
            &lt;/a&gt;
        &lt;/li&gt;
    &lt;/ul&gt;
&lt;/nav&gt;
</pre></div>
</div>
<p>De este modo evitamos que se refresque la página.</p>
</section>
<section id="paso-10-crear-componente-para-editar-usuario">
<h3><a class="toc-backref" href="#id13">Paso 10: Crear componente para editar usuario</a><a class="headerlink" href="#paso-10-crear-componente-para-editar-usuario" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Crear un nuevo componente para editar usuarios: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">component</span> <span class="pre">components/userForm</span></code></p></li>
<li><p>Editar la hoja de estilos para ajustar avatar en <strong>user-form.component.css</strong>:</p></li>
</ul>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">avatarEdit</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<ul class="simple">
<li><p>Editar controlador <strong>user-form.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-user-form&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./user-form.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./user-form.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">UserFormComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
<span class="o">//</span> <span class="n">cargar</span> <span class="n">avatar</span><span class="p">:</span>
<span class="n">avatar</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;./assets/avatar.png&quot;</span><span class="p">;</span>

<span class="o">//</span> <span class="n">crear</span> <span class="n">modelo</span> <span class="n">para</span> <span class="n">editar</span> <span class="n">usuario</span><span class="p">:</span>
<span class="n">user</span><span class="p">:</span> <span class="nb">any</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">lastname</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">email</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">password</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">file</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>

<span class="n">constructor</span><span class="p">()</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">crear</span> <span class="n">usuario</span> <span class="n">dummy</span><span class="p">:</span>
    <span class="n">this</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="s2">&quot;Guillermo&quot;</span><span class="p">,</span> <span class="n">lastname</span><span class="p">:</span> <span class="s2">&quot;Granados Gómez&quot;</span><span class="p">,</span> <span class="n">email</span><span class="p">:</span> <span class="s2">&quot;pytonicus@gmail.com&quot;</span><span class="p">}</span>
<span class="p">}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">editar</span> <span class="n">usuario</span><span class="p">:</span>
<span class="n">updateUser</span><span class="p">():</span> <span class="nb">any</span> <span class="p">{</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">user</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Editar pantalla <strong>user-form.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;container mt-4 text-center&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;col&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">h3</span><span class="o">&gt;</span><span class="n">Datos</span> <span class="n">de</span> <span class="n">usuario</span><span class="o">&lt;/</span><span class="n">h3</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">hr</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="p">{{</span><span class="n">avatar</span><span class="p">}}</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;avatarEdit rounded img-thumbnail img-fluid&quot;</span>  <span class="n">alt</span><span class="o">=</span><span class="s2">&quot;Avatar&quot;</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;file&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;form-control mt-3&quot;</span> <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Subir avatar&quot;</span> <span class="p">[(</span><span class="n">ngModel</span><span class="p">)]</span><span class="o">=</span><span class="s2">&quot;user.avatar&quot;</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;form-control mt-3&quot;</span> <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Nombre&quot;</span> <span class="p">[(</span><span class="n">ngModel</span><span class="p">)]</span><span class="o">=</span><span class="s2">&quot;user.name&quot;</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;form-control mt-3&quot;</span> <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Apellidos&quot;</span> <span class="p">[(</span><span class="n">ngModel</span><span class="p">)]</span><span class="o">=</span><span class="s2">&quot;user.lastname&quot;</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;form-control mt-3&quot;</span> <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Email&quot;</span> <span class="p">[(</span><span class="n">ngModel</span><span class="p">)]</span><span class="o">=</span><span class="s2">&quot;user.email&quot;</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;form-control mt-3&quot;</span> <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;nueva contraseña (dejar en blanco para no cambiar)&quot;</span> <span class="p">[(</span><span class="n">ngModel</span><span class="p">)]</span><span class="o">=</span><span class="s2">&quot;user.password&quot;</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn btn-success form-control mt-3&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;Actualizar datos&quot;</span> <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">&quot;updateUser()&quot;</span> <span class="o">/&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Cargar formulario en <strong>users.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">app</span><span class="o">-</span><span class="n">navbar</span><span class="o">&gt;&lt;/</span><span class="n">app</span><span class="o">-</span><span class="n">navbar</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="n">app</span><span class="o">-</span><span class="n">user</span><span class="o">-</span><span class="n">form</span><span class="o">&gt;&lt;/</span><span class="n">app</span><span class="o">-</span><span class="n">user</span><span class="o">-</span><span class="n">form</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="paso-11-crear-pantalla-de-login">
<h3><a class="toc-backref" href="#id14">Paso 11: Crear pantalla de Login</a><a class="headerlink" href="#paso-11-crear-pantalla-de-login" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Crear un nuevo componente de pagina: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">component</span> <span class="pre">pages/login</span></code></p></li>
<li><p>Cargar ruta del controlador en <strong>app-routing.module.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">NgModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">RouterModule</span><span class="p">,</span> <span class="n">Routes</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">TasksComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/tasks/tasks.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span><span class="n">UsersComponent</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/users/users.component&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">el</span> <span class="n">componente</span> <span class="n">login</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span><span class="n">LoginComponent</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/login/login.component&#39;</span><span class="p">;</span>

<span class="o">//</span> <span class="n">añadir</span> <span class="n">la</span> <span class="n">ruta</span> <span class="n">como</span> <span class="n">raiz</span><span class="p">:</span>
<span class="n">const</span> <span class="n">routes</span><span class="p">:</span> <span class="n">Routes</span> <span class="o">=</span> <span class="p">[</span>
<span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">component</span><span class="p">:</span> <span class="n">TasksComponent</span><span class="p">},</span>
<span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="n">component</span><span class="p">:</span> <span class="n">UsersComponent</span><span class="p">},</span>
<span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s1">&#39;login&#39;</span><span class="p">,</span> <span class="n">component</span><span class="p">:</span> <span class="n">LoginComponent</span><span class="p">}</span>
<span class="p">];</span>

<span class="nd">@NgModule</span><span class="p">({</span>
<span class="n">imports</span><span class="p">:</span> <span class="p">[</span><span class="n">RouterModule</span><span class="o">.</span><span class="n">forRoot</span><span class="p">(</span><span class="n">routes</span><span class="p">)],</span>
<span class="n">exports</span><span class="p">:</span> <span class="p">[</span><span class="n">RouterModule</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">AppRoutingModule</span> <span class="p">{</span> <span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Editar hoja de estilo <strong>login.component.css</strong>:</p></li>
</ul>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">html</span><span class="o">,</span><span class="w"></span>
<span class="p">.</span><span class="nc">bodystyle</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">vh</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">.</span><span class="nc">bodystyle</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">align-items</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">padding-top</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">padding-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#f5f5f5</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">.</span><span class="nc">form-signin</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">max-width</span><span class="p">:</span><span class="w"> </span><span class="mi">330</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="kc">auto</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">.</span><span class="nc">form-signin</span><span class="w"> </span><span class="p">.</span><span class="nc">checkbox</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">font-weight</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">.</span><span class="nc">form-signin</span><span class="w"> </span><span class="p">.</span><span class="nc">form-floating</span><span class="p">:</span><span class="nd">focus-within</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">z-index</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">.</span><span class="nc">form-signin</span><span class="w"> </span><span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="s2">&quot;email&quot;</span><span class="o">]</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">border-bottom-right-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">border-bottom-left-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">.</span><span class="nc">form-signin</span><span class="w"> </span><span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="s2">&quot;password&quot;</span><span class="o">]</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">border-top-left-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">border-top-right-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">.</span><span class="nc">cursor</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="kc">transparent</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<ul class="simple">
<li><p>Editar controlador <strong>login.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
    <span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-login&#39;</span><span class="p">,</span>
    <span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./login.component.html&#39;</span><span class="p">,</span>
    <span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./login.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">LoginComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">crear</span> <span class="n">modelo</span> <span class="n">de</span> <span class="n">login</span><span class="p">:</span>
    <span class="n">loginData</span><span class="p">:</span> <span class="nb">any</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">email</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
    <span class="p">}</span>

    <span class="n">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

    <span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="o">//</span> <span class="n">metodo</span> <span class="n">para</span> <span class="n">hacer</span> <span class="n">login</span><span class="p">:</span>
    <span class="n">login</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">loginData</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Editar pantalla <strong>login.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;bodystyle text-center&quot; cz-shortcut-listen=&quot;true&quot;&gt;
    &lt;div class=&quot;form-signin text-center&quot;&gt;
        &lt;h1&gt;Por favor inicia sesión&lt;/h1&gt;
        &lt;div class=&quot;form-floating&quot;&gt;
            &lt;input type=&quot;email&quot; [(ngModel)]=&quot;loginData.email&quot; class=&quot;form-control&quot; id=&quot;floatingInput&quot; placeholder=&quot;name@example.com&quot; /&gt;
            &lt;label htmlFor=&quot;floatingInput&quot;&gt;Email&lt;/label&gt;
        &lt;/div&gt;
        &lt;div class=&quot;form-floating&quot;&gt;
            &lt;input type=&quot;password&quot; [(ngModel)]=&quot;loginData.password&quot; class=&quot;form-control&quot; id=&quot;floatingPassword&quot; placeholder=&quot;Password&quot; /&gt;
            &lt;label htmlFor=&quot;floatingPassword&quot;&gt;Contraseña&lt;/label&gt;
        &lt;/div&gt;
        &lt;div class=&quot;mb-3&quot;&gt;
        &lt;button type=&quot;button&quot; class=&quot;cursor&quot;&gt;Crear usuario&lt;/button&gt;
        &lt;/div&gt;
        &lt;div class=&quot;mb-3&quot;&gt;
        &lt;button type=&quot;button&quot; class=&quot;cursor&quot;&gt;¿has olvidado la contraseña?&lt;/button&gt;
        &lt;/div&gt;
        &lt;button (click)=&quot;login()&quot; class=&quot;w-100 btn btn-lg btn-primary&quot; type=&quot;button&quot;&gt;Iniciar sesión&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;
</pre></div>
</div>
</section>
<section id="paso-12-crear-modal-para-registrar-usuarios">
<h3><a class="toc-backref" href="#id15">Paso 12: Crear modal para registrar usuarios</a><a class="headerlink" href="#paso-12-crear-modal-para-registrar-usuarios" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Crear un nuevo componente para un modal: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">component</span> <span class="pre">components/registerModal</span></code></p></li>
<li><p>Preparar datos para el registro en <strong>register-modal.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-register-modal&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./register-modal.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./register-modal.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">RegisterModalComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
<span class="o">//</span> <span class="n">crear</span> <span class="n">modelo</span> <span class="n">de</span> <span class="n">datos</span><span class="p">:</span>
<span class="n">registerData</span><span class="p">:</span> <span class="nb">any</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">email</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">password</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>

<span class="n">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">metodo</span> <span class="n">para</span> <span class="n">registrar</span> <span class="n">usuario</span><span class="p">:</span>
<span class="n">register</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">registerData</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Ahora editamos la pantalla <strong>register-modal.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal fade&quot;</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;registerUser&quot;</span> <span class="n">tabIndex</span><span class="o">=</span><span class="s2">&quot;-1&quot;</span> <span class="n">aria</span><span class="o">-</span><span class="n">labelledby</span><span class="o">=</span><span class="s2">&quot;exampleModalLabel&quot;</span> <span class="n">aria</span><span class="o">-</span><span class="n">hidden</span><span class="o">=</span><span class="s2">&quot;true&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-dialog&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-content&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-header&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">h5</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-title&quot;</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;exampleModalLabel&quot;</span><span class="o">&gt;</span><span class="n">Registro</span><span class="o">&lt;/</span><span class="n">h5</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">button</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn-close&quot;</span> <span class="n">data</span><span class="o">-</span><span class="n">bs</span><span class="o">-</span><span class="n">dismiss</span><span class="o">=</span><span class="s2">&quot;modal&quot;</span> <span class="n">aria</span><span class="o">-</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Close&quot;</span><span class="o">&gt;&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-body&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;col&quot;</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="nb">input</span> <span class="p">[(</span><span class="n">ngModel</span><span class="p">)]</span><span class="o">=</span><span class="s2">&quot;registerData.email&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;email&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;form-control mt-3&quot;</span> <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Email&quot;</span> <span class="o">/&gt;</span>
                    <span class="o">&lt;</span><span class="nb">input</span> <span class="p">[(</span><span class="n">ngModel</span><span class="p">)]</span><span class="o">=</span><span class="s2">&quot;registerData.password&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;password&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;form-control mt-3&quot;</span> <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Contraseña&quot;</span> <span class="o">/&gt;</span>
                    <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">&quot;register()&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn btn-success form-control mt-3&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;Darse de alta&quot;</span> <span class="n">data</span><span class="o">-</span><span class="n">bs</span><span class="o">-</span><span class="n">dismiss</span><span class="o">=</span><span class="s2">&quot;modal&quot;</span> <span class="o">/&gt;</span>
                <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Cargar el modal en la pagina login y preparar botón <strong>login.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;bodystyle text-center&quot; cz-shortcut-listen=&quot;true&quot;&gt;
    &lt;div class=&quot;form-signin text-center&quot;&gt;
        &lt;h1&gt;Por favor inicia sesión&lt;/h1&gt;
        &lt;div class=&quot;form-floating&quot;&gt;
            &lt;input type=&quot;email&quot; [(ngModel)]=&quot;loginData.email&quot; class=&quot;form-control&quot; id=&quot;floatingInput&quot; placeholder=&quot;name@example.com&quot; /&gt;
            &lt;label htmlFor=&quot;floatingInput&quot;&gt;Email&lt;/label&gt;
        &lt;/div&gt;
        &lt;div class=&quot;form-floating&quot;&gt;
            &lt;input type=&quot;password&quot; [(ngModel)]=&quot;loginData.password&quot; class=&quot;form-control&quot; id=&quot;floatingPassword&quot; placeholder=&quot;Password&quot; /&gt;
            &lt;label htmlFor=&quot;floatingPassword&quot;&gt;Contraseña&lt;/label&gt;
        &lt;/div&gt;
        &lt;div class=&quot;mb-3&quot;&gt;
        &lt;button type=&quot;button&quot; class=&quot;cursor&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#registerUser&quot;  data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#registerUser&quot;&gt;Crear usuario&lt;/button&gt;
        &lt;/div&gt;
        &lt;div class=&quot;mb-3&quot;&gt;
        &lt;button type=&quot;button&quot; class=&quot;cursor&quot;&gt;¿has olvidado la contraseña?&lt;/button&gt;
        &lt;/div&gt;
        &lt;button (click)=&quot;login()&quot; class=&quot;w-100 btn btn-lg btn-primary&quot; type=&quot;button&quot;&gt;Iniciar sesión&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;!-- Cargar componente modal: --&gt;
&lt;app-register-modal&gt;&lt;/app-register-modal&gt;
</pre></div>
</div>
</section>
<section id="paso-13-crear-modal-para-recuperar-contrasena">
<h3><a class="toc-backref" href="#id16">Paso 13: Crear modal para recuperar contraseña</a><a class="headerlink" href="#paso-13-crear-modal-para-recuperar-contrasena" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Crear un componente para el modal: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">component</span> <span class="pre">components/resetModal</span></code></p></li>
<li><p>Editar el controlador <strong>reset-modal.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-reset-modal&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./reset-modal.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./reset-modal.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">ResetModalComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
<span class="o">//</span> <span class="n">crear</span> <span class="n">modelo</span> <span class="n">de</span> <span class="n">datos</span><span class="p">:</span>
<span class="n">restoreData</span><span class="p">:</span> <span class="nb">any</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">email</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>

<span class="n">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">metodo</span> <span class="n">para</span> <span class="n">registrar</span> <span class="n">usuario</span><span class="p">:</span>
<span class="n">restore</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">restoreData</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Ahora editamos la pantalla <strong>reset-modal.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal fade&quot;</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;resetPassword&quot;</span> <span class="n">tabIndex</span><span class="o">=</span><span class="s2">&quot;-1&quot;</span> <span class="n">aria</span><span class="o">-</span><span class="n">labelledby</span><span class="o">=</span><span class="s2">&quot;exampleModalLabel&quot;</span> <span class="n">aria</span><span class="o">-</span><span class="n">hidden</span><span class="o">=</span><span class="s2">&quot;true&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-dialog&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-content&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-header&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">h5</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-title&quot;</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;exampleModalLabel&quot;</span><span class="o">&gt;</span><span class="n">Resetear</span> <span class="n">contraseña</span><span class="o">&lt;/</span><span class="n">h5</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">button</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn-close&quot;</span> <span class="n">data</span><span class="o">-</span><span class="n">bs</span><span class="o">-</span><span class="n">dismiss</span><span class="o">=</span><span class="s2">&quot;modal&quot;</span> <span class="n">aria</span><span class="o">-</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Close&quot;</span><span class="o">&gt;&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;modal-body&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;col text-center&quot;</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;email&quot;</span> <span class="p">[(</span><span class="n">ngModel</span><span class="p">)]</span><span class="o">=</span><span class="s2">&quot;restoreData.email&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;form-control mt-3&quot;</span> <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Email&quot;</span> <span class="o">/&gt;</span>
                    <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">&quot;restore()&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn btn-success form-control mt-3&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;Enviar email&quot;</span> <span class="n">data</span><span class="o">-</span><span class="n">bs</span><span class="o">-</span><span class="n">dismiss</span><span class="o">=</span><span class="s2">&quot;modal&quot;</span> <span class="o">/&gt;</span>
                    <span class="o">&lt;</span><span class="n">small</span><span class="o">&gt;</span><span class="n">Recibirás</span> <span class="n">un</span> <span class="n">email</span> <span class="n">que</span> <span class="n">te</span> <span class="n">llevará</span> <span class="n">donde</span> <span class="n">resetear</span> <span class="n">tu</span> <span class="n">contraseña</span><span class="o">&lt;/</span><span class="n">small</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Cargamos el componente en <strong>login.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;bodystyle text-center&quot; cz-shortcut-listen=&quot;true&quot;&gt;
    &lt;div class=&quot;form-signin text-center&quot;&gt;
        &lt;h1&gt;Por favor inicia sesión&lt;/h1&gt;
        &lt;div class=&quot;form-floating&quot;&gt;
            &lt;input type=&quot;email&quot; [(ngModel)]=&quot;loginData.email&quot; class=&quot;form-control&quot; id=&quot;floatingInput&quot; placeholder=&quot;name@example.com&quot; /&gt;
            &lt;label htmlFor=&quot;floatingInput&quot;&gt;Email&lt;/label&gt;
        &lt;/div&gt;
        &lt;div class=&quot;form-floating&quot;&gt;
            &lt;input type=&quot;password&quot; [(ngModel)]=&quot;loginData.password&quot; class=&quot;form-control&quot; id=&quot;floatingPassword&quot; placeholder=&quot;Password&quot; /&gt;
            &lt;label htmlFor=&quot;floatingPassword&quot;&gt;Contraseña&lt;/label&gt;
        &lt;/div&gt;
        &lt;div class=&quot;mb-3&quot;&gt;
        &lt;button type=&quot;button&quot; class=&quot;cursor&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#registerUser&quot;&gt;Crear usuario&lt;/button&gt;
        &lt;/div&gt;
        &lt;div class=&quot;mb-3&quot;&gt;
        &lt;!-- actualizar el botón para resetear password: --&gt;
        &lt;button type=&quot;button&quot; class=&quot;cursor&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#resetPassword&quot;&gt;¿has olvidado la contraseña?&lt;/button&gt;
        &lt;/div&gt;
        &lt;button (click)=&quot;login()&quot; class=&quot;w-100 btn btn-lg btn-primary&quot; type=&quot;button&quot;&gt;Iniciar sesión&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;app-register-modal&gt;&lt;/app-register-modal&gt;
&lt;!-- Cargar componente modal: --&gt;
&lt;app-reset-modal&gt;&lt;/app-reset-modal&gt;
</pre></div>
</div>
</section>
<section id="paso-14-crear-pagina-para-restablecer-contrasena">
<h3><a class="toc-backref" href="#id17">Paso 14: Crear página para restablecer contraseña</a><a class="headerlink" href="#paso-14-crear-pagina-para-restablecer-contrasena" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Crear una nueva página para reestablecer contraseña: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">component</span> <span class="pre">pages/resetPassword</span></code></p></li>
<li><p>Crear nueva ruta para esta página en <strong>app-routing.module.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">NgModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">RouterModule</span><span class="p">,</span> <span class="n">Routes</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">TasksComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/tasks/tasks.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span><span class="n">UsersComponent</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/users/users.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span><span class="n">LoginComponent</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/login/login.component&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">el</span> <span class="n">componente</span> <span class="n">reset</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">ResetPasswordComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/reset-password/reset-password.component&#39;</span><span class="p">;</span>

<span class="o">//</span> <span class="n">añadir</span> <span class="n">la</span> <span class="n">ruta</span> <span class="n">que</span> <span class="n">recibirá</span> <span class="n">un</span> <span class="nb">id</span> <span class="n">y</span> <span class="n">un</span> <span class="n">token</span> <span class="n">por</span> <span class="n">ruta</span><span class="p">:</span>
<span class="n">const</span> <span class="n">routes</span><span class="p">:</span> <span class="n">Routes</span> <span class="o">=</span> <span class="p">[</span>
<span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">component</span><span class="p">:</span> <span class="n">TasksComponent</span><span class="p">},</span>
<span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="n">component</span><span class="p">:</span> <span class="n">UsersComponent</span><span class="p">},</span>
<span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s1">&#39;login&#39;</span><span class="p">,</span> <span class="n">component</span><span class="p">:</span> <span class="n">LoginComponent</span><span class="p">},</span>
<span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s1">&#39;reset/:id/:token&#39;</span><span class="p">,</span> <span class="n">component</span><span class="p">:</span> <span class="n">ResetPasswordComponent</span><span class="p">}</span>
<span class="p">];</span>

<span class="nd">@NgModule</span><span class="p">({</span>
<span class="n">imports</span><span class="p">:</span> <span class="p">[</span><span class="n">RouterModule</span><span class="o">.</span><span class="n">forRoot</span><span class="p">(</span><span class="n">routes</span><span class="p">)],</span>
<span class="n">exports</span><span class="p">:</span> <span class="p">[</span><span class="n">RouterModule</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">AppRoutingModule</span> <span class="p">{</span> <span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Editar la hoja de estilo de reset password <strong>reset-password.component.css</strong>:</p></li>
</ul>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="nt">html</span><span class="o">,</span><span class="w"></span>
<span class="p">.</span><span class="nc">bodystyle</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">vh</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">.</span><span class="nc">bodystyle</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="k">display</span><span class="p">:</span><span class="w"> </span><span class="kc">flex</span><span class="p">;</span><span class="w"></span>
<span class="k">align-items</span><span class="p">:</span><span class="w"> </span><span class="kc">center</span><span class="p">;</span><span class="w"></span>
<span class="k">padding-top</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="k">padding-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="k">background-color</span><span class="p">:</span><span class="w"> </span><span class="mh">#f5f5f5</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">.</span><span class="nc">form-signin</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span><span class="w"></span>
<span class="k">max-width</span><span class="p">:</span><span class="w"> </span><span class="mi">330</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="k">padding</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="k">margin</span><span class="p">:</span><span class="w"> </span><span class="kc">auto</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">.</span><span class="nc">form-signin</span><span class="w"> </span><span class="p">.</span><span class="nc">checkbox</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="k">font-weight</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">.</span><span class="nc">form-signin</span><span class="w"> </span><span class="p">.</span><span class="nc">form-floating</span><span class="p">:</span><span class="nd">focus-within</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="k">z-index</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">.</span><span class="nc">form-signin</span><span class="w"> </span><span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="s2">&quot;email&quot;</span><span class="o">]</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="k">border-bottom-right-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="k">border-bottom-left-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">.</span><span class="nc">form-signin</span><span class="w"> </span><span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="s2">&quot;password&quot;</span><span class="o">]</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="k">margin-bottom</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="k">border-top-left-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="k">border-top-right-radius</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">.</span><span class="nc">cursor</span><span class="p">{</span><span class="w"></span>
<span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="kc">transparent</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">.</span><span class="nc">alert</span><span class="p">{</span><span class="w"></span>
<span class="k">position</span><span class="p">:</span><span class="w"> </span><span class="kc">fixed</span><span class="p">;</span><span class="w"></span>
<span class="k">top</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<ul class="simple">
<li><p>Editar el controlador <strong>reset-password.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">elementos</span> <span class="k">del</span> <span class="n">router</span> <span class="n">para</span> <span class="n">recuperar</span> <span class="n">parametros</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span><span class="n">ActivatedRoute</span><span class="p">,</span><span class="n">Params</span><span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;@angular/router&quot;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">el</span> <span class="n">router</span> <span class="n">para</span> <span class="n">redirigir</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span><span class="n">Router</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-reset-password&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./reset-password.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./reset-password.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">ResetPasswordComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
<span class="o">//</span> <span class="n">crear</span> <span class="n">modelo</span> <span class="n">de</span> <span class="n">datos</span><span class="p">:</span>
<span class="n">resetData</span><span class="p">:</span> <span class="nb">any</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">newPassword</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">repitePassword</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">crear</span> <span class="n">atributos</span> <span class="n">para</span> <span class="n">recibir</span> <span class="n">parametros</span><span class="p">:</span>
<span class="nb">id</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="n">token</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

<span class="o">//</span> <span class="n">crear</span> <span class="n">un</span> <span class="n">boolean</span> <span class="n">para</span> <span class="n">comprobar</span> <span class="n">la</span> <span class="n">alerta</span> <span class="n">y</span> <span class="n">otro</span> <span class="n">para</span> <span class="n">la</span> <span class="n">contraseña</span><span class="p">:</span>
<span class="n">alert</span><span class="p">:</span> <span class="n">boolean</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
<span class="n">match</span><span class="p">:</span> <span class="n">boolean</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>

<span class="o">//</span> <span class="n">crear</span> <span class="n">objeto</span> <span class="n">para</span> <span class="n">recibir</span> <span class="n">parametros</span> <span class="n">y</span> <span class="n">el</span> <span class="n">router</span><span class="p">:</span>
<span class="n">constructor</span><span class="p">(</span><span class="n">private</span> <span class="n">_activeRouter</span><span class="p">:</span> <span class="n">ActivatedRoute</span><span class="p">,</span> <span class="n">private</span> <span class="n">router</span><span class="p">:</span> <span class="n">Router</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">recuperar</span> <span class="n">parametros</span> <span class="n">recibidos</span> <span class="n">por</span> <span class="n">la</span> <span class="n">url</span><span class="p">:</span>
    <span class="n">this</span><span class="o">.</span><span class="n">_activeRouter</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">subscribe</span><span class="p">((</span><span class="n">params</span><span class="p">:</span> <span class="n">Params</span><span class="p">)</span> <span class="o">=&gt;</span><span class="p">{</span>
    <span class="n">this</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">];</span>
    <span class="n">this</span><span class="o">.</span><span class="n">token</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;token&#39;</span><span class="p">];</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="n">reset</span><span class="p">():</span> <span class="n">void</span><span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">resetData</span><span class="o">.</span><span class="n">newPassword</span> <span class="o">!==</span> <span class="n">this</span><span class="o">.</span><span class="n">resetData</span><span class="o">.</span><span class="n">repitePassword</span><span class="p">){</span>
    <span class="n">this</span><span class="o">.</span><span class="n">match</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">resetData</span><span class="p">);</span>
    <span class="n">this</span><span class="o">.</span><span class="n">match</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
    <span class="n">this</span><span class="o">.</span><span class="n">alert</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
    <span class="n">window</span><span class="o">.</span><span class="n">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="o">//</span> <span class="n">si</span> <span class="n">todo</span> <span class="n">va</span> <span class="n">bien</span> <span class="n">redirigir</span> <span class="n">a</span> <span class="n">login</span><span class="p">:</span>
        <span class="n">this</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">navigate</span><span class="p">([</span><span class="s1">&#39;login&#39;</span><span class="p">]);</span>
    <span class="p">},</span> <span class="mi">3000</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Diseñar pantalla <strong>reset-password.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">div</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">&quot;alert == true; else desaparece&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;alert alert-success&quot;</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;alert&quot;</span><span class="o">&gt;</span>
<span class="n">Contraseña</span> <span class="n">restablecida</span> <span class="n">con</span> <span class="n">éxito</span><span class="o">.</span> <span class="n">Ya</span> <span class="n">puedes</span> <span class="n">iniciar</span> <span class="n">sesión</span><span class="o">.</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">ng</span><span class="o">-</span><span class="n">template</span> <span class="c1">#desaparece&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;alert alert-success fade&quot;</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;alert&quot;</span><span class="o">&gt;</span>
        <span class="n">Contraseña</span> <span class="n">restablecida</span> <span class="n">con</span> <span class="n">éxito</span><span class="o">.</span> <span class="n">Ya</span> <span class="n">puedes</span> <span class="n">iniciar</span> <span class="n">sesión</span><span class="o">.</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">ng</span><span class="o">-</span><span class="n">template</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;bodystyle text-center&quot;</span> <span class="n">cz</span><span class="o">-</span><span class="n">shortcut</span><span class="o">-</span><span class="n">listen</span><span class="o">=</span><span class="s2">&quot;true&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;form-signin text-center&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">Restablecer</span> <span class="n">contraseña</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;form-floating&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;password&quot;</span> <span class="p">[(</span><span class="n">ngModel</span><span class="p">)]</span><span class="o">=</span><span class="s2">&quot;resetData.newPassword&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;form-control&quot;</span> <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Password&quot;</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="n">label</span> <span class="n">htmlFor</span><span class="o">=</span><span class="s2">&quot;floatingPassword&quot;</span><span class="o">&gt;</span><span class="n">Nueva</span> <span class="n">contraseña</span><span class="o">&lt;/</span><span class="n">label</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;form-floating&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;password&quot;</span> <span class="p">[(</span><span class="n">ngModel</span><span class="p">)]</span><span class="o">=</span><span class="s2">&quot;resetData.repitePassword&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;form-control&quot;</span> <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Password&quot;</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="n">label</span> <span class="n">htmlFor</span><span class="o">=</span><span class="s2">&quot;floatingPassword&quot;</span><span class="o">&gt;</span><span class="n">Repetir</span> <span class="n">nueva</span> <span class="n">contraseña</span><span class="o">&lt;/</span><span class="n">label</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">small</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">&quot;match == false&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;text-danger&quot;</span><span class="o">&gt;</span><span class="n">Las</span> <span class="n">contraseñas</span> <span class="n">no</span> <span class="n">coinciden</span><span class="o">&lt;/</span><span class="n">small</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">button</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;w-100 btn btn-lg btn-secondary&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">&quot;reset()&quot;</span><span class="o">&gt;</span><span class="n">Cambiar</span> <span class="n">contraseña</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="paso-15-crear-pagina-error-404">
<h3><a class="toc-backref" href="#id18">Paso 15: Crear pagina error 404</a><a class="headerlink" href="#paso-15-crear-pagina-error-404" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Crear una nueva pagina para error 404: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">component</span> <span class="pre">pages/error404</span></code></p></li>
<li><p>Añadir ruta para error 404 en <strong>app-routing.module.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">NgModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">RouterModule</span><span class="p">,</span> <span class="n">Routes</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">TasksComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/tasks/tasks.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span><span class="n">UsersComponent</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/users/users.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span><span class="n">LoginComponent</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/login/login.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">ResetPasswordComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/reset-password/reset-password.component&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">el</span> <span class="n">componente</span> <span class="n">error404</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span><span class="n">Error404Component</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/error404/error404.component&#39;</span><span class="p">;</span>

<span class="o">//</span> <span class="n">añadir</span> <span class="n">la</span> <span class="n">ruta</span> <span class="n">error</span> <span class="mi">404</span><span class="p">:</span>
<span class="n">const</span> <span class="n">routes</span><span class="p">:</span> <span class="n">Routes</span> <span class="o">=</span> <span class="p">[</span>
<span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">component</span><span class="p">:</span> <span class="n">TasksComponent</span><span class="p">},</span>
<span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="n">component</span><span class="p">:</span> <span class="n">UsersComponent</span><span class="p">},</span>
<span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s1">&#39;login&#39;</span><span class="p">,</span> <span class="n">component</span><span class="p">:</span> <span class="n">LoginComponent</span><span class="p">},</span>
<span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s1">&#39;reset/:id/:token&#39;</span><span class="p">,</span> <span class="n">component</span><span class="p">:</span> <span class="n">ResetPasswordComponent</span><span class="p">},</span>
<span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s1">&#39;**&#39;</span><span class="p">,</span> <span class="n">component</span><span class="p">:</span> <span class="n">Error404Component</span><span class="p">}</span>
<span class="p">];</span>

<span class="nd">@NgModule</span><span class="p">({</span>
<span class="n">imports</span><span class="p">:</span> <span class="p">[</span><span class="n">RouterModule</span><span class="o">.</span><span class="n">forRoot</span><span class="p">(</span><span class="n">routes</span><span class="p">)],</span>
<span class="n">exports</span><span class="p">:</span> <span class="p">[</span><span class="n">RouterModule</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">AppRoutingModule</span> <span class="p">{</span> <span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Editar la hoja de estilos <strong>error404.component.css</strong>:</p></li>
</ul>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">center</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">top</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="kt">vh</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<ul class="simple">
<li><p>Editar pantalla <strong>error404.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;position-relative text-center center&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">h1</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;h1&quot;</span><span class="o">&gt;</span><span class="n">Error</span> <span class="mi">404</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">h2</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;h2&quot;</span><span class="o">&gt;</span><span class="n">La</span> <span class="n">página</span> <span class="n">solicitada</span> <span class="n">no</span> <span class="n">existe</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="paso-16-subir-cambios-a-github">
<h3><a class="toc-backref" href="#id19">Paso 16: Subir cambios a GitHub</a><a class="headerlink" href="#paso-16-subir-cambios-a-github" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Parar ejecución de app.</p></li>
<li><p>Añadir cambios: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">.</span></code></p></li>
<li><p>Realizar un commit: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-am</span> <span class="pre">&quot;Phase</span> <span class="pre">1</span> <span class="pre">complete&quot;</span></code></p></li>
<li><p>Subir cambios a Github con el nombre de la rama actual: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span> <span class="pre">origin</span> <span class="pre">feature/phase-1-task-structure</span></code></p></li>
<li><p>Desde gitHub presionar botón <strong>Compare &amp; pull request</strong>.</p></li>
<li><p>cambiar rama base <strong>master</strong> por <strong>developer</strong> y pulsar <strong>Create pull request</strong></p></li>
<li><p>Pulsar en <strong>Merge pull request</strong> y a continuación en <strong>Confirm merge</strong>.</p></li>
<li><p>Una vez terminado volvemos a local y cambiamos de rama a developer: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">developer</span></code></p></li>
<li><p>Actualizamos rama developer: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span> <span class="pre">origin</span> <span class="pre">developer</span></code></p></li>
</ul>
<p>Y con esto concluye la primera fase del proyecto.</p>
<hr><br></section>
</section>
<section id="fase-2-conectar-con-api-rest">
<h2><a class="toc-backref" href="#id20">Fase 2: Conectar con API Rest</a><a class="headerlink" href="#fase-2-conectar-con-api-rest" title="Enlazar permanentemente con este título">¶</a></h2>
<p>En esta fase se van a crear todas las pantallas de la aplicación.</p>
<section id="paso-1-descargar-api-task-learn">
<h3><a class="toc-backref" href="#id21">Paso 1: Descargar API Task Learn</a><a class="headerlink" href="#paso-1-descargar-api-task-learn" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Clonar cualquier repositorio API Task Learn de Fullcoder Learn, por ejemplo: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/Fullcoder-Learning/task-learning-api.git</span></code></p></li>
<li><p>Acceder al directorio raiz del proyecto y ejectuar <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">start</span></code>.</p></li>
</ul>
</section>
<section id="id1">
<h3><a class="toc-backref" href="#id22">Paso 2: Preparar proyecto</a><a class="headerlink" href="#id1" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Crear rama feature a partir de developer: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">-b</span> <span class="pre">feature/phase-2-connect-to-service</span></code></p></li>
<li><p>Instalar angular-jwt: <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">install</span> <span class="pre">&#64;auth0/angular-jwt</span></code></p></li>
<li><p>Arrancar proyecto desde la raiz: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">serve</span> <span class="pre">--port</span> <span class="pre">3000</span></code></p></li>
</ul>
</section>
<section id="paso-3-crear-servicio-para-registrarse">
<h3><a class="toc-backref" href="#id23">Paso 3: Crear servicio para registrarse</a><a class="headerlink" href="#paso-3-crear-servicio-para-registrarse" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Lo primero que vamos a hacer es importar el modulo <strong>HttpClientModule</strong> en <strong>app.module.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">NgModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">BrowserModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/platform-browser&#39;</span><span class="p">;</span>

<span class="kn">import</span> <span class="p">{</span> <span class="n">AppRoutingModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./app-routing.module&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">AppComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./app.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">TasksComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/tasks/tasks.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">NavbarComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./components/navbar/navbar.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">TaskTableComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./components/task-table/task-table.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">FinishTaskModalComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./components/finish-task-modal/finish-task-modal.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">DeleteTaskModalComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./components/delete-task-modal/delete-task-modal.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">FormsModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/forms&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">UsersComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/users/users.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">UserFormComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./components/user-form/user-form.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">LoginComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/login/login.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">RegisterModalComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./components/register-modal/register-modal.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">ResetModalComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./components/reset-modal/reset-modal.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">ResetPasswordComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/reset-password/reset-password.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">Error404Component</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/error404/error404.component&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">cargamos</span> <span class="n">el</span> <span class="n">httpclientmodule</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span><span class="n">HttpClientModule</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>

<span class="nd">@NgModule</span><span class="p">({</span>
<span class="n">declarations</span><span class="p">:</span> <span class="p">[</span>
    <span class="n">AppComponent</span><span class="p">,</span>
    <span class="n">TasksComponent</span><span class="p">,</span>
    <span class="n">NavbarComponent</span><span class="p">,</span>
    <span class="n">TaskTableComponent</span><span class="p">,</span>
    <span class="n">FinishTaskModalComponent</span><span class="p">,</span>
    <span class="n">DeleteTaskModalComponent</span><span class="p">,</span>
    <span class="n">UsersComponent</span><span class="p">,</span>
    <span class="n">UserFormComponent</span><span class="p">,</span>
    <span class="n">LoginComponent</span><span class="p">,</span>
    <span class="n">RegisterModalComponent</span><span class="p">,</span>
    <span class="n">ResetModalComponent</span><span class="p">,</span>
    <span class="n">ResetPasswordComponent</span><span class="p">,</span>
    <span class="n">Error404Component</span>
<span class="p">],</span>
<span class="n">imports</span><span class="p">:</span> <span class="p">[</span>
    <span class="n">BrowserModule</span><span class="p">,</span>
    <span class="n">AppRoutingModule</span><span class="p">,</span>
    <span class="n">FormsModule</span><span class="p">,</span>
    <span class="n">HttpClientModule</span> <span class="o">//</span> <span class="n">importar</span> <span class="n">modulo</span> <span class="n">para</span> <span class="n">peticiones</span> <span class="n">rest</span>
<span class="p">],</span>
<span class="n">providers</span><span class="p">:</span> <span class="p">[],</span>
<span class="n">bootstrap</span><span class="p">:</span> <span class="p">[</span><span class="n">AppComponent</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">AppModule</span> <span class="p">{</span> <span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Crear nueva carpeta en <strong>app</strong> llamada <strong>interfaces</strong>.</p></li>
<li><p>Crear un nuevo interface: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">interface</span> <span class="pre">interfaces/User</span></code>.</p></li>
<li><p>Editar el interface <strong>user.interface.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">interface</span> <span class="n">User</span> <span class="p">{</span>
    <span class="n">email</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
    <span class="n">password</span><span class="p">:</span> <span class="n">string</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Crear nuevo servicio de usuarios: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">service</span> <span class="pre">services/user</span></code></p></li>
<li><p>Editamos el servicio <strong>user.service.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>import { Injectable } from &#39;@angular/core&#39;;
// importar httpclient:
import {HttpClient} from &#39;@angular/common/http&#39;;
// importar map de rxjs:
import {map} from &#39;rxjs/operators&#39;;
// importar el interface:
import { User } from &#39;../interfaces/user&#39;;

@Injectable({
providedIn: &#39;root&#39;
})
export class UserService {
// definir la ruta base:
url_base: string = &#39;http://localhost:5000/api&#39;;

// crear objeto httpclient:
constructor(private http: HttpClient) { }

// crear el metodo de registro:
registerUser(user: User): any {
    // devolver el resultado de la operación:
    return this.http.post(`${this.url_base}/register`, user)
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}
}
</pre></div>
</div>
<ul class="simple">
<li><p>Editar el controlador <strong>register-modal.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">el</span> <span class="n">servicio</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">UserService</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/services/user.service&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importamos</span> <span class="n">el</span> <span class="n">interface</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">User</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/interfaces/user&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-register-modal&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./register-modal.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./register-modal.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">RegisterModalComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>

<span class="o">//</span> <span class="n">crear</span> <span class="n">atributos</span> <span class="n">para</span> <span class="n">controlar</span> <span class="n">alertas</span><span class="p">:</span>
<span class="n">registerAlertSuccess</span><span class="p">:</span> <span class="n">boolean</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
<span class="n">registerAlertError</span><span class="p">:</span> <span class="n">boolean</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
<span class="n">alertMessage</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

<span class="o">//</span> <span class="n">se</span> <span class="n">le</span> <span class="n">pasa</span> <span class="n">el</span> <span class="n">tipo</span> <span class="n">de</span> <span class="n">dato</span> <span class="n">interface</span><span class="p">:</span>
<span class="n">registerData</span><span class="p">:</span> <span class="n">User</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">email</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">password</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">crear</span> <span class="n">objeto</span> <span class="k">del</span> <span class="n">servicio</span><span class="p">:</span>
<span class="n">constructor</span><span class="p">(</span><span class="n">private</span> <span class="n">userService</span><span class="p">:</span> <span class="n">UserService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">modificar</span> <span class="n">el</span> <span class="n">metodo</span> <span class="n">register</span> <span class="n">para</span> <span class="n">enviar</span> <span class="n">datos</span> <span class="n">via</span> <span class="n">post</span><span class="p">:</span>
<span class="n">register</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">subscribirse</span> <span class="n">al</span> <span class="n">servicio</span> <span class="n">y</span> <span class="n">enviar</span> <span class="n">datos</span><span class="p">:</span>
    <span class="n">this</span><span class="o">.</span><span class="n">userService</span><span class="o">.</span><span class="n">registerUser</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">registerData</span><span class="p">)</span>
    <span class="o">//</span> <span class="n">recibe</span> <span class="n">una</span> <span class="n">respuesta</span> <span class="n">de</span> <span class="n">tipo</span> <span class="n">user</span> <span class="n">al</span> <span class="n">subscribirse</span><span class="p">:</span>
    <span class="o">.</span><span class="n">subscribe</span><span class="p">((</span><span class="n">res</span><span class="p">:</span> <span class="n">User</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">devolver</span> <span class="n">una</span> <span class="n">respuesta</span> <span class="n">por</span> <span class="n">consola</span> <span class="n">para</span> <span class="n">hacer</span> <span class="n">pruebas</span><span class="p">:</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">res</span><span class="p">);</span>
        <span class="o">//</span> <span class="n">cambiar</span> <span class="n">estado</span> <span class="k">del</span> <span class="n">alert</span><span class="p">:</span>
        <span class="n">this</span><span class="o">.</span><span class="n">registerAlertSuccess</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">cambiar</span> <span class="n">mensaje</span> <span class="n">de</span> <span class="n">alerta</span><span class="p">:</span>
        <span class="n">this</span><span class="o">.</span><span class="n">alertMessage</span> <span class="o">=</span> <span class="s2">&quot;Usuario registrado con éxito, ya puedes iniciar sesión.&quot;</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">establecer</span> <span class="n">un</span> <span class="n">temporizador</span> <span class="n">para</span> <span class="n">quitar</span> <span class="n">mensaje</span> <span class="n">alerta</span><span class="p">:</span>
        <span class="n">window</span><span class="o">.</span><span class="n">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">registerAlertSuccess</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
        <span class="p">},</span> <span class="mi">3000</span><span class="p">);</span>
    <span class="p">},</span> <span class="p">(</span><span class="n">err</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">err</span><span class="p">);</span>
        <span class="n">this</span><span class="o">.</span><span class="n">registerAlertError</span> <span class="o">=</span>  <span class="n">true</span><span class="p">;</span>
        <span class="n">this</span><span class="o">.</span><span class="n">alertMessage</span> <span class="o">=</span> <span class="s2">&quot;Error al crear usuario, el usuario ya existe.&quot;</span><span class="p">;</span>
        <span class="n">window</span><span class="o">.</span><span class="n">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">registerAlertError</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
        <span class="p">},</span> <span class="mi">3000</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Crear un componente alerta para reutilizar las alertas: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">component</span> <span class="pre">components/alert</span></code></p></li>
<li><p>Editamos el controlador <strong>alert.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">cargar</span> <span class="n">el</span> <span class="n">modulo</span> <span class="n">Input</span> <span class="n">para</span> <span class="n">recibir</span> <span class="n">parametros</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-alert&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./alert.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./alert.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">AlertComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
<span class="o">//</span> <span class="n">cargar</span> <span class="n">valores</span> <span class="n">recibidos</span><span class="p">:</span>
<span class="nd">@Input</span><span class="p">()</span> <span class="n">alertSuccess</span><span class="p">:</span> <span class="n">boolean</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
<span class="nd">@Input</span><span class="p">()</span> <span class="n">alertError</span><span class="p">:</span> <span class="n">boolean</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
<span class="o">//</span> <span class="n">crear</span> <span class="n">mensaje</span> <span class="n">de</span> <span class="n">alerta</span><span class="p">:</span>
<span class="nd">@Input</span><span class="p">()</span> <span class="n">alertMessage</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

<span class="n">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>

<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Editamos la hoja de alertas <strong>alert.component.css</strong>:</p></li>
</ul>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">alert-group</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">position</span><span class="p">:</span><span class="kc">fixed</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">top</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<ul class="simple">
<li><p>Ahora creamos la pantalla de alerta <strong>alert.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;alert-group&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">&quot;alertSuccess == true; else success&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;alert alert-success alert-group&quot;</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;alert&quot;</span><span class="o">&gt;</span>
        <span class="p">{{</span><span class="n">alertMessage</span><span class="p">}}</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">ng</span><span class="o">-</span><span class="n">template</span> <span class="c1">#success&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;alert alert-success fade alert-group&quot;</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;alert&quot;</span><span class="o">&gt;</span>
            <span class="p">{{</span><span class="n">alertMessage</span><span class="p">}}</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">ng</span><span class="o">-</span><span class="n">template</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">&quot;alertError == true; else error&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;alert alert-danger alert-group&quot;</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;alert&quot;</span><span class="o">&gt;</span>
        <span class="p">{{</span><span class="n">alertMessage</span><span class="p">}}</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">ng</span><span class="o">-</span><span class="n">template</span> <span class="c1">#error&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;alert alert-danger fade alert-group&quot;</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;alert&quot;</span><span class="o">&gt;</span>
            <span class="p">{{</span><span class="n">alertMessage</span><span class="p">}}</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">ng</span><span class="o">-</span><span class="n">template</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Cargamos el alert en el modal <strong>register-modal.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;modal fade&quot; id=&quot;registerUser&quot; tabIndex=&quot;-1&quot; aria-labelledby=&quot;exampleModalLabel&quot; aria-hidden=&quot;true&quot;&gt;
    &lt;div class=&quot;modal-dialog&quot;&gt;
        &lt;div class=&quot;modal-content&quot;&gt;
        &lt;div class=&quot;modal-header&quot;&gt;
            &lt;h5 class=&quot;modal-title&quot; id=&quot;exampleModalLabel&quot;&gt;Registro&lt;/h5&gt;
            &lt;button type=&quot;button&quot; class=&quot;btn-close&quot; data-bs-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;&lt;/button&gt;
        &lt;/div&gt;
        &lt;div class=&quot;modal-body&quot;&gt;
            &lt;div class=&quot;row&quot;&gt;
                &lt;div class=&quot;col&quot;&gt;
                    &lt;input [(ngModel)]=&quot;registerData.email&quot; type=&quot;email&quot; class=&quot;form-control mt-3&quot; placeholder=&quot;Email&quot; /&gt;
                    &lt;input [(ngModel)]=&quot;registerData.password&quot; type=&quot;password&quot; class=&quot;form-control mt-3&quot; placeholder=&quot;Contraseña&quot; /&gt;
                    &lt;input type=&quot;button&quot; (click)=&quot;register()&quot; class=&quot;btn btn-success form-control mt-3&quot; value=&quot;Darse de alta&quot; data-bs-dismiss=&quot;modal&quot; /&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;!-- añadimos la alerta debajo del modal: --&gt;
&lt;app-alert [alertSuccess]=&quot;registerAlertSuccess&quot; [alertError]=&quot;registerAlertError&quot; [alertMessage]=&quot;alertMessage&quot;&gt;&lt;/app-alert&gt;
</pre></div>
</div>
</section>
<section id="paso-4-crear-servicio-para-iniciar-sesion">
<h3><a class="toc-backref" href="#id24">Paso 4: Crear servicio para iniciar sesión</a><a class="headerlink" href="#paso-4-crear-servicio-para-iniciar-sesion" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Crear nuevo servicio en <strong>user.service.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>import { Injectable } from &#39;@angular/core&#39;;
import {HttpClient} from &#39;@angular/common/http&#39;;
import {map} from &#39;rxjs/operators&#39;;
// importar el interface:
import { User } from &#39;../interfaces/user&#39;;

@Injectable({
providedIn: &#39;root&#39;
})
export class UserService {
url_base: string = &#39;http://localhost:5000/api&#39;;

constructor(private http: HttpClient) { }

registerUser(user: User): any {
    return this.http.post(`${this.url_base}/register`, user)
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}

// crear servicio para iniciar sesión:
loginUser(user: User): any {
    return this.http.post(`${this.url_base}/login`, user)
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}
}
</pre></div>
</div>
<ul class="simple">
<li><p>A continuación editamos el controlador <strong>login.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">servicio</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">UserService</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/services/user.service&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">el</span> <span class="n">router</span> <span class="n">para</span> <span class="n">redirigir</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span><span class="n">Router</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">el</span> <span class="n">interace</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">User</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/interfaces/user&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-login&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./login.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./login.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>

<span class="n">export</span> <span class="k">class</span> <span class="nc">LoginComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
<span class="o">//</span> <span class="n">crear</span> <span class="n">atributo</span> <span class="n">para</span> <span class="n">lanzar</span> <span class="n">alerta</span> <span class="n">error</span> <span class="n">y</span> <span class="n">el</span> <span class="n">mensaje</span> <span class="n">ya</span> <span class="n">creado</span><span class="p">:</span>
<span class="n">loginAlertError</span><span class="p">:</span> <span class="n">boolean</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
<span class="n">loginMessageError</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;Error al iniciar sesión. Usuario o contraseña incorrectos.&quot;</span><span class="p">;</span>

<span class="o">//</span> <span class="n">Cargar</span> <span class="n">interface</span> <span class="n">en</span> <span class="n">el</span> <span class="n">tipo</span> <span class="n">de</span> <span class="n">dato</span><span class="p">:</span>
<span class="n">loginData</span><span class="p">:</span> <span class="n">User</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">email</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">password</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">crear</span> <span class="n">objeto</span> <span class="n">con</span> <span class="n">el</span> <span class="n">servicio</span> <span class="n">y</span> <span class="n">el</span> <span class="n">router</span> <span class="n">para</span> <span class="n">redireccionar</span><span class="p">:</span>
<span class="n">constructor</span><span class="p">(</span><span class="n">private</span> <span class="n">userService</span><span class="p">:</span> <span class="n">UserService</span><span class="p">,</span> <span class="n">private</span> <span class="n">router</span><span class="p">:</span> <span class="n">Router</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span><span class="p">{</span>
<span class="p">}</span>

<span class="n">login</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">subscribirse</span> <span class="n">al</span> <span class="n">servicio</span><span class="p">:</span>
    <span class="n">this</span><span class="o">.</span><span class="n">userService</span><span class="o">.</span><span class="n">loginUser</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">loginData</span><span class="p">)</span>
    <span class="o">.</span><span class="n">subscribe</span><span class="p">((</span><span class="n">res</span><span class="p">:</span> <span class="nb">any</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">res</span><span class="p">);</span>
        <span class="o">//</span> <span class="n">guardamos</span> <span class="n">el</span> <span class="n">token</span> <span class="n">si</span> <span class="n">existe</span> <span class="n">y</span> <span class="n">redirigimos</span> <span class="n">a</span> <span class="n">la</span> <span class="n">lista</span> <span class="n">de</span> <span class="n">tareas</span><span class="p">:</span>
        <span class="k">if</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">token</span><span class="p">){</span>
        <span class="n">localStorage</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">token</span><span class="p">);</span>
        <span class="n">this</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">navigate</span><span class="p">([</span><span class="s1">&#39;/&#39;</span><span class="p">]);</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="o">//</span> <span class="n">en</span> <span class="n">caso</span> <span class="n">contrario</span> <span class="n">lanzamos</span> <span class="n">alerta</span> <span class="n">de</span> <span class="n">error</span><span class="p">:</span>
        <span class="n">this</span><span class="o">.</span><span class="n">loginAlertError</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
        <span class="n">window</span><span class="o">.</span><span class="n">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span>
            <span class="n">this</span><span class="o">.</span><span class="n">loginAlertError</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
        <span class="p">},</span> <span class="mi">3000</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">},</span> <span class="p">(</span><span class="n">err</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">err</span><span class="p">);</span>
        <span class="n">this</span><span class="o">.</span><span class="n">loginAlertError</span> <span class="o">=</span>  <span class="n">true</span><span class="p">;</span>
        <span class="n">window</span><span class="o">.</span><span class="n">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">loginAlertError</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
        <span class="p">},</span> <span class="mi">3000</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Y finalmente añadimos un alert a la pantalla <strong>login.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;bodystyle text-center&quot; cz-shortcut-listen=&quot;true&quot;&gt;
    &lt;div class=&quot;form-signin text-center&quot;&gt;
        &lt;h1&gt;Por favor inicia sesión&lt;/h1&gt;
        &lt;div class=&quot;form-floating&quot;&gt;
            &lt;input type=&quot;email&quot; [(ngModel)]=&quot;loginData.email&quot; class=&quot;form-control&quot; id=&quot;floatingInput&quot; placeholder=&quot;name@example.com&quot; /&gt;
            &lt;label htmlFor=&quot;floatingInput&quot;&gt;Email&lt;/label&gt;
        &lt;/div&gt;
        &lt;div class=&quot;form-floating&quot;&gt;
            &lt;input type=&quot;password&quot; [(ngModel)]=&quot;loginData.password&quot; class=&quot;form-control&quot; id=&quot;floatingPassword&quot; placeholder=&quot;Password&quot; /&gt;
            &lt;label htmlFor=&quot;floatingPassword&quot;&gt;Contraseña&lt;/label&gt;
        &lt;/div&gt;
        &lt;div class=&quot;mb-3&quot;&gt;
        &lt;button type=&quot;button&quot; class=&quot;cursor&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#registerUser&quot;&gt;Crear usuario&lt;/button&gt;
        &lt;/div&gt;
        &lt;div class=&quot;mb-3&quot;&gt;
        &lt;!-- actualizar el botón para resetear password: --&gt;
        &lt;button type=&quot;button&quot; class=&quot;cursor&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#resetPassword&quot;&gt;¿has olvidado la contraseña?&lt;/button&gt;
        &lt;/div&gt;
        &lt;button (click)=&quot;login()&quot; class=&quot;w-100 btn btn-lg btn-primary&quot; type=&quot;button&quot;&gt;Iniciar sesión&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;app-register-modal&gt;&lt;/app-register-modal&gt;
&lt;app-reset-modal&gt;&lt;/app-reset-modal&gt;ç
&lt;!-- Añadir el componente alert: --&gt;
&lt;app-alert [alertError]=&quot;loginAlertError&quot; [alertMessage]=&quot;loginMessageError&quot;&gt;&lt;/app-alert&gt;
</pre></div>
</div>
</section>
<section id="paso-5-securizar-rutas">
<h3><a class="toc-backref" href="#id25">Paso 5: Securizar rutas</a><a class="headerlink" href="#paso-5-securizar-rutas" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Creamos un nuevo guardián: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">guard</span> <span class="pre">jwtAuth</span></code>.</p></li>
<li><p>Editamos el servicio del componente <strong>jwt-auth.guard.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">Injectable</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">ActivatedRouteSnapshot</span><span class="p">,</span> <span class="n">CanActivate</span><span class="p">,</span> <span class="n">RouterStateSnapshot</span><span class="p">,</span> <span class="n">UrlTree</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">Observable</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">angular</span><span class="o">-</span><span class="n">jwt</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">JwtHelperService</span> <span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;@auth0/angular-jwt&quot;</span><span class="p">;</span>

<span class="nd">@Injectable</span><span class="p">({</span>
<span class="n">providedIn</span><span class="p">:</span> <span class="s1">&#39;root&#39;</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">JwtAuthGuard</span> <span class="n">implements</span> <span class="n">CanActivate</span> <span class="p">{</span>
<span class="o">//</span> <span class="n">recuperar</span> <span class="n">token</span><span class="p">:</span>
<span class="n">token</span><span class="p">:</span> <span class="nb">any</span> <span class="o">=</span> <span class="n">localStorage</span><span class="o">.</span><span class="n">getItem</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">);</span>
<span class="o">//</span> <span class="n">crear</span> <span class="n">el</span> <span class="n">objeto</span> <span class="n">helper</span> <span class="n">de</span> <span class="n">jwt</span><span class="p">:</span>
<span class="n">jwtHelperService</span><span class="p">:</span> <span class="n">JwtHelperService</span> <span class="o">=</span> <span class="n">new</span> <span class="n">JwtHelperService</span><span class="p">;</span>


<span class="n">canActivate</span><span class="p">(</span>
    <span class="n">route</span><span class="p">:</span> <span class="n">ActivatedRouteSnapshot</span><span class="p">,</span>
    <span class="n">state</span><span class="p">:</span> <span class="n">RouterStateSnapshot</span><span class="p">):</span> <span class="n">Observable</span><span class="o">&lt;</span><span class="n">boolean</span> <span class="o">|</span> <span class="n">UrlTree</span><span class="o">&gt;</span> <span class="o">|</span> <span class="n">Promise</span><span class="o">&lt;</span><span class="n">boolean</span> <span class="o">|</span> <span class="n">UrlTree</span><span class="o">&gt;</span> <span class="o">|</span> <span class="n">boolean</span> <span class="o">|</span> <span class="n">UrlTree</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">validar</span> <span class="n">si</span> <span class="n">hay</span> <span class="n">token</span> <span class="n">y</span> <span class="n">comprobar</span> <span class="n">que</span> <span class="n">no</span> <span class="n">esta</span> <span class="n">caducado</span><span class="p">:</span>
    <span class="k">if</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">token</span><span class="p">){</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">token</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">jwtHelperService</span><span class="o">.</span><span class="n">isTokenExpired</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">token</span><span class="p">)){</span>
        <span class="o">//</span> <span class="n">para</span> <span class="n">evitar</span> <span class="n">problemas</span> <span class="n">de</span> <span class="n">inicio</span> <span class="n">de</span> <span class="n">sesión</span> <span class="n">refrescamos</span> <span class="n">la</span> <span class="n">pantalla</span> <span class="n">con</span> <span class="n">una</span> <span class="n">redirección</span> <span class="n">total</span><span class="p">:</span>
        <span class="n">window</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">href</span> <span class="o">=</span> <span class="s1">&#39;/login&#39;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;No has iniciado sesión&quot;</span><span class="p">);</span>
        <span class="o">//</span> <span class="n">para</span> <span class="n">evitar</span> <span class="n">problemas</span> <span class="n">de</span> <span class="n">inicio</span> <span class="n">de</span> <span class="n">sesión</span> <span class="n">refrescamos</span> <span class="n">la</span> <span class="n">pantalla</span> <span class="n">con</span> <span class="n">una</span> <span class="n">redirección</span> <span class="n">total</span><span class="p">:</span>
        <span class="n">window</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">href</span> <span class="o">=</span> <span class="s1">&#39;/login&#39;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="o">//</span> <span class="n">este</span> <span class="k">return</span> <span class="n">lo</span> <span class="n">tenemos</span> <span class="n">que</span> <span class="n">dejar</span> <span class="n">ahí</span><span class="p">,</span> <span class="n">si</span> <span class="n">no</span> <span class="n">se</span> <span class="n">cumple</span> <span class="n">todo</span> <span class="n">lo</span> <span class="n">anterior</span> <span class="n">nos</span> <span class="n">dará</span> <span class="n">acceso</span> <span class="n">a</span> <span class="n">la</span> <span class="n">ruta</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Aseguramos las rutas que queramos en <strong>app-routing.module.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">NgModule</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">RouterModule</span><span class="p">,</span> <span class="n">Routes</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">TasksComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/tasks/tasks.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span><span class="n">UsersComponent</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/users/users.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span><span class="n">LoginComponent</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/login/login.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">ResetPasswordComponent</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/reset-password/reset-password.component&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span><span class="n">Error404Component</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./pages/error404/error404.component&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">el</span> <span class="n">guard</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">JwtAuthGuard</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./jwt-auth.guard&#39;</span><span class="p">;</span>


<span class="n">const</span> <span class="n">routes</span><span class="p">:</span> <span class="n">Routes</span> <span class="o">=</span> <span class="p">[</span>
<span class="o">//</span> <span class="n">securizar</span> <span class="n">las</span> <span class="n">rutas</span> <span class="n">con</span> <span class="n">canActivate</span> <span class="n">y</span> <span class="n">el</span> <span class="n">jwtAuthGuard</span><span class="p">:</span>
<span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">canActivate</span><span class="p">:</span> <span class="p">[</span><span class="n">JwtAuthGuard</span><span class="p">],</span> <span class="n">component</span><span class="p">:</span> <span class="n">TasksComponent</span><span class="p">},</span>
<span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="n">canActivate</span><span class="p">:</span> <span class="p">[</span><span class="n">JwtAuthGuard</span><span class="p">],</span> <span class="n">component</span><span class="p">:</span> <span class="n">UsersComponent</span><span class="p">},</span>
<span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s1">&#39;login&#39;</span><span class="p">,</span> <span class="n">component</span><span class="p">:</span> <span class="n">LoginComponent</span><span class="p">},</span>
<span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s1">&#39;reset/:id/:token&#39;</span><span class="p">,</span> <span class="n">component</span><span class="p">:</span> <span class="n">ResetPasswordComponent</span><span class="p">},</span>
<span class="p">{</span><span class="n">path</span><span class="p">:</span> <span class="s1">&#39;**&#39;</span><span class="p">,</span> <span class="n">component</span><span class="p">:</span> <span class="n">Error404Component</span><span class="p">}</span>
<span class="p">];</span>

<span class="nd">@NgModule</span><span class="p">({</span>
<span class="n">imports</span><span class="p">:</span> <span class="p">[</span><span class="n">RouterModule</span><span class="o">.</span><span class="n">forRoot</span><span class="p">(</span><span class="n">routes</span><span class="p">)],</span>
<span class="n">exports</span><span class="p">:</span> <span class="p">[</span><span class="n">RouterModule</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">AppRoutingModule</span> <span class="p">{</span> <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="paso-6-enviar-email-para-restablecer-contrasena">
<h3><a class="toc-backref" href="#id26">paso 6: Enviar email para restablecer contraseña</a><a class="headerlink" href="#paso-6-enviar-email-para-restablecer-contrasena" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Añadir un nuevo interface en <strong>user.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">interface</span> <span class="n">User</span> <span class="p">{</span>
    <span class="n">email</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
    <span class="n">password</span><span class="p">:</span> <span class="n">string</span>
<span class="p">}</span>
<span class="o">//</span> <span class="n">crear</span> <span class="n">nueva</span> <span class="n">interface</span> <span class="n">para</span> <span class="n">controlar</span> <span class="n">el</span> <span class="n">dato</span> <span class="n">email</span><span class="p">:</span>
<span class="n">export</span> <span class="n">interface</span> <span class="n">ResetEmail</span> <span class="p">{</span>
    <span class="n">email</span><span class="p">:</span> <span class="n">string</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Crear servicio en <strong>user.service.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>import { Injectable } from &#39;@angular/core&#39;;
import {HttpClient} from &#39;@angular/common/http&#39;;
import {map} from &#39;rxjs/operators&#39;;
// importar el interface:
import { User, ResetEmail } from &#39;../interfaces/user&#39;;

@Injectable({
providedIn: &#39;root&#39;
})
export class UserService {
url_base: string = &#39;http://localhost:5000/api&#39;;

constructor(private http: HttpClient) { }

registerUser(user: User): any {
    return this.http.post(`${this.url_base}/register`, user)
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}

loginUser(user: User): any {
    return this.http.post(`${this.url_base}/login`, user)
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}

// crear petición para recuperar contraseña:
forgotUser(email: ResetEmail): any {
    return this.http.post(`${this.url_base}/forgot`, email)
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}

}
</pre></div>
</div>
<ul class="simple">
<li><p>Modificar controlador de <strong>reset-modal.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">el</span> <span class="n">user</span> <span class="n">service</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">UserService</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/services/user.service&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">el</span> <span class="n">interface</span> <span class="n">email</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">ResetEmail</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/interfaces/user&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-reset-modal&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./reset-modal.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./reset-modal.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">ResetModalComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
<span class="o">//</span> <span class="n">crear</span> <span class="n">atributos</span> <span class="n">para</span> <span class="n">alertas</span><span class="p">:</span>
<span class="n">restoreAlertSuccess</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
<span class="n">restoreAlertError</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
<span class="n">restoreAlertMessage</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

<span class="n">restoreData</span><span class="p">:</span> <span class="n">ResetEmail</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">email</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">crear</span> <span class="n">objeto</span> <span class="n">de</span> <span class="n">user</span> <span class="n">service</span><span class="p">:</span>
<span class="n">constructor</span><span class="p">(</span><span class="n">private</span> <span class="n">userService</span><span class="p">:</span> <span class="n">UserService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">metodo</span> <span class="n">para</span> <span class="n">registrar</span> <span class="n">usuario</span><span class="p">:</span>
<span class="n">restore</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">subscribirse</span> <span class="n">al</span> <span class="n">servicio</span> <span class="n">y</span> <span class="n">enviar</span> <span class="n">datos</span><span class="p">:</span>
    <span class="n">this</span><span class="o">.</span><span class="n">userService</span><span class="o">.</span><span class="n">forgotUser</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">restoreData</span><span class="p">)</span>
    <span class="o">.</span><span class="n">subscribe</span><span class="p">((</span><span class="n">res</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">devolver</span> <span class="n">una</span> <span class="n">respuesta</span> <span class="n">por</span> <span class="n">consola</span> <span class="n">para</span> <span class="n">hacer</span> <span class="n">pruebas</span><span class="p">:</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">res</span><span class="p">);</span>
        <span class="o">//</span> <span class="n">cambiar</span> <span class="n">estado</span> <span class="k">del</span> <span class="n">alert</span><span class="p">:</span>
        <span class="n">this</span><span class="o">.</span><span class="n">restoreAlertSuccess</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">cambiar</span> <span class="n">mensaje</span> <span class="n">de</span> <span class="n">alerta</span><span class="p">:</span>
        <span class="n">this</span><span class="o">.</span><span class="n">restoreAlertMessage</span> <span class="o">=</span> <span class="s2">&quot;Se ha enviado un correo con un enlace para reestablecer contraseña. Revisa tu bandeja por favor.&quot;</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">establecer</span> <span class="n">un</span> <span class="n">temporizador</span> <span class="n">para</span> <span class="n">quitar</span> <span class="n">mensaje</span> <span class="n">alerta</span><span class="p">:</span>
        <span class="n">window</span><span class="o">.</span><span class="n">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">restoreAlertSuccess</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
        <span class="p">},</span> <span class="mi">3000</span><span class="p">);</span>
    <span class="p">},</span> <span class="p">(</span><span class="n">err</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">err</span><span class="p">);</span>
        <span class="n">this</span><span class="o">.</span><span class="n">restoreAlertError</span> <span class="o">=</span>  <span class="n">true</span><span class="p">;</span>
        <span class="n">this</span><span class="o">.</span><span class="n">restoreAlertMessage</span> <span class="o">=</span> <span class="s2">&quot;Error, el email no existe.&quot;</span><span class="p">;</span>
        <span class="n">window</span><span class="o">.</span><span class="n">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">restoreAlertError</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
        <span class="p">},</span> <span class="mi">3000</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Cargar el componente alert en pantalla <strong>reset-modal.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;modal fade&quot; id=&quot;resetPassword&quot; tabIndex=&quot;-1&quot; aria-labelledby=&quot;exampleModalLabel&quot; aria-hidden=&quot;true&quot;&gt;
    &lt;div class=&quot;modal-dialog&quot;&gt;
        &lt;div class=&quot;modal-content&quot;&gt;
        &lt;div class=&quot;modal-header&quot;&gt;
            &lt;h5 class=&quot;modal-title&quot; id=&quot;exampleModalLabel&quot;&gt;Resetear contraseña&lt;/h5&gt;
            &lt;button type=&quot;button&quot; class=&quot;btn-close&quot; data-bs-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;&lt;/button&gt;
        &lt;/div&gt;
        &lt;div class=&quot;modal-body&quot;&gt;
            &lt;div class=&quot;row&quot;&gt;
                &lt;div class=&quot;col text-center&quot;&gt;
                    &lt;input type=&quot;email&quot; [(ngModel)]=&quot;restoreData.email&quot; class=&quot;form-control mt-3&quot; placeholder=&quot;Email&quot; /&gt;
                    &lt;input type=&quot;button&quot; (click)=&quot;restore()&quot; class=&quot;btn btn-success form-control mt-3&quot; value=&quot;Enviar email&quot; data-bs-dismiss=&quot;modal&quot; /&gt;
                    &lt;small&gt;Recibirás un email que te llevará donde resetear tu contraseña&lt;/small&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;!-- Cargar el componente alert --&gt;
&lt;app-alert [alertSuccess]=&quot;restoreAlertSuccess&quot; [alertError]=&quot;restoreAlertError&quot; [alertMessage]=&quot;restoreAlertMessage&quot;&gt;&lt;/app-alert&gt;
</pre></div>
</div>
</section>
<section id="paso-7-reestablecer-contrasena">
<h3><a class="toc-backref" href="#id27">Paso 7: Reestablecer contraseña</a><a class="headerlink" href="#paso-7-reestablecer-contrasena" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Crear un nuevo interface en <strong>user.interface.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">interface</span> <span class="n">User</span> <span class="p">{</span>
    <span class="n">email</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
    <span class="n">password</span><span class="p">:</span> <span class="n">string</span>
<span class="p">}</span>
<span class="n">export</span> <span class="n">interface</span> <span class="n">ResetEmail</span> <span class="p">{</span>
    <span class="n">email</span><span class="p">:</span> <span class="n">string</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">crear</span> <span class="n">un</span> <span class="n">nuevo</span> <span class="n">interface</span> <span class="n">para</span> <span class="n">validar</span> <span class="n">el</span> <span class="n">tipo</span> <span class="n">de</span> <span class="n">dato</span> <span class="k">del</span> <span class="n">form</span><span class="p">:</span>
<span class="n">export</span> <span class="n">interface</span> <span class="n">ResetPassword</span> <span class="p">{</span>
    <span class="n">newPassword</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">repitePassword</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Crear un nuevo servicio en <strong>user.service.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>import { Injectable } from &#39;@angular/core&#39;;
import {HttpClient} from &#39;@angular/common/http&#39;;
import {map} from &#39;rxjs/operators&#39;;
// importar el interface:
import { User, ResetEmail, ResetPassword } from &#39;../interfaces/user&#39;;

@Injectable({
providedIn: &#39;root&#39;
})
export class UserService {
url_base: string = &#39;http://localhost:5000/api&#39;;

constructor(private http: HttpClient) { }

registerUser(user: User): any {
    return this.http.post(`${this.url_base}/register`, user)
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}

loginUser(user: User): any {
    return this.http.post(`${this.url_base}/login`, user)
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}

forgotUser(email: ResetEmail): any {
    return this.http.post(`${this.url_base}/forgot`, email)
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}

// crear peticion para enviar nueva contraseña:
resetPassword(password: ResetPassword, id: string, token: string): any {
    return this.http.put(`${this.url_base}/reset/${id}/${token}`, password)
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}

}
</pre></div>
</div>
<ul class="simple">
<li><p>Implementar servicio en <strong>reset-password.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span><span class="n">ActivatedRoute</span><span class="p">,</span><span class="n">Params</span><span class="p">}</span> <span class="kn">from</span> <span class="s2">&quot;@angular/router&quot;</span>
<span class="kn">import</span> <span class="p">{</span><span class="n">Router</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/router&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">user</span> <span class="n">service</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">UserService</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/services/user.service&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">la</span> <span class="n">interface</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">ResetPassword</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/interfaces/user&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-reset-password&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./reset-password.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./reset-password.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">ResetPasswordComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
<span class="n">resetData</span><span class="p">:</span> <span class="n">ResetPassword</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">newPassword</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">repitePassword</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>

<span class="nb">id</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="n">token</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

<span class="o">//</span> <span class="n">vamos</span> <span class="n">a</span> <span class="n">cambiar</span> <span class="n">el</span> <span class="n">alert</span> <span class="n">de</span> <span class="n">este</span> <span class="n">componente</span> <span class="n">por</span> <span class="n">el</span> <span class="n">alert</span> <span class="n">externo</span><span class="p">:</span>
<span class="n">resetAlertSuccess</span><span class="p">:</span> <span class="n">boolean</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
<span class="n">resetAlertError</span><span class="p">:</span> <span class="n">boolean</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
<span class="n">resetAlertMessage</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

<span class="n">match</span><span class="p">:</span> <span class="n">boolean</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>

<span class="o">//</span> <span class="n">construir</span> <span class="n">objeto</span> <span class="k">del</span> <span class="n">user</span> <span class="n">service</span><span class="p">:</span>
<span class="n">constructor</span><span class="p">(</span><span class="n">private</span> <span class="n">_activeRouter</span><span class="p">:</span> <span class="n">ActivatedRoute</span><span class="p">,</span> <span class="n">private</span> <span class="n">router</span><span class="p">:</span> <span class="n">Router</span><span class="p">,</span> <span class="n">private</span> <span class="n">userService</span><span class="p">:</span> <span class="n">UserService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
    <span class="n">this</span><span class="o">.</span><span class="n">_activeRouter</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">subscribe</span><span class="p">((</span><span class="n">params</span><span class="p">:</span> <span class="n">Params</span><span class="p">)</span> <span class="o">=&gt;</span><span class="p">{</span>
    <span class="n">this</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">];</span>
    <span class="n">this</span><span class="o">.</span><span class="n">token</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="s1">&#39;token&#39;</span><span class="p">];</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="n">reset</span><span class="p">():</span> <span class="n">void</span><span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">resetData</span><span class="o">.</span><span class="n">newPassword</span> <span class="o">!==</span> <span class="n">this</span><span class="o">.</span><span class="n">resetData</span><span class="o">.</span><span class="n">repitePassword</span><span class="p">){</span>
    <span class="n">this</span><span class="o">.</span><span class="n">match</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
    <span class="o">//</span> <span class="n">subscribirse</span> <span class="n">al</span> <span class="n">servicio</span> <span class="n">y</span> <span class="n">enviar</span> <span class="n">datos</span><span class="p">:</span>
    <span class="n">this</span><span class="o">.</span><span class="n">userService</span><span class="o">.</span><span class="n">resetPassword</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">resetData</span><span class="p">,</span> <span class="n">this</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">this</span><span class="o">.</span><span class="n">token</span><span class="p">)</span>
    <span class="o">.</span><span class="n">subscribe</span><span class="p">((</span><span class="n">res</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">devolver</span> <span class="n">una</span> <span class="n">respuesta</span> <span class="n">por</span> <span class="n">consola</span> <span class="n">para</span> <span class="n">hacer</span> <span class="n">pruebas</span><span class="p">:</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">res</span><span class="p">);</span>
        <span class="o">//</span> <span class="n">cambiar</span> <span class="n">estado</span> <span class="k">del</span> <span class="n">alert</span><span class="p">:</span>
        <span class="n">this</span><span class="o">.</span><span class="n">resetAlertSuccess</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>

        <span class="n">this</span><span class="o">.</span><span class="n">match</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">cambiar</span> <span class="n">mensaje</span> <span class="n">de</span> <span class="n">alerta</span><span class="p">:</span>
        <span class="n">this</span><span class="o">.</span><span class="n">resetAlertMessage</span> <span class="o">=</span> <span class="s2">&quot;La contraseña ha sido reestablecida con éxito. Ya puedes iniciar sesión&quot;</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">establecer</span> <span class="n">un</span> <span class="n">temporizador</span> <span class="n">para</span> <span class="n">quitar</span> <span class="n">mensaje</span> <span class="n">alerta</span><span class="p">:</span>
        <span class="n">window</span><span class="o">.</span><span class="n">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">resetAlertSuccess</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
        <span class="n">this</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">navigate</span><span class="p">([</span><span class="s1">&#39;login&#39;</span><span class="p">]);</span>
        <span class="p">},</span> <span class="mi">3000</span><span class="p">);</span>
    <span class="p">},</span> <span class="p">(</span><span class="n">err</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">err</span><span class="p">);</span>
        <span class="n">this</span><span class="o">.</span><span class="n">resetAlertError</span> <span class="o">=</span>  <span class="n">true</span><span class="p">;</span>
        <span class="n">this</span><span class="o">.</span><span class="n">resetAlertMessage</span> <span class="o">=</span> <span class="s2">&quot;Error, el email no existe.&quot;</span><span class="p">;</span>
        <span class="n">window</span><span class="o">.</span><span class="n">setTimeout</span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">resetAlertError</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
        <span class="p">},</span> <span class="mi">3000</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="n">this</span><span class="o">.</span><span class="n">match</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Cambiar el alert de <strong>reset-password.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;bodystyle text-center&quot; cz-shortcut-listen=&quot;true&quot;&gt;
    &lt;div class=&quot;form-signin text-center&quot;&gt;
        &lt;h1&gt;Restablecer contraseña&lt;/h1&gt;
        &lt;div class=&quot;form-floating&quot;&gt;
            &lt;input type=&quot;password&quot; [(ngModel)]=&quot;resetData.newPassword&quot; class=&quot;form-control&quot; placeholder=&quot;Password&quot; /&gt;
            &lt;label htmlFor=&quot;floatingPassword&quot;&gt;Nueva contraseña&lt;/label&gt;
        &lt;/div&gt;
        &lt;div class=&quot;form-floating&quot;&gt;
            &lt;input type=&quot;password&quot; [(ngModel)]=&quot;resetData.repitePassword&quot; class=&quot;form-control&quot; placeholder=&quot;Password&quot; /&gt;
            &lt;label htmlFor=&quot;floatingPassword&quot;&gt;Repetir nueva contraseña&lt;/label&gt;
            &lt;small *ngIf=&quot;match == false&quot; class=&quot;text-danger&quot;&gt;Las contraseñas no coinciden&lt;/small&gt;
        &lt;/div&gt;
        &lt;button class=&quot;w-100 btn btn-lg btn-secondary&quot; type=&quot;button&quot; (click)=&quot;reset()&quot;&gt;Cambiar contraseña&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;!-- cargamos el alert externo: --&gt;
&lt;app-alert [alertSuccess]=&quot;resetAlertSuccess&quot; [alertError]=&quot;resetAlertError&quot; [alertMessage]=&quot;resetAlertMessage&quot;&gt;&lt;/app-alert&gt;
</pre></div>
</div>
</section>
<section id="paso-8-crear-tareas">
<h3><a class="toc-backref" href="#id28">Paso 8: Crear tareas</a><a class="headerlink" href="#paso-8-crear-tareas" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Crear nueva interfaz para tareas: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">interface</span> <span class="pre">interfaces/task</span></code></p></li>
<li><p>Editamos la interface <strong>task.interface.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">interface</span> <span class="n">Task</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="n">string</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>crear un nuevo componente servicio para tareas: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">service</span> <span class="pre">services/task</span></code></p></li>
<li><p>Editar servicio <strong>task.service.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>import { Injectable } from &#39;@angular/core&#39;;
// cargar httpclient, HttpHeaders y map:
import {HttpClient, HttpHeaders} from &#39;@angular/common/http&#39;;
import {map} from &#39;rxjs/operators&#39;;
// importar el guard:
import { JwtAuthGuard } from &#39;../jwt-auth.guard&#39;;
// importar interface:
import { Task } from &#39;../interfaces/task&#39;;

@Injectable({
providedIn: &#39;root&#39;
})
export class TaskService {
// cargamos la url base:
url_base: string = &#39;http://localhost:5000/api&#39;;
// recuperamos el token del usuario:
token: any = localStorage.getItem(&#39;token&#39;);
// creamos la cabecera con el token:
headers: any = new HttpHeaders({
    &#39;Content-Type&#39;: &#39;application/json&#39;,
    &#39;Authorization&#39;: this.token
});
// lo pasamos al objeto options:
options: any = {headers: this.headers}

// cargar servicio Httpclient y guard:
constructor(private http: HttpClient, private jwtAuthGuard: JwtAuthGuard) {
}

// crear tarea, le pasamos primero la tarea y luego las opciones con la cabecera de autorización:
postTask(task: Task): any {
    return this.http.post(`${this.url_base}/tasks`, task, this.options)
    .pipe(map((data: object) =&gt; {
        return data;
    }));
}
}
</pre></div>
</div>
<ul class="simple">
<li><p>Editar el controlador para crear tareas en <strong>task-table.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">el</span> <span class="n">servicio</span> <span class="n">task</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">TaskService</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/services/task.service&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">interface</span> <span class="n">task</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">Task</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/interfaces/task&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-task-table&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./task-table.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./task-table.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">TaskTableComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
<span class="n">dummyData</span><span class="p">:</span> <span class="nb">any</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="n">_id</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;Cocinar&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;Cocinar galletas el sábado&quot;</span><span class="p">,</span> <span class="n">date_created</span><span class="p">:</span> <span class="s2">&quot;08/08/2022&quot;</span><span class="p">,</span> <span class="n">is_complete</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">date_finish</span><span class="p">:</span> <span class="s2">&quot;10/08/2022&quot;</span><span class="p">},</span>
    <span class="p">{</span><span class="n">_id</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;Preparar proyecto&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;Preparar proyecto para presentar en Septiembre&quot;</span><span class="p">,</span> <span class="n">date_created</span><span class="p">:</span> <span class="s2">&quot;15/08/2022&quot;</span><span class="p">,</span> <span class="n">is_complete</span><span class="p">:</span> <span class="n">false</span><span class="p">},</span>
    <span class="p">{</span><span class="n">_id</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;Estudiar Java&quot;</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;Aprender Java para cubrir las especificaciones del proyecto&quot;</span><span class="p">,</span> <span class="n">date_created</span><span class="p">:</span> <span class="s2">&quot;19/08/2022&quot;</span><span class="p">,</span> <span class="n">is_complete</span><span class="p">:</span> <span class="n">false</span><span class="p">}</span>
<span class="p">]</span>

<span class="n">taskId</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="n">taskName</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

<span class="n">task</span><span class="p">:</span> <span class="n">Task</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">crear</span> <span class="n">objeto</span> <span class="k">del</span> <span class="n">servicio</span> <span class="n">task</span><span class="p">:</span>
<span class="n">constructor</span><span class="p">(</span><span class="n">private</span> <span class="n">taskService</span><span class="p">:</span> <span class="n">TaskService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
<span class="p">}</span>

<span class="n">getTask</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span><span class="n">string</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span><span class="n">string</span><span class="p">):</span> <span class="n">void</span> <span class="p">{</span>
    <span class="n">this</span><span class="o">.</span><span class="n">taskId</span> <span class="o">=</span> <span class="nb">id</span><span class="p">;</span>
    <span class="n">this</span><span class="o">.</span><span class="n">taskName</span> <span class="o">=</span> <span class="n">name</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">createTask</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">subscribirse</span> <span class="n">al</span> <span class="n">servicio</span><span class="p">:</span>
    <span class="n">this</span><span class="o">.</span><span class="n">taskService</span><span class="o">.</span><span class="n">postTask</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">task</span><span class="p">)</span>
    <span class="o">.</span><span class="n">subscribe</span><span class="p">((</span><span class="n">res</span><span class="p">:</span> <span class="nb">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">devolver</span> <span class="n">una</span> <span class="n">respuesta</span> <span class="n">por</span> <span class="n">consola</span> <span class="n">para</span> <span class="n">hacer</span> <span class="n">pruebas</span><span class="p">:</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">res</span><span class="p">);</span>
        <span class="o">//</span> <span class="n">agergar</span> <span class="n">elemento</span> <span class="n">al</span> <span class="n">listado</span> <span class="n">dummy</span><span class="p">:</span>
        <span class="n">this</span><span class="o">.</span><span class="n">dummyData</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">task</span><span class="p">);</span>
    <span class="p">},</span> <span class="p">(</span><span class="n">err</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="paso-9-recuperar-tareas">
<h3><a class="toc-backref" href="#id29">Paso 9: Recuperar Tareas</a><a class="headerlink" href="#paso-9-recuperar-tareas" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Editamos el interface <strong>task.interface.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export interface Task {
    name: string,
    description: string
}

// añadir un nuevo interface con todos los datos de la tarea:
export interface TaskData {
    _id: string,
    is_complete: boolean,
    date_finish: Date,
    date_created: Date,
    name: string,
    description: string,
    owner?: string
}
</pre></div>
</div>
<ul class="simple">
<li><p>Creamos un nuevo servicio en <strong>task.service.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>import { Injectable } from &#39;@angular/core&#39;;
import {HttpClient, HttpHeaders} from &#39;@angular/common/http&#39;;
import {map} from &#39;rxjs/operators&#39;;
import { JwtAuthGuard } from &#39;../jwt-auth.guard&#39;;
import { Task } from &#39;../interfaces/task&#39;;

@Injectable({
providedIn: &#39;root&#39;
})
export class TaskService {

url_base: string = &#39;http://localhost:5000/api&#39;;

token: any = localStorage.getItem(&#39;token&#39;);

headers: any = new HttpHeaders({
    &#39;Content-Type&#39;: &#39;application/json&#39;,
    &#39;Authorization&#39;: this.token
});

options: any = {headers: this.headers}

constructor(private http: HttpClient, private jwtAuthGuard: JwtAuthGuard) {
}

postTask(task: Task): any {
    return this.http.post(`${this.url_base}/tasks`, task, this.options)
    .pipe(map((data: object) =&gt; {
        return data;
    }));
}

// creamos el nuevo servicio get:
getTasks(): any {
    return this.http.get(`${this.url_base}/tasks`, this.options)
    .pipe(map((data: object) =&gt; {
        return data;
    }));
}
}
</pre></div>
</div>
<ul class="simple">
<li><p>Editamos el controlador <strong>task-table.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">TaskService</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/services/task.service&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">interface</span> <span class="n">taskdata</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">Task</span><span class="p">,</span> <span class="n">TaskData</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/interfaces/task&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-task-table&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./task-table.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./task-table.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">TaskTableComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
<span class="o">//</span> <span class="n">reemplazamos</span> <span class="n">la</span> <span class="n">dummyData</span> <span class="n">por</span> <span class="n">un</span> <span class="n">array</span> <span class="n">de</span> <span class="n">tareas</span><span class="p">:</span>
<span class="n">tasks</span><span class="p">:</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">TaskData</span><span class="o">&gt;</span> <span class="o">=</span>  <span class="p">[]</span>

<span class="n">taskId</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="n">taskName</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

<span class="n">task</span><span class="p">:</span> <span class="n">Task</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>

<span class="n">constructor</span><span class="p">(</span><span class="n">private</span> <span class="n">taskService</span><span class="p">:</span> <span class="n">TaskService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">aqui</span> <span class="n">en</span> <span class="n">oninit</span> <span class="n">llamamos</span> <span class="n">al</span> <span class="n">servicio</span> <span class="n">para</span> <span class="n">recuperar</span> <span class="n">tareas</span><span class="p">:</span>
    <span class="n">this</span><span class="o">.</span><span class="n">taskService</span><span class="o">.</span><span class="n">getTasks</span><span class="p">()</span><span class="o">.</span><span class="n">subscribe</span><span class="p">((</span><span class="n">res</span><span class="p">:</span><span class="n">Array</span><span class="o">&lt;</span><span class="n">TaskData</span><span class="o">&gt;</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
    <span class="n">this</span><span class="o">.</span><span class="n">tasks</span> <span class="o">=</span> <span class="n">res</span><span class="p">;</span>
    <span class="p">},</span> <span class="p">(</span><span class="n">err</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="n">getTask</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span><span class="n">string</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span><span class="n">string</span><span class="p">):</span> <span class="n">void</span> <span class="p">{</span>
    <span class="n">this</span><span class="o">.</span><span class="n">taskId</span> <span class="o">=</span> <span class="nb">id</span><span class="p">;</span>
    <span class="n">this</span><span class="o">.</span><span class="n">taskName</span> <span class="o">=</span> <span class="n">name</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">createTask</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
    <span class="n">this</span><span class="o">.</span><span class="n">taskService</span><span class="o">.</span><span class="n">postTask</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">task</span><span class="p">)</span>
    <span class="o">.</span><span class="n">subscribe</span><span class="p">((</span><span class="n">res</span><span class="p">:</span> <span class="nb">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">res</span><span class="p">);</span>
        <span class="o">//</span> <span class="n">actualizar</span> <span class="n">el</span> <span class="n">lugar</span> <span class="n">donde</span> <span class="n">agregar</span> <span class="n">tarea</span><span class="p">:</span>
        <span class="n">this</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">task</span><span class="p">);</span>
    <span class="p">},</span> <span class="p">(</span><span class="n">err</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Ahora hay que modificar la plantilla <strong>task-table.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;text-center container&quot;&gt;
    &lt;table class=&quot;table mt-4&quot;&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th scope=&quot;col&quot;&gt;Título&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Descripción&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Fecha creación&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Finalizada&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Fecha Finalización&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Operaciones&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody class=&quot;text-start&quot;&gt;
            &lt;!-- reemplazamos el array dummy por el de tasks --&gt;
            &lt;tr *ngFor=&quot;let data of tasks&quot;&gt;
                &lt;td&gt;{{data.name}}&lt;/td&gt;
                &lt;td&gt;{{data.description}}&lt;/td&gt;
                &lt;!-- normalizamos las fechas de creación y finalización con un pipe llamado date --&gt;
                &lt;td&gt;{{data.date_created|date: &#39;dd/MM/yyyy hh:mm&#39;}}&lt;/td&gt;
                &lt;td&gt;
                    &lt;span *ngIf=&quot;data.is_complete == true&quot;&gt;Si&lt;/span&gt;
                    &lt;span *ngIf=&quot;data.is_complete == false&quot;&gt;No&lt;/span&gt;
                &lt;/td&gt;
                &lt;td&gt;&lt;span *ngIf=&quot;data.date_finish != null&quot;&gt;{{data.date_finish|date: &#39;dd/MM/yyyy hh:mm&#39;}}&lt;/span&gt;&lt;/td&gt;
                &lt;td class=&quot;text-center&quot;&gt;
                    &lt;button (click)=&quot;getTask(data._id, data.name)&quot; class=&quot;btn btn-sm btn-primary me-2&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#finishModal&quot;&gt;finalizar tarea&lt;/button&gt;
                    &lt;button (click)=&quot;getTask(data._id, data.name)&quot; class=&quot;btn btn-sm btn-danger me-2&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#deleteModal&quot;&gt;Eliminar tarea&lt;/button&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;div class=&quot;row text-center align-items-end&quot;&gt;
            &lt;div class=&quot;col-md-5&quot;&gt;&lt;/div&gt;
            &lt;input [(ngModel)]=&quot;task.name&quot;  class=&quot;col me-2 form-control form-sm&quot; type=&quot;text&quot; placeholder=&quot;Título&quot;/&gt;
            &lt;input [(ngModel)]=&quot;task.description&quot; class=&quot;col me-2 form-control&quot; type=&quot;text&quot; placeholder=&quot;Descripción&quot; /&gt;
            &lt;input (click)=&quot;createTask()&quot; class=&quot;col me-2 form-control btn btn-success&quot; type=&quot;button&quot; value=&quot;Crear tarea&quot; /&gt;
    &lt;/div&gt;
    &lt;app-finish-task-modal [taskId]=&quot;taskId&quot; [taskName]=&quot;taskName&quot; &gt;&lt;/app-finish-task-modal&gt;
    &lt;app-delete-task-modal [taskId]=&quot;taskId&quot; [taskName]=&quot;taskName&quot; &gt;&lt;/app-delete-task-modal&gt;
&lt;/div&gt;
</pre></div>
</div>
</section>
<section id="paso-10-finalizar-tarea">
<h3><a class="toc-backref" href="#id30">Paso 10: Finalizar tarea</a><a class="headerlink" href="#paso-10-finalizar-tarea" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Crear servicio en <strong>task.service.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>import { Injectable } from &#39;@angular/core&#39;;
import {HttpClient, HttpHeaders} from &#39;@angular/common/http&#39;;
import {map} from &#39;rxjs/operators&#39;;
import { JwtAuthGuard } from &#39;../jwt-auth.guard&#39;;
import { Task } from &#39;../interfaces/task&#39;;

@Injectable({
providedIn: &#39;root&#39;
})
export class TaskService {

url_base: string = &#39;http://localhost:5000/api&#39;;

token: any = localStorage.getItem(&#39;token&#39;);

headers: any = new HttpHeaders({
    &#39;Content-Type&#39;: &#39;application/json&#39;,
    &#39;Authorization&#39;: this.token
});

options: any = {headers: this.headers}

constructor(private http: HttpClient, private jwtAuthGuard: JwtAuthGuard) {
}

postTask(task: Task): any {
    return this.http.post(`${this.url_base}/tasks`, task, this.options)
    .pipe(map((data: object) =&gt; {
        return data;
    }));
}

getTasks(): any {
    return this.http.get(`${this.url_base}/tasks`, this.options)
    .pipe(map((data: object) =&gt; {
        return data;
    }));
}

// servicio para finalizar tareas:
finishTask(id:string): any {
    return this.http.patch(`${this.url_base}/tasks/${id}`, null, this.options)
    .pipe(map((data: object) =&gt; {
        return data;
    }));
}

}
</pre></div>
</div>
<ul class="simple">
<li><p>Modificamos el controlador <strong>finish-task-modal.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">importamos</span> <span class="n">el</span> <span class="n">output</span> <span class="n">para</span> <span class="n">emitir</span> <span class="n">un</span> <span class="n">atributo</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">EventEmitter</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">OnInit</span><span class="p">,</span> <span class="n">Output</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importamos</span> <span class="n">el</span> <span class="n">servicio</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">TaskService</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/services/task.service&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importamos</span> <span class="n">el</span> <span class="n">interface</span> <span class="n">de</span> <span class="n">tareas</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">TaskData</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/interfaces/task&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-finish-task-modal&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./finish-task-modal.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./finish-task-modal.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">FinishTaskModalComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
<span class="nd">@Input</span><span class="p">()</span> <span class="n">taskId</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="nd">@Input</span><span class="p">()</span> <span class="n">taskName</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">creamos</span> <span class="n">un</span> <span class="n">nuevo</span> <span class="n">emisor</span><span class="p">:</span>
<span class="nd">@Output</span><span class="p">()</span> <span class="n">task</span><span class="p">:</span> <span class="n">EventEmitter</span><span class="o">&lt;</span><span class="n">TaskData</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">new</span> <span class="n">EventEmitter</span><span class="p">();</span>

<span class="o">//</span> <span class="n">creamos</span> <span class="n">objeto</span> <span class="k">del</span> <span class="n">servicio</span><span class="p">:</span>
<span class="n">constructor</span><span class="p">(</span><span class="n">private</span> <span class="n">taskService</span><span class="p">:</span> <span class="n">TaskService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">creamos</span> <span class="n">la</span> <span class="n">función</span> <span class="n">para</span> <span class="n">finalizar</span> <span class="n">tarea</span><span class="p">:</span>
<span class="n">finishTask</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">hacemos</span> <span class="n">la</span> <span class="n">petición</span><span class="p">:</span>
    <span class="n">this</span><span class="o">.</span><span class="n">taskService</span><span class="o">.</span><span class="n">finishTask</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">taskId</span><span class="p">)</span>
    <span class="o">.</span><span class="n">subscribe</span><span class="p">((</span><span class="n">res</span><span class="p">:</span> <span class="nb">any</span><span class="p">)</span> <span class="o">=&gt;</span><span class="p">{</span>
    <span class="o">//</span> <span class="n">emitimos</span> <span class="n">la</span> <span class="n">tarea</span> <span class="n">finalizada</span><span class="p">:</span>
    <span class="n">this</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">task</span><span class="p">);</span>
    <span class="p">},</span> <span class="p">(</span><span class="n">err</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">err</span><span class="p">);</span>
    <span class="p">})</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Asignamos la función en la plantilla <strong>finish-task-modal.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;modal fade&quot; id=&quot;finishModal&quot; tabIndex=&quot;-1&quot; aria-labelledby=&quot;exampleModalLabel&quot; aria-hidden=&quot;true&quot;&gt;
    &lt;div class=&quot;modal-dialog&quot;&gt;
        &lt;div class=&quot;modal-content&quot;&gt;
        &lt;div class=&quot;modal-header&quot;&gt;
            &lt;h5 class=&quot;modal-title&quot; id=&quot;exampleModalLabel&quot;&gt;Se va a finalizar la siguiente tarea&lt;/h5&gt;
            &lt;button type=&quot;button&quot; class=&quot;btn-close&quot; data-bs-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;&lt;/button&gt;
        &lt;/div&gt;
        &lt;div class=&quot;modal-body&quot;&gt;
            &lt;p&gt;{{taskId}} - {{taskName}}&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class=&quot;modal-footer&quot;&gt;
            &lt;button type=&quot;button&quot; class=&quot;btn btn-secondary&quot; data-bs-dismiss=&quot;modal&quot;&gt;Cancelar&lt;/button&gt;
            &lt;!-- Cargamos la función asignandola al evento click --&gt;
            &lt;button type=&quot;button&quot; (click)=&quot;finishTask()&quot; class=&quot;btn btn-primary&quot; data-bs-dismiss=&quot;modal&quot;&gt;Aceptar&lt;/button&gt;
        &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
</pre></div>
</div>
<ul class="simple">
<li><p>Editamos el controlador de la tabla <strong>task-table.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>import { Component, OnInit } from &#39;@angular/core&#39;;
import { TaskService } from &#39;src/app/services/task.service&#39;;
import { Task, TaskData } from &#39;src/app/interfaces/task&#39;;

@Component({
selector: &#39;app-task-table&#39;,
templateUrl: &#39;./task-table.component.html&#39;,
styleUrls: [&#39;./task-table.component.css&#39;]
})
export class TaskTableComponent implements OnInit {
tasks: Array&lt;TaskData&gt; =  []

taskId: string = &quot;&quot;;
taskName: string = &quot;&quot;;

task: Task = {
    name: &quot;&quot;,
    description: &quot;&quot;
}

constructor(private taskService: TaskService) { }

ngOnInit(): void {
    this.taskService.getTasks().subscribe((res:Array&lt;TaskData&gt;)=&gt;{
    this.tasks = res;
    }, (err: object) =&gt; {
    console.log(err);
    });
}

getTask(id:string, name:string): void {
    this.taskId = id;
    this.taskName = name;
}

// añadimos un metodo para procesar la información recibida del evento:
updateTask($event: any){
    console.log($event);
    // cuando se cambie el estado de una tarea se buscará por su id y se cambiará por la que nos devuelva el servidor:
    this.tasks.map(task =&gt;{
    if(task._id === $event._id){
        // reemplazamos los elementos de la tarea que pueden ser actualizados:
        task.name = $event.name;
        task.description = $event.description;
        task.is_complete = $event.is_complete;
        task.date_finish = $event.date_finish;
    }
    });
}

createTask(): void {
    this.taskService.postTask(this.task)
    .subscribe((res: any) =&gt; {
        console.log(res);
        this.tasks.push(res.task);
    }, (err: object) =&gt; {
        console.log(err);
    });
}

}
</pre></div>
</div>
<ul class="simple">
<li><p>Editamos el componente modal en la tabla <strong>task-table.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;text-center container&quot;&gt;
    &lt;table class=&quot;table mt-4&quot;&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th scope=&quot;col&quot;&gt;Título&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Descripción&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Fecha creación&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Finalizada&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Fecha Finalización&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Operaciones&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody class=&quot;text-start&quot;&gt;
            &lt;!-- reemplazamos el array dummy por el de tasks --&gt;
            &lt;tr *ngFor=&quot;let data of tasks&quot;&gt;
                &lt;td&gt;{{data.name}}&lt;/td&gt;
                &lt;td&gt;{{data.description}}&lt;/td&gt;
                &lt;td&gt;{{data.date_created|date: &#39;dd/MM/yyyy hh:mm&#39;}}&lt;/td&gt;
                &lt;td&gt;
                    &lt;span *ngIf=&quot;data.is_complete == true&quot;&gt;Si&lt;/span&gt;
                    &lt;span *ngIf=&quot;data.is_complete == false&quot;&gt;No&lt;/span&gt;
                &lt;/td&gt;
                &lt;td&gt;&lt;span *ngIf=&quot;data.date_finish != null&quot;&gt;{{data.date_finish|date: &#39;dd/MM/yyyy hh:mm&#39;}}&lt;/span&gt;&lt;/td&gt;
                &lt;td class=&quot;text-center&quot;&gt;
                    &lt;button (click)=&quot;getTask(data._id, data.name)&quot; class=&quot;btn btn-sm btn-primary me-2&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#finishModal&quot;&gt;finalizar tarea&lt;/button&gt;
                    &lt;button (click)=&quot;getTask(data._id, data.name)&quot; class=&quot;btn btn-sm btn-danger me-2&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#deleteModal&quot;&gt;Eliminar tarea&lt;/button&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;div class=&quot;row text-center align-items-end&quot;&gt;
            &lt;div class=&quot;col-md-5&quot;&gt;&lt;/div&gt;
            &lt;input [(ngModel)]=&quot;task.name&quot;  class=&quot;col me-2 form-control form-sm&quot; type=&quot;text&quot; placeholder=&quot;Título&quot;/&gt;
            &lt;input [(ngModel)]=&quot;task.description&quot; class=&quot;col me-2 form-control&quot; type=&quot;text&quot; placeholder=&quot;Descripción&quot; /&gt;
            &lt;input (click)=&quot;createTask()&quot; class=&quot;col me-2 form-control btn btn-success&quot; type=&quot;button&quot; value=&quot;Crear tarea&quot; /&gt;
    &lt;/div&gt;
    &lt;!-- le decimos al modal cual será la función que procese el evento: --&gt;
    &lt;app-finish-task-modal [taskId]=&quot;taskId&quot; [taskName]=&quot;taskName&quot; (task)=&quot;updateTask($event)&quot;&gt;&lt;/app-finish-task-modal&gt;
    &lt;app-delete-task-modal [taskId]=&quot;taskId&quot; [taskName]=&quot;taskName&quot; &gt;&lt;/app-delete-task-modal&gt;
&lt;/div&gt;
</pre></div>
</div>
</section>
<section id="paso-11-eliminar-tarea">
<h3><a class="toc-backref" href="#id31">Paso 11: Eliminar tarea</a><a class="headerlink" href="#paso-11-eliminar-tarea" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Hacemos algo similar para eliminar tareas. Empezamos editando el servicio <strong>task.service.ts</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>import { Injectable } from &#39;@angular/core&#39;;
import {HttpClient, HttpHeaders} from &#39;@angular/common/http&#39;;
import {map} from &#39;rxjs/operators&#39;;
import { JwtAuthGuard } from &#39;../jwt-auth.guard&#39;;
import { Task } from &#39;../interfaces/task&#39;;

@Injectable({
providedIn: &#39;root&#39;
})
export class TaskService {

url_base: string = &#39;http://localhost:5000/api&#39;;

token: any = localStorage.getItem(&#39;token&#39;);

headers: any = new HttpHeaders({
    &#39;Content-Type&#39;: &#39;application/json&#39;,
    &#39;Authorization&#39;: this.token
});

options: any = {headers: this.headers}

constructor(private http: HttpClient, private jwtAuthGuard: JwtAuthGuard) {
}

postTask(task: Task): any {
    return this.http.post(`${this.url_base}/tasks`, task, this.options)
    .pipe(map((data: object) =&gt; {
        return data;
    }));
}

getTasks(): any {
    return this.http.get(`${this.url_base}/tasks`, this.options)
    .pipe(map((data: object) =&gt; {
        return data;
    }));
}

finishTask(id:string): any {
    return this.http.patch(`${this.url_base}/tasks/${id}`, null, this.options)
    .pipe(map((data: object) =&gt; {
        return data;
    }));
}

// crear servicio para eliminar tarea:
deleteTask(id:string): any {
    return this.http.delete(`${this.url_base}/tasks/${id}`, this.options)
    .pipe(map((data: object) =&gt; {
        return data;
    }));
}
}
</pre></div>
</div>
<ul class="simple">
<li><p>Editamos el controlador <strong>delete-task-modal.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">importamos</span> <span class="n">Output</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span><span class="p">,</span> <span class="n">OnInit</span><span class="p">,</span> <span class="n">EventEmitter</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">el</span> <span class="n">servicio</span> <span class="n">task</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">TaskService</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/services/task.service&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-delete-task-modal&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./delete-task-modal.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./delete-task-modal.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">DeleteTaskModalComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
<span class="nd">@Input</span><span class="p">()</span> <span class="n">taskId</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="nd">@Input</span><span class="p">()</span> <span class="n">taskName</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">cargamos</span> <span class="n">el</span> <span class="n">emisor</span> <span class="n">de</span> <span class="n">output</span><span class="p">:</span>
<span class="nd">@Output</span><span class="p">()</span> <span class="n">task</span><span class="p">:</span> <span class="n">EventEmitter</span><span class="o">&lt;</span><span class="nb">object</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">new</span> <span class="n">EventEmitter</span><span class="p">();</span>

<span class="o">//</span> <span class="n">creamos</span> <span class="n">el</span> <span class="n">objeto</span> <span class="k">del</span> <span class="n">servicio</span> <span class="n">task</span><span class="p">:</span>
<span class="n">constructor</span><span class="p">(</span><span class="n">private</span> <span class="n">taskService</span><span class="p">:</span> <span class="n">TaskService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">creamos</span> <span class="n">la</span> <span class="n">función</span> <span class="n">para</span> <span class="n">eliminar</span> <span class="n">tarea</span><span class="p">:</span>
<span class="n">deleteTask</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">hacemos</span> <span class="n">la</span> <span class="n">petición</span><span class="p">:</span>
    <span class="n">this</span><span class="o">.</span><span class="n">taskService</span><span class="o">.</span><span class="n">deleteTask</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">taskId</span><span class="p">)</span>
    <span class="o">.</span><span class="n">subscribe</span><span class="p">((</span><span class="n">res</span><span class="p">:</span> <span class="nb">any</span><span class="p">)</span> <span class="o">=&gt;</span><span class="p">{</span>
    <span class="o">//</span> <span class="n">emitimos</span> <span class="n">la</span> <span class="n">tarea</span> <span class="n">finalizada</span><span class="p">:</span>
    <span class="n">this</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">emit</span><span class="p">({</span><span class="nb">id</span><span class="p">:</span> <span class="n">this</span><span class="o">.</span><span class="n">taskId</span><span class="p">,</span> <span class="n">delete</span><span class="p">:</span><span class="n">true</span><span class="p">});</span>
    <span class="p">},</span> <span class="p">(</span><span class="n">err</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">err</span><span class="p">);</span>
    <span class="p">})</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Añadimos la función nueva a la pantalla <strong>delete-task-modal.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;modal fade&quot; id=&quot;deleteModal&quot; tabIndex=&quot;-1&quot; aria-labelledby=&quot;exampleModalLabel&quot; aria-hidden=&quot;true&quot;&gt;
    &lt;div class=&quot;modal-dialog&quot;&gt;
        &lt;div class=&quot;modal-content&quot;&gt;
        &lt;div class=&quot;modal-header&quot;&gt;
            &lt;h5 class=&quot;modal-title&quot; id=&quot;exampleModalLabel&quot;&gt;Se va a eliminar la siguiente tarea&lt;/h5&gt;
            &lt;button type=&quot;button&quot; class=&quot;btn-close&quot; data-bs-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;&lt;/button&gt;
        &lt;/div&gt;
        &lt;div class=&quot;modal-body&quot;&gt;
            &lt;p&gt;{{taskId}} - {{taskName}}&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class=&quot;modal-footer&quot;&gt;
            &lt;button type=&quot;button&quot; class=&quot;btn btn-secondary&quot; data-bs-dismiss=&quot;modal&quot;&gt;Cancelar&lt;/button&gt;
            &lt;!-- añadir función al botón: --&gt;
            &lt;button type=&quot;button&quot; (click)=&quot;deleteTask()&quot; class=&quot;btn btn-danger&quot; data-bs-dismiss=&quot;modal&quot;&gt;Aceptar&lt;/button&gt;
        &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
</pre></div>
</div>
<ul class="simple">
<li><p>Editamos el componente <strong>task-table.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>import { Component, OnInit } from &#39;@angular/core&#39;;
import { TaskService } from &#39;src/app/services/task.service&#39;;
import { Task, TaskData } from &#39;src/app/interfaces/task&#39;;

@Component({
selector: &#39;app-task-table&#39;,
templateUrl: &#39;./task-table.component.html&#39;,
styleUrls: [&#39;./task-table.component.css&#39;]
})
export class TaskTableComponent implements OnInit {
tasks: Array&lt;TaskData&gt; =  []

taskId: string = &quot;&quot;;
taskName: string = &quot;&quot;;

task: Task = {
    name: &quot;&quot;,
    description: &quot;&quot;
}

constructor(private taskService: TaskService) { }

ngOnInit(): void {
    this.taskService.getTasks().subscribe((res:Array&lt;TaskData&gt;)=&gt;{
    this.tasks = res;
    }, (err: object) =&gt; {
    console.log(err);
    });
}

getTask(id:string, name:string): void {
    this.taskId = id;
    this.taskName = name;
}

updateTask($event: any){
    // validamos si hemos recibido la orden de eliminar:
    if($event.delete == true){
    // fitramos la tarea que ya no existe para que no aparezca en la tabla:
    this.tasks = this.tasks.filter(task =&gt; task._id !== $event.id);
    console.log($event.id);
    }
    this.tasks.map(task =&gt;{
    if(task._id === $event._id){
        // reemplazamos los elementos de la tarea que pueden ser actualizados:
        task.name = $event.name;
        task.description = $event.description;
        task.is_complete = $event.is_complete;
        task.date_finish = $event.date_finish;
    }
    });
}

createTask(): void {
    this.taskService.postTask(this.task)
    .subscribe((res: any) =&gt; {
        console.log(res);
        this.tasks.push(res.task);
    }, (err: object) =&gt; {
        console.log(err);
    });
}

}
</pre></div>
</div>
<ul class="simple">
<li><p>Pasar evento al componente modal en pantalla <strong>task-table.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;text-center container&quot;&gt;
    &lt;table class=&quot;table mt-4&quot;&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th scope=&quot;col&quot;&gt;Título&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Descripción&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Fecha creación&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Finalizada&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Fecha Finalización&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Operaciones&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody class=&quot;text-start&quot;&gt;
            &lt;!-- reemplazamos el array dummy por el de tasks --&gt;
            &lt;tr *ngFor=&quot;let data of tasks&quot;&gt;
                &lt;td&gt;{{data.name}}&lt;/td&gt;
                &lt;td&gt;{{data.description}}&lt;/td&gt;
                &lt;td&gt;{{data.date_created|date: &#39;dd/MM/yyyy hh:mm&#39;}}&lt;/td&gt;
                &lt;td&gt;
                    &lt;span *ngIf=&quot;data.is_complete == true&quot;&gt;Si&lt;/span&gt;
                    &lt;span *ngIf=&quot;data.is_complete == false&quot;&gt;No&lt;/span&gt;
                &lt;/td&gt;
                &lt;td&gt;&lt;span *ngIf=&quot;data.date_finish != null&quot;&gt;{{data.date_finish|date: &#39;dd/MM/yyyy hh:mm&#39;}}&lt;/span&gt;&lt;/td&gt;
                &lt;td class=&quot;text-center&quot;&gt;
                    &lt;button (click)=&quot;getTask(data._id, data.name)&quot; class=&quot;btn btn-sm btn-primary me-2&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#finishModal&quot;&gt;finalizar tarea&lt;/button&gt;
                    &lt;button (click)=&quot;getTask(data._id, data.name)&quot; class=&quot;btn btn-sm btn-danger me-2&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#deleteModal&quot;&gt;Eliminar tarea&lt;/button&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;div class=&quot;row text-center align-items-end&quot;&gt;
            &lt;div class=&quot;col-md-5&quot;&gt;&lt;/div&gt;
            &lt;input [(ngModel)]=&quot;task.name&quot;  class=&quot;col me-2 form-control form-sm&quot; type=&quot;text&quot; placeholder=&quot;Título&quot;/&gt;
            &lt;input [(ngModel)]=&quot;task.description&quot; class=&quot;col me-2 form-control&quot; type=&quot;text&quot; placeholder=&quot;Descripción&quot; /&gt;
            &lt;input (click)=&quot;createTask()&quot; class=&quot;col me-2 form-control btn btn-success&quot; type=&quot;button&quot; value=&quot;Crear tarea&quot; /&gt;
    &lt;/div&gt;
    &lt;app-finish-task-modal [taskId]=&quot;taskId&quot; [taskName]=&quot;taskName&quot; (task)=&quot;updateTask($event)&quot;&gt;&lt;/app-finish-task-modal&gt;
    &lt;!-- le decimos al modal cual será la función que procese el evento: --&gt;
    &lt;app-delete-task-modal [taskId]=&quot;taskId&quot; [taskName]=&quot;taskName&quot; (task)=&quot;updateTask($event)&quot;&gt;&lt;/app-delete-task-modal&gt;
&lt;/div&gt;
</pre></div>
</div>
</section>
<section id="paso-12-editar-tareas">
<h3><a class="toc-backref" href="#id32">Paso 12: Editar tareas</a><a class="headerlink" href="#paso-12-editar-tareas" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Creamos un nuevo servicio en <strong>task.service.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>import { Injectable } from &#39;@angular/core&#39;;
import {HttpClient, HttpHeaders} from &#39;@angular/common/http&#39;;
import {map} from &#39;rxjs/operators&#39;;
import { JwtAuthGuard } from &#39;../jwt-auth.guard&#39;;
import { Task } from &#39;../interfaces/task&#39;;

@Injectable({
providedIn: &#39;root&#39;
})
export class TaskService {

url_base: string = &#39;http://localhost:5000/api&#39;;

token: any = localStorage.getItem(&#39;token&#39;);

headers: any = new HttpHeaders({
    &#39;Content-Type&#39;: &#39;application/json&#39;,
    &#39;Authorization&#39;: this.token
});

options: any = {headers: this.headers}

constructor(private http: HttpClient, private jwtAuthGuard: JwtAuthGuard) {
}

postTask(task: Task): any {
    return this.http.post(`${this.url_base}/tasks`, task, this.options)
    .pipe(map((data: object) =&gt; {
        return data;
    }));
}

getTasks(): any {
    return this.http.get(`${this.url_base}/tasks`, this.options)
    .pipe(map((data: object) =&gt; {
        return data;
    }));
}

finishTask(id:string): any {
    return this.http.patch(`${this.url_base}/tasks/${id}`, null, this.options)
    .pipe(map((data: object) =&gt; {
        return data;
    }));
}

deleteTask(id:string): any {
    return this.http.delete(`${this.url_base}/tasks/${id}`, this.options)
    .pipe(map((data: object) =&gt; {
        return data;
    }));
}

// crear servicio para actualizar tareas:
updateTask(task:Task, id:string): any {
    return this.http.put(`${this.url_base}/tasks/${id}`, task, this.options)
    .pipe(map((data: object) =&gt; {
        return data;
    }));
}
}
</pre></div>
</div>
<ul class="simple">
<li><p>Añadimos nueva funcionalidad a la pantalla <strong>task-table.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;text-center container&quot;&gt;
    &lt;table class=&quot;table mt-4&quot;&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th scope=&quot;col&quot;&gt;Título&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Descripción&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Fecha creación&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Finalizada&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Fecha Finalización&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Operaciones&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody class=&quot;text-start&quot;&gt;
            &lt;!-- añadimos una nueva fila con hueco para una tarea con los valores por defecto de la tarea recuperada: --&gt;
            &lt;tr *ngIf=&quot;isUpdateTask == true; else taskList&quot;&gt;
                &lt;td&gt;
                    &lt;input [(ngModel)]=&quot;task.name&quot; class=&quot;col me-2 form-control form-sm&quot; type=&quot;text&quot; placeholder=&quot;Título&quot; /&gt;
                &lt;/td&gt;
                &lt;td&gt;
                    &lt;input [(ngModel)]=&quot;task.description&quot; class=&quot;col me-2 form-control&quot; type=&quot;text&quot; placeholder=&quot;Descripción&quot; /&gt;
                &lt;/td&gt;
                &lt;td&gt;{{taskCreated|date: &#39;dd/MM/yyyy hh:mm&#39;}}&lt;/td&gt;
                &lt;td&gt;
                    &lt;span *ngIf=&quot;taskIsComplete == true&quot;&gt;Si&lt;/span&gt;
                    &lt;span *ngIf=&quot;taskIsComplete == false&quot;&gt;No&lt;/span&gt;
                &lt;/td&gt;
                &lt;td&gt;&lt;span *ngIf=&quot;taskFinish != null&quot;&gt;{{taskFinish|date: &#39;dd/MM/yyyy hh:mm&#39;}}&lt;/span&gt;&lt;/td&gt;
                &lt;td class=&quot;text-center&quot;&gt;
                    &lt;button type=&quot;button&quot; (click)=&quot;updateTask()&quot; class=&quot;btn btn-sm btn-success me-2 mb-1&quot;&gt;Guardar&lt;/button&gt;
                    &lt;button type=&quot;button&quot; (click)=&quot;cancelUpdate()&quot; class=&quot;btn btn-sm btn-primary me-2 mb-1&quot; &gt;Cancelar&lt;/button&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
            &lt;!-- movemos el listado a un ng-template que se mostrará cuando no se cumpla la condición anterior --&gt;
            &lt;ng-template #taskList&gt;
                &lt;tr *ngFor=&quot;let data of tasks&quot;&gt;
                    &lt;td&gt;{{data.name}}&lt;/td&gt;
                    &lt;td&gt;{{data.description}}&lt;/td&gt;
                    &lt;td&gt;{{data.date_created|date: &#39;dd/MM/yyyy hh:mm&#39;}}&lt;/td&gt;
                    &lt;td&gt;
                        &lt;span *ngIf=&quot;data.is_complete == true&quot;&gt;Si&lt;/span&gt;
                        &lt;span *ngIf=&quot;data.is_complete == false&quot;&gt;No&lt;/span&gt;
                    &lt;/td&gt;
                    &lt;td&gt;&lt;span *ngIf=&quot;data.date_finish != null&quot;&gt;{{data.date_finish|date: &#39;dd/MM/yyyy hh:mm&#39;}}&lt;/span&gt;&lt;/td&gt;
                    &lt;td class=&quot;text-center&quot;&gt;
                        &lt;!-- añadimos un nuevo botón para actualizar tarea con los datos id, nombre, descripcion y con true decir que estamos actualizando: --&gt;
                        &lt;button (click)=&quot;editTask(data)&quot; class=&quot;btn btn-sm btn-warning me-2&quot;&gt;editar tarea&lt;/button&gt;
                        &lt;button (click)=&quot;getTask(data._id, data.name)&quot; class=&quot;btn btn-sm btn-primary me-2&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#finishModal&quot;&gt;finalizar tarea&lt;/button&gt;
                        &lt;button (click)=&quot;getTask(data._id, data.name)&quot; class=&quot;btn btn-sm btn-danger me-2&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#deleteModal&quot;&gt;Eliminar tarea&lt;/button&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
                &lt;!-- metemos aquí la acción de crear tarea para poder ocultarla cuando se edite tarea --&gt;
                &lt;tr&gt;
                    &lt;td&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;/td&gt;
                    &lt;td&gt;
                        &lt;input [(ngModel)]=&quot;task.name&quot;  class=&quot;col me-2 form-control form-sm&quot; type=&quot;text&quot; placeholder=&quot;Título&quot;/&gt;
                    &lt;/td&gt;
                    &lt;td&gt;
                        &lt;input [(ngModel)]=&quot;task.description&quot; class=&quot;col me-2 form-control&quot; type=&quot;text&quot; placeholder=&quot;Descripción&quot; /&gt;
                    &lt;/td&gt;
                    &lt;td&gt;
                        &lt;input (click)=&quot;createTask()&quot; class=&quot;col me-2 form-control btn btn-success&quot; type=&quot;button&quot; value=&quot;Crear tarea&quot; /&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
            &lt;/ng-template&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;app-finish-task-modal [taskId]=&quot;taskId&quot; [taskName]=&quot;taskName&quot; (task)=&quot;updateTask($event)&quot;&gt;&lt;/app-finish-task-modal&gt;
    &lt;app-delete-task-modal [taskId]=&quot;taskId&quot; [taskName]=&quot;taskName&quot; (task)=&quot;updateTask($event)&quot;&gt;&lt;/app-delete-task-modal&gt;
&lt;/div&gt;
</pre></div>
</div>
<ul class="simple">
<li><p>Arreglamos la lógica desde el controlador <strong>task-table.controller.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>import { Component, OnInit } from &#39;@angular/core&#39;;
import { TaskService } from &#39;src/app/services/task.service&#39;;
import { Task, TaskData } from &#39;src/app/interfaces/task&#39;;

@Component({
selector: &#39;app-task-table&#39;,
templateUrl: &#39;./task-table.component.html&#39;,
styleUrls: [&#39;./task-table.component.css&#39;]
})
export class TaskTableComponent implements OnInit {
tasks: Array&lt;TaskData&gt; =  []

taskId: string = &quot;&quot;;
taskName: string = &quot;aaa&quot;;
// creamos el resto de atributos para la carga del editor:
taskCreated:Date = new Date();
taskIsComplete: boolean = false;
taskFinish:Date = new Date();
// creamos un atributo que validará cuando estemos editando una tarea:
isUpdateTask: boolean = false;


task: Task = {
    name: &quot;&quot;,
    description: &quot;&quot;
}

constructor(private taskService: TaskService) { }

ngOnInit(): void {
    this.taskService.getTasks().subscribe((res:Array&lt;TaskData&gt;)=&gt;{
    this.tasks = res;
    }, (err: object) =&gt; {
    console.log(err);
    });
}

getTask(id:string, name:string, description:string = &quot;&quot;): void {
    this.taskId = id;
    this.taskName = name;
}

// crear nueva función para actualizar form de edición:
editTask(taskData:TaskData){
    // cargamos los datos que se mostrarán en la vista:
    this.taskId = taskData._id;
    this.task.name = taskData.name;
    this.task.description = taskData.description;
    this.taskCreated = taskData.date_created;
    this.taskIsComplete = taskData.is_complete;
    this.taskFinish = taskData.date_finish;
    // mostramos los campos para editar tarea:
    this.isUpdateTask = true;
}

// ponemos el event por defecto a null para poder reutilizar el método:
updateTask($event: any = null){
    if($event &amp;&amp; $event.delete == true){
    this.tasks = this.tasks.filter(task =&gt; task._id !== $event.id);
    console.log($event.id);
    }
    // actualizamos este apartado para controlar que estamos actualizando tarea o finalizandola:
    if(this.isUpdateTask == true){
    // cvreamos la operación de actualización:
    this.taskService.updateTask(this.task, this.taskId)
    .subscribe((res: any) =&gt; {
        this.tasks.map(task =&gt;{
        if(task._id === this.taskId){
            task.name = res.task.name;
            task.description = res.task.description;
            this.isUpdateTask = false;
        }
        });
    },(err: object) =&gt;{
        console.log(err);
    })

    }else{
    this.tasks.map(task =&gt;{
        if(task._id === $event._id){
        task.name = $event.name;
        task.description = $event.description;
        task.is_complete = $event.is_complete;
        task.date_finish = $event.date_finish;
        }
    });
    }


}

// creamos un metodo para cancelar la edición:
cancelUpdate(): void{
    // hay que vaciar los campos del form:
    this.task.name = &quot;&quot;;
    this.task.description = &quot;&quot;;
    this.isUpdateTask = false;
}

createTask(): void {
    this.taskService.postTask(this.task)
    .subscribe((res: any) =&gt; {
        console.log(res);
        this.tasks.push(res.task);
    }, (err: object) =&gt; {
        console.log(err);
    });
}

}
</pre></div>
</div>
</section>
<section id="paso-13-cargar-datos-de-usuario">
<h3><a class="toc-backref" href="#id33">Paso 13: Cargar datos de usuario</a><a class="headerlink" href="#paso-13-cargar-datos-de-usuario" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Vamos a editar la interfaz <strong>user.interfaces.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export interface User {
    email: string,
    password: string
}

export interface ResetEmail {
    email: string
}

export interface ResetPassword {
    newPassword: &quot;&quot;,
    repitePassword: &quot;&quot;
}

// crear un nuevo interface para validar datos a actualizar del usuario:
export interface UserData{ // id y avatar serán opcionales
    _id?: string,
    email: string,
    password: string,
    name: string,
    lastname: string,
    avatar?: any
}
</pre></div>
</div>
<ul class="simple">
<li><p>Crear un nuevo servicio en <strong>user.service.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>import { Injectable } from &#39;@angular/core&#39;;
// importar HttpHeaders:
import {HttpClient} from &#39;@angular/common/http&#39;;
import {map} from &#39;rxjs/operators&#39;;
import { User, ResetEmail, ResetPassword } from &#39;../interfaces/user&#39;;

@Injectable({
providedIn: &#39;root&#39;
})
export class UserService {
url_base: string = &#39;http://localhost:5000/api&#39;;

// cargar token y añadirlo a la cabecera:
token: any = localStorage.getItem(&#39;token&#39;);

headers: any = new HttpHeaders({
    &#39;Content-Type&#39;: &#39;application/json&#39;,
    &#39;Authorization&#39;: this.token
});

options: any = {headers: this.headers}

constructor(private http: HttpClient) { }

registerUser(user: User): any {
    return this.http.post(`${this.url_base}/register`, user)
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}

loginUser(user: User): any {
    return this.http.post(`${this.url_base}/login`, user)
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}

forgotUser(email: ResetEmail): any {
    return this.http.post(`${this.url_base}/forgot`, email)
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}

resetPassword(password: ResetPassword, id: string, token: string): any {
    return this.http.put(`${this.url_base}/reset/${id}/${token}`, password)
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}

// crear peticion para recuperar datos de nuestro usuario:
getUser(): any {
    return this.http.get(`${this.url_base}/users`, this.options)
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}

}
</pre></div>
</div>
<ul class="simple">
<li><p>Ahora mos vamos a editar el controlador <strong>user-form.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">el</span> <span class="n">servicio</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">UserService</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/services/user.service&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">el</span> <span class="n">interface</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">UserData</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/interfaces/user&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-user-form&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./user-form.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./user-form.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">UserFormComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
<span class="o">//</span> <span class="n">crear</span> <span class="n">atributo</span> <span class="n">preparado</span> <span class="n">para</span> <span class="n">cargar</span> <span class="n">datos</span> <span class="k">del</span> <span class="n">usuario</span><span class="p">:</span>
<span class="n">userData</span><span class="p">:</span> <span class="nb">any</span> <span class="o">=</span> <span class="n">null</span><span class="p">;</span>

<span class="n">avatar</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;./assets/avatar.png&quot;</span><span class="p">;</span>

<span class="n">user</span><span class="p">:</span> <span class="n">UserData</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">lastname</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">email</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">password</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">avatar</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>
<span class="o">//</span> <span class="n">crear</span> <span class="n">objeto</span> <span class="n">con</span> <span class="n">el</span> <span class="n">servicio</span><span class="p">:</span>
<span class="n">constructor</span><span class="p">(</span><span class="n">private</span> <span class="n">userService</span><span class="p">:</span> <span class="n">UserService</span><span class="p">)</span> <span class="p">{}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
    <span class="o">//</span> <span class="n">cargamos</span> <span class="n">los</span> <span class="n">datos</span> <span class="n">en</span> <span class="n">el</span> <span class="n">atributo</span> <span class="n">user</span> <span class="n">llamando</span> <span class="n">al</span> <span class="n">servicio</span><span class="p">:</span>
    <span class="n">this</span><span class="o">.</span><span class="n">userService</span><span class="o">.</span><span class="n">getUser</span><span class="p">()</span><span class="o">.</span><span class="n">subscribe</span><span class="p">((</span><span class="n">res</span><span class="p">:</span> <span class="nb">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">res</span><span class="p">);</span>
    <span class="n">this</span><span class="o">.</span><span class="n">userData</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">user</span><span class="p">;</span>
    <span class="o">//</span> <span class="n">pasar</span> <span class="n">los</span> <span class="n">valores</span> <span class="n">al</span> <span class="n">formulario</span> <span class="p">(</span><span class="n">hay</span> <span class="n">que</span> <span class="n">hacerlo</span> <span class="n">a</span> <span class="n">mano</span> <span class="n">porque</span> <span class="n">sino</span> <span class="n">dará</span> <span class="n">errores</span> <span class="n">ya</span> <span class="n">que</span> <span class="n">algunos</span> <span class="n">campos</span> <span class="n">no</span> <span class="n">tienen</span> <span class="n">porque</span> <span class="n">estar</span> <span class="n">disponibles</span><span class="p">):</span>
    <span class="n">this</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">this</span><span class="o">.</span><span class="n">userData</span><span class="o">.</span><span class="n">name</span><span class="p">;</span>
    <span class="n">this</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">lastname</span> <span class="o">=</span> <span class="n">this</span><span class="o">.</span><span class="n">userData</span><span class="o">.</span><span class="n">lastname</span><span class="p">;</span>
    <span class="n">this</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="n">this</span><span class="o">.</span><span class="n">userData</span><span class="o">.</span><span class="n">email</span><span class="p">;</span>

    <span class="p">},</span> <span class="p">(</span><span class="n">err</span><span class="p">:</span><span class="nb">object</span><span class="p">)</span> <span class="o">=&gt;</span><span class="p">{</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="n">updateUser</span><span class="p">():</span> <span class="nb">any</span> <span class="p">{</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">user</span><span class="p">);</span>

<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="paso-14-editar-datos-de-usuario">
<h3><a class="toc-backref" href="#id34">Paso 14: Editar datos de usuario</a><a class="headerlink" href="#paso-14-editar-datos-de-usuario" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Comenzamos creando el nuevo servicio en el archivo <strong>user.service.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> import { Injectable } from &#39;@angular/core&#39;;
 import {HttpClient, HttpHeaders} from &#39;@angular/common/http&#39;;
 import {map} from &#39;rxjs/operators&#39;;
 // importar el interface UserData:
 import { User, ResetEmail, ResetPassword, UserData } from &#39;../interfaces/user&#39;;

 @Injectable({
 providedIn: &#39;root&#39;
 })
 export class UserService {
 url_base: string = &#39;http://localhost:5000/api&#39;;

 // cargar token y añadirlo a la cabecera:
 token: any = localStorage.getItem(&#39;token&#39;);

 headers: any = new HttpHeaders({
     &#39;Content-Type&#39;: &#39;application/json&#39;,
     &#39;Authorization&#39;: this.token
 });

 options: any = {headers: this.headers}

 constructor(private http: HttpClient) { }

 registerUser(user: User): any {
     return this.http.post(`${this.url_base}/register`, user)
             .pipe(map((data: object) =&gt; {
             return data;
             }));
 }

 loginUser(user: User): any {
     return this.http.post(`${this.url_base}/login`, user)
             .pipe(map((data: object) =&gt; {
             return data;
             }));
 }

 forgotUser(email: ResetEmail): any {
     return this.http.post(`${this.url_base}/forgot`, email)
             .pipe(map((data: object) =&gt; {
             return data;
             }));
 }

 resetPassword(password: ResetPassword, id: string, token: string): any {
     return this.http.put(`${this.url_base}/reset/${id}/${token}`, password)
             .pipe(map((data: object) =&gt; {
             return data;
             }));
 }

 getUser(): any {
     return this.http.get(`${this.url_base}/users`, this.options)
             .pipe(map((data: object) =&gt; {
             return data;
             }));
 }

// actualizar usuario:
 putUser(user:any, avatar:File, id: string): any {
     // crear un formData:
     var formData = new FormData();

     // cambiar los headers para que acepte un multipart:
     this.headers = new HttpHeaders({
     &#39;Accept&#39;: &#39;multipart/form-data&#39;,
     &#39;Authorization&#39;: this.token,
     });

     this.options = {headers: this.headers}

     // comprobar si existen datos:
     formData.append(&#39;avatar&#39;, avatar);
     // Añadir el resto de campos:
     formData.append(&#39;name&#39;, user.name);
     formData.append(&#39;lastname&#39;, user.lastname);
     if(user.email.length &gt; 5){
     formData.append(&#39;email&#39;, user.email);
     }
     if(user.password.length &gt; 0){
     formData.append(&#39;password&#39;, user.password);
     }

     console.log(formData);

     return this.http.put(`${this.url_base}/users/${id}`, formData, this.options, )
             .pipe(map((data: object) =&gt; {
             return data;
             }));
 }

 }
</pre></div>
</div>
<ul class="simple">
<li><p>Editamos el controlador <strong>user-form.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>import { Component, OnInit } from &#39;@angular/core&#39;;
import { UserService } from &#39;src/app/services/user.service&#39;;
import { UserData } from &#39;src/app/interfaces/user&#39;;

@Component({
selector: &#39;app-user-form&#39;,
templateUrl: &#39;./user-form.component.html&#39;,
styleUrls: [&#39;./user-form.component.css&#39;]
})
export class UserFormComponent implements OnInit {
userData: any = null;
// crear un atributo id:
id: string = &quot;&quot;;

avatar: string = &quot;./assets/avatar.png&quot;;

user: UserData = {
    name: &quot;&quot;,
    lastname: &quot;&quot;,
    email: &quot;&quot;,
    password: &quot;&quot;,
    avatar: null
}

selectAvatar: any = null;

constructor(private userService: UserService) {}

ngOnInit(): void {

    this.userService.getUser().subscribe((res: any) =&gt; {
    console.log(res);
    this.userData = res.user;

    // cargar el id recuperado del servicio en el atributo id:
    this.id = this.userData._id;
    this.user.name = this.userData.name;
    this.user.lastname = this.userData.lastname;
    this.user.email = this.userData.email;
    // mostrar el nuevo avatar:
    if(this.userData.avatar){
        this.avatar = `http://localhost:5000/api/users/avatar/${this.userData.avatar}`;
    }

    }, (err:object) =&gt;{
    console.log(err);
    });
}

updateUser(): void {
    console.log(this.user);

    // enviamos los datos del user, el avatar y el id:
    this.userService.putUser(this.user, this.selectAvatar, this.id)
    .subscribe((res: any) =&gt; {
    console.log(res);
    if(res.avatar){
        this.avatar = `http://localhost:5000/api/users/avatar/${res.avatar}`;
    }
    },(err: object)=&gt;{
    console.log(err);
    });
}
// crear metodo para recuperar el avatar:
getAvatar($event: any): void{
    this.selectAvatar = $event.target.files[0];

    console.log(this.selectAvatar);
}

}
</pre></div>
</div>
<ul class="simple">
<li><p>Mejoramos la plantilla <strong>user-form.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;container mt-4 text-center&quot;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;col&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">h3</span><span class="o">&gt;</span><span class="n">Datos</span> <span class="n">de</span> <span class="n">usuario</span><span class="o">&lt;/</span><span class="n">h3</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">hr</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="p">{{</span><span class="n">avatar</span><span class="p">}}</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;avatarEdit rounded img-thumbnail img-fluid&quot;</span>  <span class="n">alt</span><span class="o">=</span><span class="s2">&quot;Avatar&quot;</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;file&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;form-control mt-3&quot;</span> <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Subir avatar&quot;</span> <span class="p">(</span><span class="n">change</span><span class="p">)</span><span class="o">=</span><span class="s2">&quot;getAvatar($event)&quot;</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;form-control mt-3&quot;</span> <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Nombre&quot;</span> <span class="p">[(</span><span class="n">ngModel</span><span class="p">)]</span><span class="o">=</span><span class="s2">&quot;user.name&quot;</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;form-control mt-3&quot;</span> <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Apellidos&quot;</span> <span class="p">[(</span><span class="n">ngModel</span><span class="p">)]</span><span class="o">=</span><span class="s2">&quot;user.lastname&quot;</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;email&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;form-control mt-3&quot;</span> <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Email&quot;</span> <span class="p">[(</span><span class="n">ngModel</span><span class="p">)]</span><span class="o">=</span><span class="s2">&quot;user.email&quot;</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;password&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;form-control mt-3&quot;</span> <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;nueva contraseña (dejar en blanco para no cambiar)&quot;</span> <span class="p">[(</span><span class="n">ngModel</span><span class="p">)]</span><span class="o">=</span><span class="s2">&quot;user.password&quot;</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="nb">input</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn btn-success form-control mt-3&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;Actualizar datos&quot;</span> <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">&quot;updateUser()&quot;</span> <span class="o">/&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="paso-15-actualizar-usuario-navbar">
<h3><a class="toc-backref" href="#id35">Paso 15: Actualizar usuario navbar</a><a class="headerlink" href="#paso-15-actualizar-usuario-navbar" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Vamos a editar el controlador de navbar <strong>navbar.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>import { Component, OnInit } from &#39;@angular/core&#39;;
// importamos el servicio:
import { UserService } from &#39;src/app/services/user.service&#39;;

@Component({
selector: &#39;app-navbar&#39;,
templateUrl: &#39;./navbar.component.html&#39;,
styleUrls: [&#39;./navbar.component.css&#39;]
})
export class NavbarComponent implements OnInit {
// creamos una variable para el avatar:
avatar: string = &quot;./assets/avatar.png&quot;;

// creamos el objeto del servicio:
constructor(private userService: UserService) { }

ngOnInit(): void {
    // implementamos el servicio para recuperar la imagen:
    this.userService.getUser().subscribe((res: any) =&gt;{

    // si tenemos un avatar lo cargamos:
    if(res.user.avatar &amp;&amp; res.user.avatar != null){
        this.avatar = `http://localhost:5000/api/users/avatar/${res.user.avatar}`;
        console.log(this.avatar);
    }
    }, (err: object)=&gt;{
    console.log(err);
    });
}

}
</pre></div>
</div>
<ul class="simple">
<li><p>Ahora editamos la pantalla <strong>navbar.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;nav class=&quot;navbar navbar-expand-lg navbar-dark bg-dark&quot;&gt;
    &lt;div class=&quot;col-md-11 align-items-start ms-2&quot; &gt;
        &lt;!-- cambiar href por routerLink --&gt;
        &lt;a routerLink=&quot;/&quot; class=&quot;navbar-brand&quot;&gt;Task Learn&lt;/a&gt;
    &lt;/div&gt;

    &lt;ul class=&quot;navbar-nav mb-2 mb-lg-0 col-md-1 align-items-end me-3&quot;&gt;
        &lt;li class=&quot;nav-item align-items-end&quot;&gt;
            &lt;!-- cambiar href por routerLink --&gt;
            &lt;a routerLink=&quot;/users&quot; class=&quot;nav-link text-center&quot;&gt;
                &lt;!-- cargamos el atributo avatar en la ruta de la imagen --&gt;
                &lt;img class=&quot;avatar rounded img-thumbnail img-fluid&quot; src={{avatar}} alt=&quot;foto&quot; /&gt;
                &lt;div class=&quot;col&quot;&gt;
                    &lt;small&gt;Usuario&lt;/small&gt;
                &lt;/div&gt;
            &lt;/a&gt;
        &lt;/li&gt;
    &lt;/ul&gt;
&lt;/nav&gt;
</pre></div>
</div>
</section>
<section id="paso-16-crear-boton-para-eliminar-usuario">
<h3><a class="toc-backref" href="#id36">Paso 16: Crear botón para eliminar usuario</a><a class="headerlink" href="#paso-16-crear-boton-para-eliminar-usuario" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Creamos el último servicio de <strong>user.service.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>import { Injectable } from &#39;@angular/core&#39;;
import {HttpClient, HttpHeaders} from &#39;@angular/common/http&#39;;
import {map} from &#39;rxjs/operators&#39;;
// importar el interface UserData:
import { User, ResetEmail, ResetPassword, UserData } from &#39;../interfaces/user&#39;;

@Injectable({
providedIn: &#39;root&#39;
})
export class UserService {
url_base: string = &#39;http://localhost:5000/api&#39;;

// cargar token y añadirlo a la cabecera:
token: any = localStorage.getItem(&#39;token&#39;);

headers: any = new HttpHeaders({
    &#39;Content-Type&#39;: &#39;application/json&#39;,
    &#39;Authorization&#39;: this.token
});

options: any = {headers: this.headers}

constructor(private http: HttpClient) { }

registerUser(user: User): any {
    return this.http.post(`${this.url_base}/register`, user)
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}

loginUser(user: User): any {
    return this.http.post(`${this.url_base}/login`, user)
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}

forgotUser(email: ResetEmail): any {
    return this.http.post(`${this.url_base}/forgot`, email)
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}

resetPassword(password: ResetPassword, id: string, token: string): any {
    return this.http.put(`${this.url_base}/reset/${id}/${token}`, password)
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}

getUser(): any {
    return this.http.get(`${this.url_base}/users`, this.options)
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}

putUser(user:any, avatar:File, id: string): any {
    var formData = new FormData();

    this.headers = new HttpHeaders({
    &#39;Accept&#39;: &#39;multipart/form-data&#39;,
    &#39;Authorization&#39;: this.token,
    });

    this.options = {headers: this.headers}

    formData.append(&#39;avatar&#39;, avatar);
    formData.append(&#39;name&#39;, user.name);
    formData.append(&#39;lastname&#39;, user.lastname);
    if(user.email.length &gt; 5){
    formData.append(&#39;email&#39;, user.email);
    }
    if(user.password.length &gt; 0){
    formData.append(&#39;password&#39;, user.password);
    }


    return this.http.put(`${this.url_base}/users/${id}`, formData, this.options, )
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}
// crear servicio para eliminar usuario:
deleteUser(id:string): any {
    return this.http.delete(`${this.url_base}/users/${id}`, this.options, )
            .pipe(map((data: object) =&gt; {
            return data;
            }));
}

}
</pre></div>
</div>
<ul class="simple">
<li><p>Crear nuevo modal para eliminar usuario: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">component</span> <span class="pre">components/deleteUserModal</span></code></p></li>
<li><p>Añadir nuevo botón y modal en <strong>user-form.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;container mt-4 text-center&quot;&gt;
    &lt;div class=&quot;row&quot;&gt;
        &lt;div class=&quot;col&quot;&gt;
            &lt;h3&gt;Datos de usuario&lt;/h3&gt;
            &lt;hr /&gt;
            &lt;img src={{avatar}} class=&quot;avatarEdit rounded img-thumbnail img-fluid&quot;  alt=&quot;Avatar&quot; /&gt;
            &lt;input type=&quot;file&quot; class=&quot;form-control mt-3&quot; placeholder=&quot;Subir avatar&quot; (change)=&quot;getAvatar($event)&quot; /&gt;
            &lt;input type=&quot;text&quot; class=&quot;form-control mt-3&quot; placeholder=&quot;Nombre&quot; [(ngModel)]=&quot;user.name&quot; /&gt;
            &lt;input type=&quot;text&quot; class=&quot;form-control mt-3&quot; placeholder=&quot;Apellidos&quot; [(ngModel)]=&quot;user.lastname&quot; /&gt;
            &lt;input type=&quot;email&quot; class=&quot;form-control mt-3&quot; placeholder=&quot;Email&quot; [(ngModel)]=&quot;user.email&quot; /&gt;
            &lt;input type=&quot;password&quot; class=&quot;form-control mt-3&quot; placeholder=&quot;nueva contraseña (dejar en blanco para no cambiar)&quot; [(ngModel)]=&quot;user.password&quot; /&gt;
            &lt;input type=&quot;button&quot; class=&quot;btn btn-success form-control mt-3&quot; value=&quot;Actualizar datos&quot; (click)=&quot;updateUser()&quot; /&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;!-- cargamos un nuevo botón para invocar el modal que eliminará al usuario: --&gt;
    &lt;div class=&quot;row&quot;&gt;
        &lt;div class=&quot;col&quot;&gt;
            &lt;hr /&gt;
            &lt;button type=&quot;button&quot; class=&quot;cursor me-2 mb-1&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#deleteUserModal&quot;&gt;Dar de baja usuario&lt;/button&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;!-- cargamos el componente con el modal y le pasamos el id de usuario: --&gt;
    &lt;app-delete-user-modal [id]=&quot;id&quot;&gt;&lt;/app-delete-user-modal&gt;
&lt;/div&gt;
</pre></div>
</div>
<ul class="simple">
<li><p>Crear nueva clase para quitar decorado del botón <strong>user-form.component.css</strong>:</p></li>
</ul>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">avatarEdit</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">width</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">height</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">.</span><span class="nc">cursor</span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">border</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="kt">px</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">background</span><span class="p">:</span><span class="w"> </span><span class="kc">transparent</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<ul class="simple">
<li><p>Preparar lógica para el modal <strong>delete-user-modal.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">cargar</span> <span class="n">Input</span> <span class="n">para</span> <span class="n">recibir</span> <span class="n">el</span> <span class="nb">id</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">OnInit</span><span class="p">,</span> <span class="n">Input</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="o">//</span> <span class="n">importar</span> <span class="n">el</span> <span class="n">servicio</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">UserService</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/services/user.service&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-delete-user-modal&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./delete-user-modal.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./delete-user-modal.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">DeleteUserModalComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
<span class="o">//</span> <span class="n">crear</span> <span class="n">atributo</span> <span class="nb">input</span> <span class="n">para</span> <span class="n">recibir</span> <span class="nb">id</span><span class="p">:</span>
<span class="nd">@Input</span><span class="p">()</span> <span class="nb">id</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

<span class="o">//</span> <span class="n">crear</span> <span class="n">el</span> <span class="n">objeto</span> <span class="n">servicio</span><span class="p">:</span>
<span class="n">constructor</span><span class="p">(</span><span class="n">private</span> <span class="n">userService</span><span class="p">:</span> <span class="n">UserService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
<span class="p">}</span>

<span class="o">//</span> <span class="n">crear</span> <span class="n">metodo</span> <span class="n">que</span> <span class="n">eliminará</span> <span class="n">el</span> <span class="n">usuario</span><span class="p">:</span>
<span class="n">delete</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
    <span class="n">this</span><span class="o">.</span><span class="n">userService</span><span class="o">.</span><span class="n">deleteUser</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">subscribe</span><span class="p">((</span><span class="n">res</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
    <span class="o">//</span> <span class="n">eliminar</span> <span class="n">token</span> <span class="n">cuando</span> <span class="n">se</span> <span class="n">borre</span> <span class="n">usuario</span><span class="p">:</span>
    <span class="n">localStorage</span><span class="o">.</span><span class="n">clear</span><span class="p">();</span>
    <span class="o">//</span> <span class="n">redirigir</span> <span class="n">a</span> <span class="n">la</span> <span class="n">pantalla</span> <span class="n">de</span> <span class="n">login</span><span class="p">:</span>
    <span class="n">window</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">href</span> <span class="o">=</span> <span class="s2">&quot;/&quot;</span><span class="p">;</span>
    <span class="p">},</span> <span class="p">(</span><span class="n">err</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span><span class="o">=&gt;</span><span class="p">{</span>
    <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Ahora vamos a crear el modal en <strong>delete-user-modal.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;modal fade&quot; id=&quot;deleteUserModal&quot; tabIndex=&quot;-1&quot; aria-labelledby=&quot;exampleModalLabel&quot; aria-hidden=&quot;true&quot;&gt;
    &lt;div class=&quot;modal-dialog&quot;&gt;
        &lt;div class=&quot;modal-content&quot;&gt;
        &lt;div class=&quot;modal-header&quot;&gt;
            &lt;h5 className=&quot;modal-title&quot; id=&quot;exampleModalLabel&quot;&gt;Cerrar cuenta&lt;/h5&gt;
            &lt;button type=&quot;button&quot; class=&quot;btn-close&quot; data-bs-dismiss=&quot;modal&quot; aria-label=&quot;Close&quot;&gt;&lt;/button&gt;
        &lt;/div&gt;
        &lt;div class=&quot;modal-body&quot;&gt;
            &lt;p&gt;Se va a eliminar su cuenta de usuario junto a todas sus tareas&lt;/p&gt;
            &lt;p&gt;Esta operación no tiene retorno, ¿proceder?&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class=&quot;modal-footer&quot;&gt;
            &lt;button type=&quot;button&quot; class=&quot;btn btn-secondary&quot; data-bs-dismiss=&quot;modal&quot;&gt;Cancelar&lt;/button&gt;
            &lt;!-- añadir función al botón: --&gt;
            &lt;button type=&quot;button&quot; (click)=&quot;delete()&quot; class=&quot;btn btn-danger&quot; data-bs-dismiss=&quot;modal&quot;&gt;Aceptar&lt;/button&gt;
        &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
</pre></div>
</div>
</section>
<section id="paso-17-subir-cambios-a-github">
<h3><a class="toc-backref" href="#id37">Paso 17: Subir cambios a GitHub</a><a class="headerlink" href="#paso-17-subir-cambios-a-github" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Parar ejecución de app.</p></li>
<li><p>Añadir cambios: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">.</span></code></p></li>
<li><p>Realizar un commit: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-am</span> <span class="pre">&quot;Phase</span> <span class="pre">2</span> <span class="pre">complete&quot;</span></code></p></li>
<li><p>Subir cambios a Github con el nombre de la rama actual: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span> <span class="pre">origin</span> <span class="pre">feature/phase-2-connect-to-service</span></code></p></li>
<li><p>Desde gitHub presionar botón <strong>Compare &amp; pull request</strong>.</p></li>
<li><p>cambiar rama base <strong>master</strong> por <strong>developer</strong> y pulsar <strong>Create pull request</strong></p></li>
<li><p>Pulsar en <strong>Merge pull request</strong> y a continuación en <strong>Confirm merge</strong>.</p></li>
<li><p>Una vez terminado volvemos a local y cambiamos de rama a developer: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">developer</span></code></p></li>
<li><p>Actualizamos rama developer: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span> <span class="pre">origin</span> <span class="pre">developer</span></code></p></li>
</ul>
<p>Y con esto concluye la segunda fase del proyecto.</p>
<hr><br>`</section>
</section>
<section id="fase-3-diseno-responsivo">
<h2><a class="toc-backref" href="#id38">Fase 3: Diseño responsivo</a><a class="headerlink" href="#fase-3-diseno-responsivo" title="Enlazar permanentemente con este título">¶</a></h2>
<p>En esta fase vamos a mejorar el diseño responsive de la aplicación para poder utilizarla en dispositivos móviles.</p>
<section id="paso-1-preparar-proyecto">
<h3><a class="toc-backref" href="#id39">Paso 1: Preparar proyecto</a><a class="headerlink" href="#paso-1-preparar-proyecto" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Crear rama feature a partir de developer: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">-b</span> <span class="pre">feature/phase-3-modify-responsive</span></code></p></li>
<li><p>Arrancar proyecto desde la raiz: <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">serve</span> <span class="pre">--port</span> <span class="pre">3000</span></code></p></li>
<li><p>En el navegador pulsar tecla F12 y pinchar sobre el icono del dispositivo movil</p></li>
</ul>
</section>
<section id="paso-2-ajustar-tabla-de-tareas">
<h3><a class="toc-backref" href="#id40">Paso 2: Ajustar Tabla de tareas</a><a class="headerlink" href="#paso-2-ajustar-tabla-de-tareas" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>En este apartado tendremos un controlador nuevo para cambiar la tabla por un listado cuando se muestre en dispositivos móviles. Para ello vamos a mover parte de la lógica de la tabla a la página de tareas <strong>task.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>import { Component, OnInit } from &#39;@angular/core&#39;;
// importar servicio e interfaces:
import { Task, TaskData } from &#39;src/app/interfaces/task&#39;;
import { TaskService } from &#39;src/app/services/task.service&#39;;

@Component({
selector: &#39;app-tasks&#39;,
templateUrl: &#39;./tasks.component.html&#39;,
styleUrls: [&#39;./tasks.component.css&#39;]
})
export class TasksComponent implements OnInit {
// creamos un nuevo array de elementos tipo taskData para cargar las tareas:
tasks: Array&lt;TaskData&gt; =  []
// vamos a optimizar los datos recogidos por tarea creando un objeto:
taskForUpdate: TaskData = {
    _id: &quot;&quot;,
    name: &quot;&quot;,
    description: &quot;&quot;,
    date_created: new Date(),
    is_complete: false,
    date_finish: new Date()
}
// recuperamos aquí el modelo de intercambio de datos:
task: Task = {
    name: &quot;&quot;,
    description: &quot;&quot;
}
// también recuperamos estos atributos para intercambiar información:
taskId: string = &quot;&quot;;
taskName: string = &quot;&quot;;

// creamos el objeto del servicio:
constructor(private taskService: TaskService) { }

ngOnInit(): void {
    // movemos la petición para recuperar las tareas:
    this.taskService.getTasks().subscribe((res:Array&lt;TaskData&gt;)=&gt;{
    this.tasks = res;
    }, (err: object) =&gt; {
    console.log(err);
    });
}
// movemos parte de la lógica de este método (solo la que trabaja con los modals):
updateTask($event: any){
    console.log(&#39;hola 1&#39;);
    if($event.delete == true){
    this.tasks = this.tasks.filter(task =&gt; task._id !== $event.id);
    console.log($event.id);
    console.log(&#39;hola malo&#39;);
    }else{
    this.tasks.map(task =&gt;{
        if(task._id === $event._id){
        task.name = $event.name;
        task.description = $event.description;
        task.is_complete = $event.is_complete;
        task.date_finish = $event.date_finish;
        }
    });
    }
}
// añadimos un método que escuche eventos:
getTask($event: any): void{
    this.taskId = $event.taskId;
    this.taskName = $event.taskName;
}
}
</pre></div>
</div>
<ul class="simple">
<li><p>Preparamos la pantalla de la página <strong>task.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;app-navbar&gt;&lt;/app-navbar&gt;
&lt;!-- ocultar la tabla cuando se encuentre en dispositivos móviles: --&gt;
&lt;div class=&quot;d-none d-sm-block&quot;&gt;
    &lt;app-task-table [tasks]=&quot;tasks&quot; [taskForUpdate]=&quot;taskForUpdate&quot; [task]=&quot;task&quot; (taskState)=&quot;getTask($event)&quot;&gt;&lt;/app-task-table&gt;
&lt;/div&gt;
&lt;div class=&quot;d-sm-none&quot;&gt;
    &lt;!-- aquí vendrá el nuevo componente que mostrará un listado de tareas en el móvil --&gt;
&lt;/div&gt;
&lt;!-- añadir aquí los componentes de modal: --&gt;
&lt;app-finish-task-modal [taskId]=&quot;taskId&quot; [taskName]=&quot;taskName&quot; (task)=&quot;updateTask($event)&quot;&gt;&lt;/app-finish-task-modal&gt;
&lt;app-delete-task-modal [taskId]=&quot;taskId&quot; [taskName]=&quot;taskName&quot; (task)=&quot;updateTask($event)&quot;&gt;&lt;/app-delete-task-modal&gt;
</pre></div>
</div>
<ul class="simple">
<li><p>Arreglamos la lógica del controlador de tabla <strong>task-table.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">cargamos</span> <span class="nb">input</span> <span class="n">y</span> <span class="n">output</span> <span class="n">para</span> <span class="n">comunicarse</span> <span class="n">entre</span> <span class="n">componentes</span><span class="p">:</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">EventEmitter</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span><span class="p">,</span> <span class="n">OnInit</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">TaskService</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/services/task.service&#39;</span><span class="p">;</span>
<span class="kn">import</span> <span class="p">{</span> <span class="n">Task</span><span class="p">,</span> <span class="n">TaskData</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/interfaces/task&#39;</span><span class="p">;</span>

<span class="nd">@Component</span><span class="p">({</span>
<span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-task-table&#39;</span><span class="p">,</span>
<span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./task-table.component.html&#39;</span><span class="p">,</span>
<span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./task-table.component.css&#39;</span><span class="p">]</span>
<span class="p">})</span>
<span class="n">export</span> <span class="k">class</span> <span class="nc">TaskTableComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
<span class="o">//</span> <span class="n">traemos</span> <span class="n">las</span> <span class="n">tareas</span> <span class="k">del</span> <span class="n">padre</span><span class="p">:</span>
<span class="nd">@Input</span><span class="p">()</span> <span class="n">tasks</span><span class="p">:</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">TaskData</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[]</span>
<span class="o">//</span> <span class="n">traemos</span> <span class="n">el</span> <span class="n">nuevo</span> <span class="n">componente</span> <span class="n">para</span> <span class="n">gestionar</span> <span class="n">una</span> <span class="n">tarea</span> <span class="k">del</span> <span class="n">padre</span><span class="p">:</span>
<span class="nd">@Input</span><span class="p">()</span> <span class="n">taskForUpdate</span><span class="p">:</span> <span class="n">TaskData</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">_id</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">date_created</span><span class="p">:</span> <span class="n">new</span> <span class="n">Date</span><span class="p">(),</span>
    <span class="n">is_complete</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="n">date_finish</span><span class="p">:</span> <span class="n">new</span> <span class="n">Date</span><span class="p">()</span>
<span class="p">}</span>
<span class="o">//</span> <span class="n">y</span> <span class="n">también</span> <span class="n">el</span> <span class="n">componente</span> <span class="n">de</span> <span class="n">comunicación</span><span class="p">:</span>
<span class="nd">@Input</span><span class="p">()</span> <span class="n">task</span><span class="p">:</span> <span class="n">Task</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>
<span class="o">//</span> <span class="n">preparamos</span> <span class="n">un</span> <span class="n">evento</span> <span class="n">para</span> <span class="n">emitir</span> <span class="n">una</span> <span class="n">tarea</span> <span class="n">seleccionada</span><span class="p">:</span>
<span class="nd">@Output</span><span class="p">()</span> <span class="n">taskState</span><span class="p">:</span> <span class="n">EventEmitter</span><span class="o">&lt;</span><span class="nb">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">new</span> <span class="n">EventEmitter</span><span class="p">();</span>

<span class="n">isUpdateTask</span><span class="p">:</span> <span class="n">boolean</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>

<span class="n">constructor</span><span class="p">(</span><span class="n">private</span> <span class="n">taskService</span><span class="p">:</span> <span class="n">TaskService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

<span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>

<span class="p">}</span>
<span class="o">//</span> <span class="n">creamos</span> <span class="n">un</span> <span class="n">emisor</span> <span class="n">encaragdo</span> <span class="n">de</span> <span class="n">transmitir</span> <span class="n">la</span> <span class="n">tarea</span><span class="p">:</span>
<span class="n">getTask</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span><span class="n">string</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span><span class="n">string</span><span class="p">):</span> <span class="n">void</span> <span class="p">{</span>
    <span class="n">this</span><span class="o">.</span><span class="n">taskState</span><span class="o">.</span><span class="n">emit</span><span class="p">({</span><span class="n">taskId</span><span class="p">:</span> <span class="nb">id</span><span class="p">,</span> <span class="n">taskName</span><span class="p">:</span> <span class="n">name</span><span class="p">});</span>
<span class="p">}</span>

<span class="n">editTask</span><span class="p">(</span><span class="n">taskData</span><span class="p">:</span><span class="n">TaskData</span><span class="p">){</span>
    <span class="n">this</span><span class="o">.</span><span class="n">taskForUpdate</span> <span class="o">=</span> <span class="n">taskData</span><span class="p">;</span>
    <span class="n">this</span><span class="o">.</span><span class="n">isUpdateTask</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">updateTask</span><span class="p">(){</span>
    <span class="o">//</span> <span class="n">hemos</span> <span class="n">quitado</span> <span class="n">la</span> <span class="n">lógica</span> <span class="n">que</span> <span class="n">trabaja</span> <span class="n">con</span> <span class="n">los</span> <span class="n">eventos</span> <span class="k">del</span> <span class="n">modal</span><span class="p">:</span>
    <span class="k">if</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">isUpdateTask</span> <span class="o">==</span> <span class="n">true</span><span class="p">){</span>
    <span class="n">this</span><span class="o">.</span><span class="n">taskService</span><span class="o">.</span><span class="n">updateTask</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">taskForUpdate</span><span class="p">,</span> <span class="n">this</span><span class="o">.</span><span class="n">taskForUpdate</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
    <span class="o">.</span><span class="n">subscribe</span><span class="p">((</span><span class="n">res</span><span class="p">:</span> <span class="nb">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">task</span> <span class="o">=&gt;</span><span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">_id</span> <span class="o">===</span> <span class="n">this</span><span class="o">.</span><span class="n">taskForUpdate</span><span class="o">.</span><span class="n">_id</span><span class="p">){</span>
            <span class="n">task</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">name</span><span class="p">;</span>
            <span class="n">task</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">description</span><span class="p">;</span>
            <span class="n">this</span><span class="o">.</span><span class="n">isUpdateTask</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">},(</span><span class="n">err</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">=&gt;</span><span class="p">{</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">err</span><span class="p">);</span>
    <span class="p">})</span>

    <span class="p">}</span>


<span class="p">}</span>

<span class="n">cancelUpdate</span><span class="p">():</span> <span class="n">void</span><span class="p">{</span>
    <span class="n">this</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="n">this</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="n">this</span><span class="o">.</span><span class="n">isUpdateTask</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">createTask</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
    <span class="n">this</span><span class="o">.</span><span class="n">taskService</span><span class="o">.</span><span class="n">postTask</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">task</span><span class="p">)</span>
    <span class="o">.</span><span class="n">subscribe</span><span class="p">((</span><span class="n">res</span><span class="p">:</span> <span class="nb">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">res</span><span class="p">);</span>
        <span class="n">this</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">task</span><span class="p">);</span>
    <span class="p">},</span> <span class="p">(</span><span class="n">err</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">err</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>modificamos la pantalla de la tabla <strong>task-table.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;div class=&quot;text-center container&quot;&gt;
    &lt;table class=&quot;table mt-4&quot;&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th scope=&quot;col&quot;&gt;Título&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Descripción&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Fecha creación&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Finalizada&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Fecha Finalización&lt;/th&gt;
                &lt;th scope=&quot;col&quot;&gt;Operaciones&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody class=&quot;text-start&quot;&gt;
            &lt;tr *ngIf=&quot;isUpdateTask == true; else taskList&quot;&gt;
            &lt;!-- a partir de ahora cuando se edite una tarea se usará el atributo taskForUpdate --&gt;
                &lt;td&gt;
                    &lt;input [(ngModel)]=&quot;taskForUpdate.name&quot; class=&quot;col me-2 form-control form-sm&quot; type=&quot;text&quot; placeholder=&quot;Título&quot; /&gt;
                &lt;/td&gt;
                &lt;td&gt;
                    &lt;input [(ngModel)]=&quot;taskForUpdate.description&quot; class=&quot;col me-2 form-control&quot; type=&quot;text&quot; placeholder=&quot;Descripción&quot; /&gt;
                &lt;/td&gt;
                &lt;td&gt;{{taskForUpdate.date_created|date: &#39;dd/MM/yyyy hh:mm&#39;}}&lt;/td&gt;
                &lt;td&gt;
                    &lt;span *ngIf=&quot;taskForUpdate.is_complete == true&quot;&gt;Si&lt;/span&gt;
                    &lt;span *ngIf=&quot;taskForUpdate.is_complete == false&quot;&gt;No&lt;/span&gt;
                &lt;/td&gt;
                &lt;td&gt;&lt;span *ngIf=&quot;taskForUpdate.date_finish != null&quot;&gt;{{taskForUpdate.date_finish|date: &#39;dd/MM/yyyy hh:mm&#39;}}&lt;/span&gt;&lt;/td&gt;
                &lt;td class=&quot;text-center&quot;&gt;
                    &lt;button type=&quot;button&quot; (click)=&quot;updateTask()&quot; class=&quot;btn btn-sm btn-success me-2 mb-1&quot;&gt;Guardar&lt;/button&gt;
                    &lt;button type=&quot;button&quot; (click)=&quot;cancelUpdate()&quot; class=&quot;btn btn-sm btn-primary me-2 mb-1&quot; &gt;Cancelar&lt;/button&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
            &lt;!-- movemos el listado a un ng-template que se mostrará cuando no se cumpla la condición anterior --&gt;
            &lt;ng-template #taskList&gt;
                &lt;tr *ngFor=&quot;let data of tasks&quot;&gt;
                    &lt;td&gt;{{data.name}}&lt;/td&gt;
                    &lt;td&gt;{{data.description}}&lt;/td&gt;
                    &lt;td&gt;{{data.date_created|date: &#39;dd/MM/yyyy hh:mm&#39;}}&lt;/td&gt;
                    &lt;td&gt;
                        &lt;span *ngIf=&quot;data.is_complete == true&quot;&gt;Si&lt;/span&gt;
                        &lt;span *ngIf=&quot;data.is_complete == false&quot;&gt;No&lt;/span&gt;
                    &lt;/td&gt;
                    &lt;td&gt;&lt;span *ngIf=&quot;data.date_finish != null&quot;&gt;{{data.date_finish|date: &#39;dd/MM/yyyy hh:mm&#39;}}&lt;/span&gt;&lt;/td&gt;
                    &lt;td class=&quot;text-center&quot;&gt;
                        &lt;!-- añadimos un nuevo botón para actualizar tarea con los datos id, nombre, descripcion y con true decir que estamos actualizando: --&gt;
                        &lt;button (click)=&quot;editTask(data)&quot; class=&quot;btn btn-sm btn-warning me-2&quot;&gt;editar tarea&lt;/button&gt;
                        &lt;button (click)=&quot;getTask(data._id, data.name)&quot; class=&quot;btn btn-sm btn-primary me-2&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#finishModal&quot;&gt;finalizar tarea&lt;/button&gt;
                        &lt;button (click)=&quot;getTask(data._id, data.name)&quot; class=&quot;btn btn-sm btn-danger me-2&quot; data-bs-toggle=&quot;modal&quot; data-bs-target=&quot;#deleteModal&quot;&gt;Eliminar tarea&lt;/button&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
                &lt;!-- metemos aquí la acción de crear tarea para poder ocultarla cuando se edite tarea --&gt;
                &lt;tr&gt;
                    &lt;td&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;/td&gt;
                    &lt;td&gt;
                        &lt;input [(ngModel)]=&quot;task.name&quot;  class=&quot;col me-2 form-control form-sm&quot; type=&quot;text&quot; placeholder=&quot;Título&quot;/&gt;
                    &lt;/td&gt;
                    &lt;td&gt;
                        &lt;input [(ngModel)]=&quot;task.description&quot; class=&quot;col me-2 form-control&quot; type=&quot;text&quot; placeholder=&quot;Descripción&quot; /&gt;
                    &lt;/td&gt;
                    &lt;td&gt;
                        &lt;input (click)=&quot;createTask()&quot; class=&quot;col me-2 form-control btn btn-success&quot; type=&quot;button&quot; value=&quot;Crear tarea&quot; /&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
            &lt;/ng-template&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
&lt;/div&gt;
</pre></div>
</div>
<ul class="simple">
<li><p>Crear nuevo componente <code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">component</span> <span class="pre">components/taskListMobile</span></code></p></li>
<li><p>Editar el controlador de <strong>task-list-mobile.component.ts</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span> <span class="n">Component</span><span class="p">,</span> <span class="n">OnInit</span><span class="p">,</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span><span class="p">,</span> <span class="n">EventEmitter</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
 <span class="kn">import</span> <span class="p">{</span> <span class="n">TaskService</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/services/task.service&#39;</span><span class="p">;</span>
 <span class="kn">import</span> <span class="p">{</span> <span class="n">Task</span><span class="p">,</span> <span class="n">TaskData</span> <span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;src/app/interfaces/task&#39;</span><span class="p">;</span>

 <span class="nd">@Component</span><span class="p">({</span>
 <span class="n">selector</span><span class="p">:</span> <span class="s1">&#39;app-task-list-mobile&#39;</span><span class="p">,</span>
 <span class="n">templateUrl</span><span class="p">:</span> <span class="s1">&#39;./task-list-mobile.component.html&#39;</span><span class="p">,</span>
 <span class="n">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;./task-list-mobile.component.css&#39;</span><span class="p">]</span>
 <span class="p">})</span>
 <span class="n">export</span> <span class="k">class</span> <span class="nc">TaskListMobileComponent</span> <span class="n">implements</span> <span class="n">OnInit</span> <span class="p">{</span>
 <span class="nd">@Input</span><span class="p">()</span> <span class="n">tasks</span><span class="p">:</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">TaskData</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[]</span>

 <span class="nd">@Input</span><span class="p">()</span> <span class="n">taskForUpdate</span><span class="p">:</span> <span class="n">TaskData</span> <span class="o">=</span> <span class="p">{</span>
     <span class="n">_id</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="n">date_created</span><span class="p">:</span> <span class="n">new</span> <span class="n">Date</span><span class="p">(),</span>
     <span class="n">is_complete</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
     <span class="n">date_finish</span><span class="p">:</span> <span class="n">new</span> <span class="n">Date</span><span class="p">()</span>
 <span class="p">}</span>

 <span class="nd">@Input</span><span class="p">()</span> <span class="n">task</span><span class="p">:</span> <span class="n">Task</span> <span class="o">=</span> <span class="p">{</span>
     <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
     <span class="n">description</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
 <span class="p">}</span>

 <span class="nd">@Output</span><span class="p">()</span> <span class="n">taskState</span><span class="p">:</span> <span class="n">EventEmitter</span><span class="o">&lt;</span><span class="nb">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">new</span> <span class="n">EventEmitter</span><span class="p">();</span>

 <span class="n">taskId</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
 <span class="n">taskName</span><span class="p">:</span> <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

 <span class="n">isUpdateTask</span><span class="p">:</span> <span class="n">boolean</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>

 <span class="n">constructor</span><span class="p">(</span><span class="n">private</span> <span class="n">taskService</span><span class="p">:</span> <span class="n">TaskService</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

 <span class="n">ngOnInit</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
 <span class="p">}</span>

 <span class="n">getTask</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
     <span class="n">this</span><span class="o">.</span><span class="n">taskState</span><span class="o">.</span><span class="n">emit</span><span class="p">({</span><span class="n">taskId</span><span class="p">:</span> <span class="n">this</span><span class="o">.</span><span class="n">taskForUpdate</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">taskName</span><span class="p">:</span> <span class="n">this</span><span class="o">.</span><span class="n">taskForUpdate</span><span class="o">.</span><span class="n">name</span><span class="p">});</span>
 <span class="p">}</span>

 <span class="o">//</span> <span class="n">Editamos</span> <span class="n">la</span> <span class="n">función</span> <span class="n">que</span> <span class="n">recoge</span> <span class="n">los</span> <span class="n">datos</span> <span class="n">de</span> <span class="n">la</span> <span class="n">tarea</span> <span class="n">a</span> <span class="n">actualizar</span> <span class="n">creando</span> <span class="n">una</span> <span class="n">nueva</span><span class="p">:</span>
 <span class="n">selectTask</span><span class="p">(</span><span class="n">taskData</span><span class="p">:</span><span class="n">TaskData</span><span class="p">){</span>
     <span class="n">this</span><span class="o">.</span><span class="n">taskForUpdate</span> <span class="o">=</span> <span class="n">taskData</span><span class="p">;</span>
 <span class="p">}</span>

 <span class="n">editTask</span><span class="p">(){</span>
     <span class="n">this</span><span class="o">.</span><span class="n">isUpdateTask</span> <span class="o">=</span> <span class="n">true</span><span class="p">;</span>
 <span class="p">}</span>

 <span class="n">updateTask</span><span class="p">(){</span>
     <span class="k">if</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">isUpdateTask</span> <span class="o">==</span> <span class="n">true</span><span class="p">){</span>
     <span class="n">this</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">this</span><span class="o">.</span><span class="n">taskForUpdate</span><span class="o">.</span><span class="n">name</span><span class="p">;</span>
     <span class="n">this</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">this</span><span class="o">.</span><span class="n">taskForUpdate</span><span class="o">.</span><span class="n">description</span><span class="p">;</span>
     <span class="n">this</span><span class="o">.</span><span class="n">taskId</span> <span class="o">=</span> <span class="n">this</span><span class="o">.</span><span class="n">taskForUpdate</span><span class="o">.</span><span class="n">_id</span><span class="p">;</span>
     <span class="n">this</span><span class="o">.</span><span class="n">taskService</span><span class="o">.</span><span class="n">updateTask</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">task</span><span class="p">,</span> <span class="n">this</span><span class="o">.</span><span class="n">taskId</span><span class="p">)</span>
     <span class="o">.</span><span class="n">subscribe</span><span class="p">((</span><span class="n">res</span><span class="p">:</span> <span class="nb">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
         <span class="n">this</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">task</span> <span class="o">=&gt;</span><span class="p">{</span>
         <span class="k">if</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">_id</span> <span class="o">===</span> <span class="n">this</span><span class="o">.</span><span class="n">taskId</span><span class="p">){</span>
             <span class="n">task</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">name</span><span class="p">;</span>
             <span class="n">task</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">description</span><span class="p">;</span>
             <span class="n">this</span><span class="o">.</span><span class="n">isUpdateTask</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="p">});</span>
     <span class="p">},(</span><span class="n">err</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">=&gt;</span><span class="p">{</span>
         <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">err</span><span class="p">);</span>
     <span class="p">})</span>
     <span class="p">}</span>


 <span class="p">}</span>

 <span class="n">cancelUpdate</span><span class="p">():</span> <span class="n">void</span><span class="p">{</span>
     <span class="n">this</span><span class="o">.</span><span class="n">taskForUpdate</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
     <span class="n">this</span><span class="o">.</span><span class="n">taskForUpdate</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
     <span class="n">this</span><span class="o">.</span><span class="n">isUpdateTask</span> <span class="o">=</span> <span class="n">false</span><span class="p">;</span>
 <span class="p">}</span>

 <span class="n">createTask</span><span class="p">():</span> <span class="n">void</span> <span class="p">{</span>
     <span class="n">this</span><span class="o">.</span><span class="n">taskService</span><span class="o">.</span><span class="n">postTask</span><span class="p">(</span><span class="n">this</span><span class="o">.</span><span class="n">task</span><span class="p">)</span>
     <span class="o">.</span><span class="n">subscribe</span><span class="p">((</span><span class="n">res</span><span class="p">:</span> <span class="nb">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
         <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">res</span><span class="p">);</span>
         <span class="n">this</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">task</span><span class="p">);</span>
     <span class="p">},</span> <span class="p">(</span><span class="n">err</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
         <span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">err</span><span class="p">);</span>
     <span class="p">});</span>
 <span class="p">}</span>

 <span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Editar <strong>task-list-mobile.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;list-group ms-1 me-1 mt-3&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">&quot;isUpdateTask == true; else taskList&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;list-group-item list-group-item-action&quot;</span> <span class="n">aria</span><span class="o">-</span><span class="n">current</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;d-flex w-100 justify-content-between&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">h5</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;mb-1&quot;</span><span class="o">&gt;&lt;</span><span class="nb">input</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;name&quot;</span> <span class="p">[(</span><span class="n">ngModel</span><span class="p">)]</span><span class="o">=</span><span class="s2">&quot;taskForUpdate.name&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;col me-2 form-control form-sm&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Título&quot;</span> <span class="o">/&gt;&lt;/</span><span class="n">h5</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">small</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">taskForUpdate</span><span class="o">.</span><span class="n">date_created</span><span class="o">|</span><span class="n">date</span><span class="p">:</span> <span class="s1">&#39;dd/MM/yyyy hh:mm&#39;</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">small</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;mb-1&quot;</span><span class="o">&gt;&lt;</span><span class="nb">input</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;description&quot;</span> <span class="p">[(</span><span class="n">ngModel</span><span class="p">)]</span><span class="o">=</span><span class="s2">&quot;taskForUpdate.description&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;col me-2 form-control&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Descripción&quot;</span> <span class="o">/&gt;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">small</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">&quot;taskForUpdate.is_complete != null; else todo&quot;</span> <span class="o">&gt;</span><span class="n">Finalizada</span><span class="p">:</span> <span class="p">{{</span><span class="n">taskForUpdate</span><span class="o">.</span><span class="n">date_finish</span><span class="o">|</span><span class="n">date</span><span class="p">:</span> <span class="s1">&#39;dd/MM/yyyy hh:mm&#39;</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">small</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">ng</span><span class="o">-</span><span class="n">template</span> <span class="c1">#todo&gt;&lt;small&gt;En curso&lt;/small&gt;&lt;/ng-template&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">ng</span><span class="o">-</span><span class="n">template</span> <span class="c1">#taskList&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span> <span class="o">*</span><span class="n">ngFor</span><span class="o">=</span><span class="s2">&quot;let data of tasks&quot;</span> <span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;list-group-item list-group-item-action&quot;</span> <span class="n">aria</span><span class="o">-</span><span class="n">current</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">&quot;selectTask(data)&quot;</span> <span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;d-flex w-100 justify-content-between&quot;</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">h5</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;mb-1&quot;</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">data</span><span class="o">.</span><span class="n">name</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">h5</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">small</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">data</span><span class="o">.</span><span class="n">date_created</span><span class="o">|</span><span class="n">date</span><span class="p">:</span> <span class="s1">&#39;dd/MM/yyyy hh:mm&#39;</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">small</span><span class="o">&gt;</span>
                    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;mb-1&quot;</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">data</span><span class="o">.</span><span class="n">description</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">small</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">&quot;data.date_finish != null; else todo&quot;</span> <span class="o">&gt;</span><span class="n">Finalizada</span><span class="p">:</span> <span class="p">{{</span><span class="n">data</span><span class="o">.</span><span class="n">date_finish</span><span class="o">|</span><span class="n">date</span><span class="p">:</span> <span class="s1">&#39;dd/MM/yyyy hh:mm&#39;</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">small</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">ng</span><span class="o">-</span><span class="n">template</span> <span class="c1">#todo&gt;&lt;small&gt;En curso&lt;/small&gt;&lt;/ng-template&gt;</span>
                <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;list-group-item list-group-item-action&quot;</span> <span class="n">aria</span><span class="o">-</span><span class="n">current</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;d-flex w-100 justify-content-between&quot;</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">h5</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;mb-1&quot;</span><span class="o">&gt;&lt;</span><span class="nb">input</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;name&quot;</span> <span class="p">[(</span><span class="n">ngModel</span><span class="p">)]</span><span class="o">=</span><span class="s2">&quot;task.name&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;col me-2 form-control form-sm&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Título&quot;</span> <span class="o">/&gt;&lt;/</span><span class="n">h5</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">small</span><span class="o">&gt;</span><span class="n">NUEVA</span> <span class="n">TAREA</span><span class="o">&lt;/</span><span class="n">small</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">p</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;mb-1&quot;</span><span class="o">&gt;&lt;</span><span class="nb">input</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;description&quot;</span> <span class="p">[(</span><span class="n">ngModel</span><span class="p">)]</span><span class="o">=</span><span class="s2">&quot;task.description&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;col me-2 form-control&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span> <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Descripción&quot;</span> <span class="o">/&gt;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">small</span><span class="o">&gt;&lt;</span><span class="n">button</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn btn-success&quot;</span> <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">&quot;createTask()&quot;</span> <span class="o">&gt;</span><span class="n">crear</span> <span class="n">tarea</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;&lt;/</span><span class="n">small</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">ng</span><span class="o">-</span><span class="n">template</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">br</span> <span class="o">/&gt;&lt;</span><span class="n">br</span> <span class="o">/&gt;&lt;</span><span class="n">br</span> <span class="o">/&gt;&lt;</span><span class="n">br</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">nav</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;navbar fixed-bottom navbar-dark bg-dark&quot;</span> <span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;container-fluid text-center&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn-group&quot;</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;group&quot;</span> <span class="n">aria</span><span class="o">-</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Basic mixed styles example&quot;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">button</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">&quot;isUpdateTask == false&quot;</span>  <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn btn-warning&quot;</span> <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">&quot;editTask()&quot;</span> <span class="o">&gt;</span><span class="n">Editar</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">button</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">&quot;isUpdateTask == false&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn btn-primary&quot;</span> <span class="n">data</span><span class="o">-</span><span class="n">bs</span><span class="o">-</span><span class="n">toggle</span><span class="o">=</span><span class="s2">&quot;modal&quot;</span> <span class="n">data</span><span class="o">-</span><span class="n">bs</span><span class="o">-</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;#finishModal&quot;</span> <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">&quot;getTask()&quot;</span><span class="o">&gt;</span><span class="n">Finalizar</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">button</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">&quot;isUpdateTask == false&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn btn-danger&quot;</span> <span class="n">data</span><span class="o">-</span><span class="n">bs</span><span class="o">-</span><span class="n">toggle</span><span class="o">=</span><span class="s2">&quot;modal&quot;</span> <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">&quot;getTask()&quot;</span> <span class="n">data</span><span class="o">-</span><span class="n">bs</span><span class="o">-</span><span class="n">target</span><span class="o">=</span><span class="s2">&quot;#deleteModal&quot;</span><span class="o">&gt;</span><span class="n">Eliminar</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">button</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">&quot;isUpdateTask == true&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn btn-success&quot;</span>  <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">&quot;updateTask()&quot;</span><span class="o">&gt;</span><span class="n">Guardar</span> <span class="n">cambios</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">button</span> <span class="o">*</span><span class="n">ngIf</span><span class="o">=</span><span class="s2">&quot;isUpdateTask == true&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;button&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;btn btn-secondary&quot;</span> <span class="p">(</span><span class="n">click</span><span class="p">)</span><span class="o">=</span><span class="s2">&quot;cancelUpdate()&quot;</span> <span class="o">&gt;</span><span class="n">Cerrar</span><span class="o">&lt;/</span><span class="n">button</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">nav</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Cargar el componente en la pagina <strong>task.component.html</strong>:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;app-navbar&gt;&lt;/app-navbar&gt;
 &lt;div class=&quot;d-none d-sm-block&quot;&gt;
     &lt;app-task-table [tasks]=&quot;tasks&quot; [taskForUpdate]=&quot;taskForUpdate&quot; [task]=&quot;task&quot; (taskState)=&quot;getTask($event)&quot;&gt;&lt;/app-task-table&gt;
 &lt;/div&gt;
 &lt;div class=&quot;d-sm-none&quot;&gt;
     &lt;!-- añadimos el componente para listar tareas en móvil: --&gt;
     &lt;app-task-list-mobile [tasks]=&quot;tasks&quot; [taskForUpdate]=&quot;taskForUpdate&quot; [task]=&quot;task&quot; (taskState)=&quot;getTask($event)&quot;&gt;&lt;/app-task-list-mobile&gt;
 &lt;/div&gt;
 &lt;app-finish-task-modal [taskId]=&quot;taskId&quot; [taskName]=&quot;taskName&quot; (task)=&quot;updateTask($event)&quot;&gt;&lt;/app-finish-task-modal&gt;
 &lt;app-delete-task-modal [taskId]=&quot;taskId&quot; [taskName]=&quot;taskName&quot; (task)=&quot;updateTask($event)&quot;&gt;&lt;/app-delete-task-modal&gt;
</pre></div>
</div>
</section>
<section id="paso-3-subir-cambios-a-github">
<h3><a class="toc-backref" href="#id41">Paso 3: Subir cambios a GitHub</a><a class="headerlink" href="#paso-3-subir-cambios-a-github" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Parar ejecución de app.</p></li>
<li><p>Añadir cambios: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">.</span></code></p></li>
<li><p>Realizar un commit: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-am</span> <span class="pre">&quot;Phase</span> <span class="pre">3</span> <span class="pre">complete&quot;</span></code></p></li>
<li><p>Subir cambios a Github con el nombre de la rama actual: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span> <span class="pre">origin</span> <span class="pre">feature/phase-3-modify-responsive</span></code></p></li>
<li><p>Desde gitHub presionar botón <strong>Compare &amp; pull request</strong>.</p></li>
<li><p>cambiar rama base <strong>master</strong> por <strong>developer</strong> y pulsar <strong>Create pull request</strong></p></li>
<li><p>Pulsar en <strong>Merge pull request</strong> y a continuación en <strong>Confirm merge</strong>.</p></li>
<li><p>Una vez terminado volvemos a local y cambiamos de rama a developer: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">developer</span></code></p></li>
<li><p>Actualizamos rama developer: <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span> <span class="pre">origin</span> <span class="pre">developer</span></code></p></li>
</ul>
<p>Y con esto concluye la tercera fase del proyecto.</p>
<hr><br></section>
</section>
</section>


          </div>
          <div class="page-nav">
            <div class="inner"><ul class="page-nav">
  <li class="prev">
    <a href="react.html"
       title="capítulo anterior">← Frontend React Task Learn</a>
  </li>
  <li class="next">
    <a href="../fullstack/task-learn-symfony.html"
       title="próximo capítulo">Backend NodeJS + ExpressJS - API Task Learn →</a>
  </li>
</ul><div class="footer" role="contentinfo">
      &#169; Derechos de autor Creado por Guillermo Granados Gomez bajo Licencia MIT.
</div>
            </div>
          </div>
      </page>
    </div></div>
    
    
  </body>
</html>